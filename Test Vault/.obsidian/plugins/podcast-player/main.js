/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var ps=Object.create;var tt=Object.defineProperty;var hs=Object.getOwnPropertyDescriptor;var fs=Object.getOwnPropertyNames;var gs=Object.getPrototypeOf,ms=Object.prototype.hasOwnProperty;var q=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),ys=(l,e)=>{for(var t in e)tt(l,t,{get:e[t],enumerable:!0})},Zt=(l,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fs(e))!ms.call(l,i)&&i!==t&&tt(l,i,{get:()=>e[i],enumerable:!(r=hs(e,i))||r.enumerable});return l};var er=(l,e,t)=>(t=l!=null?ps(gs(l)):{},Zt(e||!l||!l.__esModule?tt(t,"default",{value:l,enumerable:!0}):t,l)),Ps=l=>Zt(tt({},"__esModule",{value:!0}),l);var st=q(Mt=>{(function(){Mt.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Mt)});var oe=q((dr,fe)=>{(function(){var l,e,t,r,i,o,n,a=[].slice,p={}.hasOwnProperty;l=function(){var E,T,S,w,f,y;if(y=arguments[0],f=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(E=0,S=f.length;E<S;E++)if(w=f[E],w!=null)for(T in w)p.call(w,T)&&(y[T]=w[T]);return y},i=function(E){return!!E&&Object.prototype.toString.call(E)==="[object Function]"},o=function(E){var T;return!!E&&((T=typeof E)=="function"||T==="object")},t=function(E){return i(Array.isArray)?Array.isArray(E):Object.prototype.toString.call(E)==="[object Array]"},r=function(E){var T;if(t(E))return!E.length;for(T in E)if(p.call(E,T))return!1;return!0},n=function(E){var T,S;return o(E)&&(S=Object.getPrototypeOf(E))&&(T=S.constructor)&&typeof T=="function"&&T instanceof T&&Function.prototype.toString.call(T)===Function.prototype.toString.call(Object)},e=function(E){return i(E.valueOf)?E.valueOf():E},fe.exports.assign=l,fe.exports.isFunction=i,fe.exports.isObject=o,fe.exports.isArray=t,fe.exports.isEmpty=r,fe.exports.isPlainObject=n,fe.exports.getValue=e}).call(dr)});var Lt=q((pr,hr)=>{(function(){var l;hr.exports=l=function(){function e(){}return e.prototype.hasFeature=function(t,r){return!0},e.prototype.createDocumentType=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(pr)});var mr=q((fr,gr)=>{(function(){var l;gr.exports=l=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(fr)});var Er=q((yr,Pr)=>{(function(){var l;Pr.exports=l=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(yr)});var Sr=q((wr,br)=>{(function(){var l,e,t;e=mr(),t=Er(),br.exports=l=function(){function r(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,o){return!0},r.prototype.setParameter=function(i,o){return o!=null?this.params[i]=o:delete this.params[i]},r}()}).call(wr)});var X=q((vr,Tr)=>{(function(){Tr.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(vr)});var Ft=q((Dr,xr)=>{(function(){var l,e,t;l=X(),t=ee(),xr.exports=e=function(){function r(i,o,n){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(n),this.type=l.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},r.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},r}()}).call(Dr)});var ot=q((Ir,Cr)=>{(function(){var l;Cr.exports=l=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var r;return r=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,r||null},e.prototype.removeNamedItem=function(t){var r;return r=this.nodes[t],delete this.nodes[t],r||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Ir)});var nt=q((Ar,Nr)=>{(function(){var l,e,t,r,i,o,n,a,p,E=function(S,w){for(var f in w)T.call(w,f)&&(S[f]=w[f]);function y(){this.constructor=S}return y.prototype=w.prototype,S.prototype=new y,S.__super__=w.prototype,S},T={}.hasOwnProperty;p=oe(),a=p.isObject,n=p.isFunction,o=p.getValue,i=ee(),l=X(),e=Ft(),r=ot(),Nr.exports=t=function(S){E(w,S);function w(f,y,C){var M,x,F,m;if(w.__super__.constructor.call(this,f),y==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(y),this.type=l.Element,this.attribs={},this.schemaTypeInfo=null,C!=null&&this.attribute(C),f.type===l.Document&&(this.isRoot=!0,this.documentObject=f,f.rootObject=this,f.children)){for(m=f.children,x=0,F=m.length;x<F;x++)if(M=m[x],M.type===l.DocType){M.name=this.name;break}}}return Object.defineProperty(w.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(w.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(w.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(w.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(w.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(w.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(w.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(w.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),w.prototype.clone=function(){var f,y,C,M;C=Object.create(this),C.isRoot&&(C.documentObject=null),C.attribs={},M=this.attribs;for(y in M)T.call(M,y)&&(f=M[y],C.attribs[y]=f.clone());return C.children=[],this.children.forEach(function(x){var F;return F=x.clone(),F.parent=C,C.children.push(F)}),C},w.prototype.attribute=function(f,y){var C,M;if(f!=null&&(f=o(f)),a(f))for(C in f)T.call(f,C)&&(M=f[C],this.attribute(C,M));else n(y)&&(y=y.apply()),this.options.keepNullAttributes&&y==null?this.attribs[f]=new e(this,f,""):y!=null&&(this.attribs[f]=new e(this,f,y));return this},w.prototype.removeAttribute=function(f){var y,C,M;if(f==null)throw new Error("Missing attribute name. "+this.debugInfo());if(f=o(f),Array.isArray(f))for(C=0,M=f.length;C<M;C++)y=f[C],delete this.attribs[y];else delete this.attribs[f];return this},w.prototype.toString=function(f){return this.options.writer.element(this,this.options.writer.filterOptions(f))},w.prototype.att=function(f,y){return this.attribute(f,y)},w.prototype.a=function(f,y){return this.attribute(f,y)},w.prototype.getAttribute=function(f){return this.attribs.hasOwnProperty(f)?this.attribs[f].value:null},w.prototype.setAttribute=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getAttributeNode=function(f){return this.attribs.hasOwnProperty(f)?this.attribs[f]:null},w.prototype.setAttributeNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.removeAttributeNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getAttributeNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.setAttributeNS=function(f,y,C){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.removeAttributeNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getAttributeNodeNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.setAttributeNodeNS=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByTagNameNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.hasAttribute=function(f){return this.attribs.hasOwnProperty(f)},w.prototype.hasAttributeNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.setIdAttribute=function(f,y){return this.attribs.hasOwnProperty(f)?this.attribs[f].isId:y},w.prototype.setIdAttributeNS=function(f,y,C){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.setIdAttributeNode=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByTagNameNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByClassName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.isEqualNode=function(f){var y,C,M;if(!w.__super__.isEqualNode.apply(this,arguments).isEqualNode(f)||f.namespaceURI!==this.namespaceURI||f.prefix!==this.prefix||f.localName!==this.localName||f.attribs.length!==this.attribs.length)return!1;for(y=C=0,M=this.attribs.length-1;0<=M?C<=M:C>=M;y=0<=M?++C:--C)if(!this.attribs[y].isEqualNode(f.attribs[y]))return!1;return!0},w}(i)}).call(Ar)});var He=q((Mr,Lr)=>{(function(){var l,e,t=function(i,o){for(var n in o)r.call(o,n)&&(i[n]=o[n]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=ee(),Lr.exports=l=function(i){t(o,i);function o(n){o.__super__.constructor.call(this,n),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(n,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(n){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(n,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(n,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(n,a,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(n){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(n)||n.data!==this.data)},o}(e)}).call(Mr)});var at=q((Fr,Or)=>{(function(){var l,e,t,r=function(o,n){for(var a in n)i.call(n,a)&&(o[a]=n[a]);function p(){this.constructor=o}return p.prototype=n.prototype,o.prototype=new p,o.__super__=n.prototype,o},i={}.hasOwnProperty;l=X(),t=He(),Or.exports=e=function(o){r(n,o);function n(a,p){if(n.__super__.constructor.call(this,a),p==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=l.CData,this.value=this.stringify.cdata(p)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},n}(t)}).call(Fr)});var ct=q((kr,qr)=>{(function(){var l,e,t,r=function(o,n){for(var a in n)i.call(n,a)&&(o[a]=n[a]);function p(){this.constructor=o}return p.prototype=n.prototype,o.prototype=new p,o.__super__=n.prototype,o},i={}.hasOwnProperty;l=X(),e=He(),qr.exports=t=function(o){r(n,o);function n(a,p){if(n.__super__.constructor.call(this,a),p==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=l.Comment,this.value=this.stringify.comment(p)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},n}(e)}).call(kr)});var ut=q((Rr,_r)=>{(function(){var l,e,t,r,i=function(n,a){for(var p in a)o.call(a,p)&&(n[p]=a[p]);function E(){this.constructor=n}return E.prototype=a.prototype,n.prototype=new E,n.__super__=a.prototype,n},o={}.hasOwnProperty;r=oe().isObject,t=ee(),l=X(),_r.exports=e=function(n){i(a,n);function a(p,E,T,S){var w;a.__super__.constructor.call(this,p),r(E)&&(w=E,E=w.version,T=w.encoding,S=w.standalone),E||(E="1.0"),this.type=l.Declaration,this.version=this.stringify.xmlVersion(E),T!=null&&(this.encoding=this.stringify.xmlEncoding(T)),S!=null&&(this.standalone=this.stringify.xmlStandalone(S))}return a.prototype.toString=function(p){return this.options.writer.declaration(this,this.options.writer.filterOptions(p))},a}(t)}).call(Rr)});var lt=q((Ur,Vr)=>{(function(){var l,e,t,r=function(o,n){for(var a in n)i.call(n,a)&&(o[a]=n[a]);function p(){this.constructor=o}return p.prototype=n.prototype,o.prototype=new p,o.__super__=n.prototype,o},i={}.hasOwnProperty;t=ee(),l=X(),Vr.exports=e=function(o){r(n,o);function n(a,p,E,T,S,w){if(n.__super__.constructor.call(this,a),p==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(E==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(p));if(!T)throw new Error("Missing DTD attribute type. "+this.debugInfo(p));if(!S)throw new Error("Missing DTD attribute default. "+this.debugInfo(p));if(S.indexOf("#")!==0&&(S="#"+S),!S.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(p));if(w&&!S.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(p));this.elementName=this.stringify.name(p),this.type=l.AttributeDeclaration,this.attributeName=this.stringify.name(E),this.attributeType=this.stringify.dtdAttType(T),w&&(this.defaultValue=this.stringify.dtdAttDefault(w)),this.defaultValueType=S}return n.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},n}(t)}).call(Ur)});var dt=q((Br,jr)=>{(function(){var l,e,t,r,i=function(n,a){for(var p in a)o.call(a,p)&&(n[p]=a[p]);function E(){this.constructor=n}return E.prototype=a.prototype,n.prototype=new E,n.__super__=a.prototype,n},o={}.hasOwnProperty;r=oe().isObject,t=ee(),l=X(),jr.exports=e=function(n){i(a,n);function a(p,E,T,S){if(a.__super__.constructor.call(this,p),T==null)throw new Error("Missing DTD entity name. "+this.debugInfo(T));if(S==null)throw new Error("Missing DTD entity value. "+this.debugInfo(T));if(this.pe=!!E,this.name=this.stringify.name(T),this.type=l.EntityDeclaration,!r(S))this.value=this.stringify.dtdEntityValue(S),this.internal=!0;else{if(!S.pubID&&!S.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(T));if(S.pubID&&!S.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(T));if(this.internal=!1,S.pubID!=null&&(this.pubID=this.stringify.dtdPubID(S.pubID)),S.sysID!=null&&(this.sysID=this.stringify.dtdSysID(S.sysID)),S.nData!=null&&(this.nData=this.stringify.dtdNData(S.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(T))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(p){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(p))},a}(t)}).call(Br)});var pt=q(($r,Qr)=>{(function(){var l,e,t,r=function(o,n){for(var a in n)i.call(n,a)&&(o[a]=n[a]);function p(){this.constructor=o}return p.prototype=n.prototype,o.prototype=new p,o.__super__=n.prototype,o},i={}.hasOwnProperty;t=ee(),l=X(),Qr.exports=e=function(o){r(n,o);function n(a,p,E){if(n.__super__.constructor.call(this,a),p==null)throw new Error("Missing DTD element name. "+this.debugInfo());E||(E="(#PCDATA)"),Array.isArray(E)&&(E="("+E.join(",")+")"),this.name=this.stringify.name(p),this.type=l.ElementDeclaration,this.value=this.stringify.dtdElementValue(E)}return n.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},n}(t)}).call($r)});var ht=q((Xr,Hr)=>{(function(){var l,e,t,r=function(o,n){for(var a in n)i.call(n,a)&&(o[a]=n[a]);function p(){this.constructor=o}return p.prototype=n.prototype,o.prototype=new p,o.__super__=n.prototype,o},i={}.hasOwnProperty;t=ee(),l=X(),Hr.exports=e=function(o){r(n,o);function n(a,p,E){if(n.__super__.constructor.call(this,a),p==null)throw new Error("Missing DTD notation name. "+this.debugInfo(p));if(!E.pubID&&!E.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(p));this.name=this.stringify.name(p),this.type=l.NotationDeclaration,E.pubID!=null&&(this.pubID=this.stringify.dtdPubID(E.pubID)),E.sysID!=null&&(this.sysID=this.stringify.dtdSysID(E.sysID))}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},n}(t)}).call(Xr)});var ft=q((Wr,Gr)=>{(function(){var l,e,t,r,i,o,n,a,p,E=function(S,w){for(var f in w)T.call(w,f)&&(S[f]=w[f]);function y(){this.constructor=S}return y.prototype=w.prototype,S.prototype=new y,S.__super__=w.prototype,S},T={}.hasOwnProperty;p=oe().isObject,a=ee(),l=X(),e=lt(),r=dt(),t=pt(),i=ht(),n=ot(),Gr.exports=o=function(S){E(w,S);function w(f,y,C){var M,x,F,m,d,u;if(w.__super__.constructor.call(this,f),this.type=l.DocType,f.children){for(m=f.children,x=0,F=m.length;x<F;x++)if(M=m[x],M.type===l.Element){this.name=M.name;break}}this.documentObject=f,p(y)&&(d=y,y=d.pubID,C=d.sysID),C==null&&(u=[y,C],C=u[0],y=u[1]),y!=null&&(this.pubID=this.stringify.dtdPubID(y)),C!=null&&(this.sysID=this.stringify.dtdSysID(C))}return Object.defineProperty(w.prototype,"entities",{get:function(){var f,y,C,M,x;for(M={},x=this.children,y=0,C=x.length;y<C;y++)f=x[y],f.type===l.EntityDeclaration&&!f.pe&&(M[f.name]=f);return new n(M)}}),Object.defineProperty(w.prototype,"notations",{get:function(){var f,y,C,M,x;for(M={},x=this.children,y=0,C=x.length;y<C;y++)f=x[y],f.type===l.NotationDeclaration&&(M[f.name]=f);return new n(M)}}),Object.defineProperty(w.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(w.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(w.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),w.prototype.element=function(f,y){var C;return C=new t(this,f,y),this.children.push(C),this},w.prototype.attList=function(f,y,C,M,x){var F;return F=new e(this,f,y,C,M,x),this.children.push(F),this},w.prototype.entity=function(f,y){var C;return C=new r(this,!1,f,y),this.children.push(C),this},w.prototype.pEntity=function(f,y){var C;return C=new r(this,!0,f,y),this.children.push(C),this},w.prototype.notation=function(f,y){var C;return C=new i(this,f,y),this.children.push(C),this},w.prototype.toString=function(f){return this.options.writer.docType(this,this.options.writer.filterOptions(f))},w.prototype.ele=function(f,y){return this.element(f,y)},w.prototype.att=function(f,y,C,M,x){return this.attList(f,y,C,M,x)},w.prototype.ent=function(f,y){return this.entity(f,y)},w.prototype.pent=function(f,y){return this.pEntity(f,y)},w.prototype.not=function(f,y){return this.notation(f,y)},w.prototype.up=function(){return this.root()||this.documentObject},w.prototype.isEqualNode=function(f){return!(!w.__super__.isEqualNode.apply(this,arguments).isEqualNode(f)||f.name!==this.name||f.publicId!==this.publicId||f.systemId!==this.systemId)},w}(a)}).call(Wr)});var gt=q((zr,Yr)=>{(function(){var l,e,t,r=function(o,n){for(var a in n)i.call(n,a)&&(o[a]=n[a]);function p(){this.constructor=o}return p.prototype=n.prototype,o.prototype=new p,o.__super__=n.prototype,o},i={}.hasOwnProperty;l=X(),e=ee(),Yr.exports=t=function(o){r(n,o);function n(a,p){if(n.__super__.constructor.call(this,a),p==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=l.Raw,this.value=this.stringify.raw(p)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},n}(e)}).call(zr)});var mt=q((Kr,Jr)=>{(function(){var l,e,t,r=function(o,n){for(var a in n)i.call(n,a)&&(o[a]=n[a]);function p(){this.constructor=o}return p.prototype=n.prototype,o.prototype=new p,o.__super__=n.prototype,o},i={}.hasOwnProperty;l=X(),e=He(),Jr.exports=t=function(o){r(n,o);function n(a,p){if(n.__super__.constructor.call(this,a),p==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=l.Text,this.value=this.stringify.text(p)}return Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var a,p,E;for(E="",p=this.previousSibling;p;)E=p.data+E,p=p.previousSibling;for(E+=this.data,a=this.nextSibling;a;)E=E+a.data,a=a.nextSibling;return E}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},n.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(e)}).call(Kr)});var yt=q((Zr,ei)=>{(function(){var l,e,t,r=function(o,n){for(var a in n)i.call(n,a)&&(o[a]=n[a]);function p(){this.constructor=o}return p.prototype=n.prototype,o.prototype=new p,o.__super__=n.prototype,o},i={}.hasOwnProperty;l=X(),e=He(),ei.exports=t=function(o){r(n,o);function n(a,p,E){if(n.__super__.constructor.call(this,a),p==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=l.ProcessingInstruction,this.target=this.stringify.insTarget(p),this.name=this.target,E&&(this.value=this.stringify.insValue(E))}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},n.prototype.isEqualNode=function(a){return!(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},n}(e)}).call(Zr)});var Ot=q((ti,ri)=>{(function(){var l,e,t,r=function(o,n){for(var a in n)i.call(n,a)&&(o[a]=n[a]);function p(){this.constructor=o}return p.prototype=n.prototype,o.prototype=new p,o.__super__=n.prototype,o},i={}.hasOwnProperty;t=ee(),l=X(),ri.exports=e=function(o){r(n,o);function n(a){n.__super__.constructor.call(this,a),this.type=l.Dummy}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(a){return""},n}(t)}).call(ti)});var oi=q((ii,si)=>{(function(){var l;si.exports=l=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(ii)});var ci=q((ni,ai)=>{(function(){ai.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(ni)});var ee=q((ui,li)=>{(function(){var l,e,t,r,i,o,n,a,p,E,T,S,w,f,y,C,M,x,F,m={}.hasOwnProperty;F=oe(),x=F.isObject,M=F.isFunction,C=F.isEmpty,y=F.getValue,a=null,t=null,r=null,i=null,o=null,w=null,f=null,S=null,n=null,e=null,T=null,p=null,l=null,li.exports=E=function(){function d(u){this.parent=u,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=nt(),t=at(),r=ct(),i=ut(),o=ft(),w=gt(),f=mt(),S=yt(),n=Ot(),e=X(),T=oi(),p=ot(),l=ci())}return Object.defineProperty(d.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(d.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(d.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(d.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(d.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new T(this.children)),this.childNodeList}}),Object.defineProperty(d.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(d.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(d.prototype,"previousSibling",{get:function(){var u;return u=this.parent.children.indexOf(this),this.parent.children[u-1]||null}}),Object.defineProperty(d.prototype,"nextSibling",{get:function(){var u;return u=this.parent.children.indexOf(this),this.parent.children[u+1]||null}}),Object.defineProperty(d.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(d.prototype,"textContent",{get:function(){var u,P,v,g,A;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(A="",g=this.children,P=0,v=g.length;P<v;P++)u=g[P],u.textContent&&(A+=u.textContent);return A}else return null},set:function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),d.prototype.setParent=function(u){var P,v,g,A,b;for(this.parent=u,u&&(this.options=u.options,this.stringify=u.stringify),A=this.children,b=[],v=0,g=A.length;v<g;v++)P=A[v],b.push(P.setParent(this));return b},d.prototype.element=function(u,P,v){var g,A,b,I,L,O,R,B,k,H,V;if(O=null,P===null&&v==null&&(k=[{},null],P=k[0],v=k[1]),P==null&&(P={}),P=y(P),x(P)||(H=[P,v],v=H[0],P=H[1]),u!=null&&(u=y(u)),Array.isArray(u))for(b=0,R=u.length;b<R;b++)A=u[b],O=this.element(A);else if(M(u))O=this.element(u.apply());else if(x(u)){for(L in u)if(m.call(u,L))if(V=u[L],M(V)&&(V=V.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&L.indexOf(this.stringify.convertAttKey)===0)O=this.attribute(L.substr(this.stringify.convertAttKey.length),V);else if(!this.options.separateArrayItems&&Array.isArray(V)&&C(V))O=this.dummy();else if(x(V)&&C(V))O=this.element(L);else if(!this.options.keepNullNodes&&V==null)O=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(V))for(I=0,B=V.length;I<B;I++)A=V[I],g={},g[L]=A,O=this.element(g);else x(V)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&L.indexOf(this.stringify.convertTextKey)===0?O=this.element(V):(O=this.element(L),O.element(V)):O=this.element(L,V)}else!this.options.keepNullNodes&&v===null?O=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&u.indexOf(this.stringify.convertTextKey)===0?O=this.text(v):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&u.indexOf(this.stringify.convertCDataKey)===0?O=this.cdata(v):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&u.indexOf(this.stringify.convertCommentKey)===0?O=this.comment(v):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&u.indexOf(this.stringify.convertRawKey)===0?O=this.raw(v):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&u.indexOf(this.stringify.convertPIKey)===0?O=this.instruction(u.substr(this.stringify.convertPIKey.length),v):O=this.node(u,P,v);if(O==null)throw new Error("Could not create any elements with: "+u+". "+this.debugInfo());return O},d.prototype.insertBefore=function(u,P,v){var g,A,b,I,L;if(u!=null&&u.type)return b=u,I=P,b.setParent(this),I?(A=children.indexOf(I),L=children.splice(A),children.push(b),Array.prototype.push.apply(children,L)):children.push(b),b;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(u));return A=this.parent.children.indexOf(this),L=this.parent.children.splice(A),g=this.parent.element(u,P,v),Array.prototype.push.apply(this.parent.children,L),g},d.prototype.insertAfter=function(u,P,v){var g,A,b;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(u));return A=this.parent.children.indexOf(this),b=this.parent.children.splice(A+1),g=this.parent.element(u,P,v),Array.prototype.push.apply(this.parent.children,b),g},d.prototype.remove=function(){var u,P;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return u=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[u,u-u+1].concat(P=[])),this.parent},d.prototype.node=function(u,P,v){var g,A;return u!=null&&(u=y(u)),P||(P={}),P=y(P),x(P)||(A=[P,v],v=A[0],P=A[1]),g=new a(this,u,P),v!=null&&g.text(v),this.children.push(g),g},d.prototype.text=function(u){var P;return x(u)&&this.element(u),P=new f(this,u),this.children.push(P),this},d.prototype.cdata=function(u){var P;return P=new t(this,u),this.children.push(P),this},d.prototype.comment=function(u){var P;return P=new r(this,u),this.children.push(P),this},d.prototype.commentBefore=function(u){var P,v,g;return v=this.parent.children.indexOf(this),g=this.parent.children.splice(v),P=this.parent.comment(u),Array.prototype.push.apply(this.parent.children,g),this},d.prototype.commentAfter=function(u){var P,v,g;return v=this.parent.children.indexOf(this),g=this.parent.children.splice(v+1),P=this.parent.comment(u),Array.prototype.push.apply(this.parent.children,g),this},d.prototype.raw=function(u){var P;return P=new w(this,u),this.children.push(P),this},d.prototype.dummy=function(){var u;return u=new n(this),u},d.prototype.instruction=function(u,P){var v,g,A,b,I;if(u!=null&&(u=y(u)),P!=null&&(P=y(P)),Array.isArray(u))for(b=0,I=u.length;b<I;b++)v=u[b],this.instruction(v);else if(x(u))for(v in u)m.call(u,v)&&(g=u[v],this.instruction(v,g));else M(P)&&(P=P.apply()),A=new S(this,u,P),this.children.push(A);return this},d.prototype.instructionBefore=function(u,P){var v,g,A;return g=this.parent.children.indexOf(this),A=this.parent.children.splice(g),v=this.parent.instruction(u,P),Array.prototype.push.apply(this.parent.children,A),this},d.prototype.instructionAfter=function(u,P){var v,g,A;return g=this.parent.children.indexOf(this),A=this.parent.children.splice(g+1),v=this.parent.instruction(u,P),Array.prototype.push.apply(this.parent.children,A),this},d.prototype.declaration=function(u,P,v){var g,A;return g=this.document(),A=new i(g,u,P,v),g.children.length===0?g.children.unshift(A):g.children[0].type===e.Declaration?g.children[0]=A:g.children.unshift(A),g.root()||g},d.prototype.dtd=function(u,P){var v,g,A,b,I,L,O,R,B,k;for(g=this.document(),A=new o(g,u,P),B=g.children,b=I=0,O=B.length;I<O;b=++I)if(v=B[b],v.type===e.DocType)return g.children[b]=A,A;for(k=g.children,b=L=0,R=k.length;L<R;b=++L)if(v=k[b],v.isRoot)return g.children.splice(b,0,A),A;return g.children.push(A),A},d.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},d.prototype.root=function(){var u;for(u=this;u;){if(u.type===e.Document)return u.rootObject;if(u.isRoot)return u;u=u.parent}},d.prototype.document=function(){var u;for(u=this;u;){if(u.type===e.Document)return u;u=u.parent}},d.prototype.end=function(u){return this.document().end(u)},d.prototype.prev=function(){var u;if(u=this.parent.children.indexOf(this),u<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[u-1]},d.prototype.next=function(){var u;if(u=this.parent.children.indexOf(this),u===-1||u===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[u+1]},d.prototype.importDocument=function(u){var P;return P=u.root().clone(),P.parent=this,P.isRoot=!1,this.children.push(P),this},d.prototype.debugInfo=function(u){var P,v;return u=u||this.name,u==null&&!((P=this.parent)!=null&&P.name)?"":u==null?"parent: <"+this.parent.name+">":(v=this.parent)!=null&&v.name?"node: <"+u+">, parent: <"+this.parent.name+">":"node: <"+u+">"},d.prototype.ele=function(u,P,v){return this.element(u,P,v)},d.prototype.nod=function(u,P,v){return this.node(u,P,v)},d.prototype.txt=function(u){return this.text(u)},d.prototype.dat=function(u){return this.cdata(u)},d.prototype.com=function(u){return this.comment(u)},d.prototype.ins=function(u,P){return this.instruction(u,P)},d.prototype.doc=function(){return this.document()},d.prototype.dec=function(u,P,v){return this.declaration(u,P,v)},d.prototype.e=function(u,P,v){return this.element(u,P,v)},d.prototype.n=function(u,P,v){return this.node(u,P,v)},d.prototype.t=function(u){return this.text(u)},d.prototype.d=function(u){return this.cdata(u)},d.prototype.c=function(u){return this.comment(u)},d.prototype.r=function(u){return this.raw(u)},d.prototype.i=function(u,P){return this.instruction(u,P)},d.prototype.u=function(){return this.up()},d.prototype.importXMLBuilder=function(u){return this.importDocument(u)},d.prototype.replaceChild=function(u,P){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.removeChild=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.appendChild=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.hasChildNodes=function(){return this.children.length!==0},d.prototype.cloneNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.isSupported=function(u,P){return!0},d.prototype.hasAttributes=function(){return this.attribs.length!==0},d.prototype.compareDocumentPosition=function(u){var P,v;return P=this,P===u?0:this.document()!==u.document()?(v=l.Disconnected|l.ImplementationSpecific,Math.random()<.5?v|=l.Preceding:v|=l.Following,v):P.isAncestor(u)?l.Contains|l.Preceding:P.isDescendant(u)?l.Contains|l.Following:P.isPreceding(u)?l.Preceding:l.Following},d.prototype.isSameNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.lookupPrefix=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.isDefaultNamespace=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.lookupNamespaceURI=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.isEqualNode=function(u){var P,v,g;if(u.nodeType!==this.nodeType||u.children.length!==this.children.length)return!1;for(P=v=0,g=this.children.length-1;0<=g?v<=g:v>=g;P=0<=g?++v:--v)if(!this.children[P].isEqualNode(u.children[P]))return!1;return!0},d.prototype.getFeature=function(u,P){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setUserData=function(u,P,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getUserData=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.contains=function(u){return u?u===this||this.isDescendant(u):!1},d.prototype.isDescendant=function(u){var P,v,g,A,b;for(b=this.children,g=0,A=b.length;g<A;g++)if(P=b[g],u===P||(v=P.isDescendant(u),v))return!0;return!1},d.prototype.isAncestor=function(u){return u.isDescendant(this)},d.prototype.isPreceding=function(u){var P,v;return P=this.treePosition(u),v=this.treePosition(this),P===-1||v===-1?!1:P<v},d.prototype.isFollowing=function(u){var P,v;return P=this.treePosition(u),v=this.treePosition(this),P===-1||v===-1?!1:P>v},d.prototype.treePosition=function(u){var P,v;return v=0,P=!1,this.foreachTreeNode(this.document(),function(g){if(v++,!P&&g===u)return P=!0}),P?v:-1},d.prototype.foreachTreeNode=function(u,P){var v,g,A,b,I;for(u||(u=this.document()),b=u.children,g=0,A=b.length;g<A;g++){if(v=b[g],I=P(v))return I;if(I=this.foreachTreeNode(v,P),I)return I}},d}()}).call(ui)});var kt=q((di,pi)=>{(function(){var l,e=function(r,i){return function(){return r.apply(i,arguments)}},t={}.hasOwnProperty;pi.exports=l=function(){function r(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,n,a;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),n=i.stringify||{};for(o in n)t.call(n,o)&&(a=n[o],this[o]=a)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var o,n;if(this.options.noValidation)return i;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=i.match(o))throw new Error("Invalid character in string: "+i+" at index "+n.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=i.match(o)))throw new Error("Invalid character in string: "+i+" at index "+n.index);return i},r.prototype.assertLegalName=function(i){var o;if(this.options.noValidation)return i;if(this.assertLegalChar(i),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(o))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(di)});var We=q((hi,fi)=>{(function(){fi.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(hi)});var qt=q((gi,mi)=>{(function(){var l,e,t,r,i,o,n,a,p,E,T,S,w,f,y,C,M,x={}.hasOwnProperty;M=oe().assign,l=X(),p=ut(),E=ft(),t=at(),r=ct(),S=nt(),f=gt(),y=mt(),w=yt(),T=Ot(),i=lt(),o=pt(),n=dt(),a=ht(),e=We(),mi.exports=C=function(){function F(m){var d,u,P;m||(m={}),this.options=m,u=m.writer||{};for(d in u)x.call(u,d)&&(P=u[d],this["_"+d]=this[d],this[d]=P)}return F.prototype.filterOptions=function(m){var d,u,P,v,g,A,b,I;return m||(m={}),m=M({},this.options,m),d={writer:this},d.pretty=m.pretty||!1,d.allowEmpty=m.allowEmpty||!1,d.indent=(u=m.indent)!=null?u:"  ",d.newline=(P=m.newline)!=null?P:`
`,d.offset=(v=m.offset)!=null?v:0,d.dontPrettyTextNodes=(g=(A=m.dontPrettyTextNodes)!=null?A:m.dontprettytextnodes)!=null?g:0,d.spaceBeforeSlash=(b=(I=m.spaceBeforeSlash)!=null?I:m.spacebeforeslash)!=null?b:"",d.spaceBeforeSlash===!0&&(d.spaceBeforeSlash=" "),d.suppressPrettyCount=0,d.user={},d.state=e.None,d},F.prototype.indent=function(m,d,u){var P;return!d.pretty||d.suppressPrettyCount?"":d.pretty&&(P=(u||0)+d.offset+1,P>0)?new Array(P).join(d.indent):""},F.prototype.endline=function(m,d,u){return!d.pretty||d.suppressPrettyCount?"":d.newline},F.prototype.attribute=function(m,d,u){var P;return this.openAttribute(m,d,u),P=" "+m.name+'="'+m.value+'"',this.closeAttribute(m,d,u),P},F.prototype.cdata=function(m,d,u){var P;return this.openNode(m,d,u),d.state=e.OpenTag,P=this.indent(m,d,u)+"<![CDATA[",d.state=e.InsideTag,P+=m.value,d.state=e.CloseTag,P+="]]>"+this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),P},F.prototype.comment=function(m,d,u){var P;return this.openNode(m,d,u),d.state=e.OpenTag,P=this.indent(m,d,u)+"<!-- ",d.state=e.InsideTag,P+=m.value,d.state=e.CloseTag,P+=" -->"+this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),P},F.prototype.declaration=function(m,d,u){var P;return this.openNode(m,d,u),d.state=e.OpenTag,P=this.indent(m,d,u)+"<?xml",d.state=e.InsideTag,P+=' version="'+m.version+'"',m.encoding!=null&&(P+=' encoding="'+m.encoding+'"'),m.standalone!=null&&(P+=' standalone="'+m.standalone+'"'),d.state=e.CloseTag,P+=d.spaceBeforeSlash+"?>",P+=this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),P},F.prototype.docType=function(m,d,u){var P,v,g,A,b;if(u||(u=0),this.openNode(m,d,u),d.state=e.OpenTag,A=this.indent(m,d,u),A+="<!DOCTYPE "+m.root().name,m.pubID&&m.sysID?A+=' PUBLIC "'+m.pubID+'" "'+m.sysID+'"':m.sysID&&(A+=' SYSTEM "'+m.sysID+'"'),m.children.length>0){for(A+=" [",A+=this.endline(m,d,u),d.state=e.InsideTag,b=m.children,v=0,g=b.length;v<g;v++)P=b[v],A+=this.writeChildNode(P,d,u+1);d.state=e.CloseTag,A+="]"}return d.state=e.CloseTag,A+=d.spaceBeforeSlash+">",A+=this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),A},F.prototype.element=function(m,d,u){var P,v,g,A,b,I,L,O,R,B,k,H,V,ye;u||(u=0),B=!1,k="",this.openNode(m,d,u),d.state=e.OpenTag,k+=this.indent(m,d,u)+"<"+m.name,H=m.attribs;for(R in H)x.call(H,R)&&(P=H[R],k+=this.attribute(P,d,u));if(g=m.children.length,A=g===0?null:m.children[0],g===0||m.children.every(function(re){return(re.type===l.Text||re.type===l.Raw)&&re.value===""}))d.allowEmpty?(k+=">",d.state=e.CloseTag,k+="</"+m.name+">"+this.endline(m,d,u)):(d.state=e.CloseTag,k+=d.spaceBeforeSlash+"/>"+this.endline(m,d,u));else if(d.pretty&&g===1&&(A.type===l.Text||A.type===l.Raw)&&A.value!=null)k+=">",d.state=e.InsideTag,d.suppressPrettyCount++,B=!0,k+=this.writeChildNode(A,d,u+1),d.suppressPrettyCount--,B=!1,d.state=e.CloseTag,k+="</"+m.name+">"+this.endline(m,d,u);else{if(d.dontPrettyTextNodes){for(V=m.children,b=0,L=V.length;b<L;b++)if(v=V[b],(v.type===l.Text||v.type===l.Raw)&&v.value!=null){d.suppressPrettyCount++,B=!0;break}}for(k+=">"+this.endline(m,d,u),d.state=e.InsideTag,ye=m.children,I=0,O=ye.length;I<O;I++)v=ye[I],k+=this.writeChildNode(v,d,u+1);d.state=e.CloseTag,k+=this.indent(m,d,u)+"</"+m.name+">",B&&d.suppressPrettyCount--,k+=this.endline(m,d,u),d.state=e.None}return this.closeNode(m,d,u),k},F.prototype.writeChildNode=function(m,d,u){switch(m.type){case l.CData:return this.cdata(m,d,u);case l.Comment:return this.comment(m,d,u);case l.Element:return this.element(m,d,u);case l.Raw:return this.raw(m,d,u);case l.Text:return this.text(m,d,u);case l.ProcessingInstruction:return this.processingInstruction(m,d,u);case l.Dummy:return"";case l.Declaration:return this.declaration(m,d,u);case l.DocType:return this.docType(m,d,u);case l.AttributeDeclaration:return this.dtdAttList(m,d,u);case l.ElementDeclaration:return this.dtdElement(m,d,u);case l.EntityDeclaration:return this.dtdEntity(m,d,u);case l.NotationDeclaration:return this.dtdNotation(m,d,u);default:throw new Error("Unknown XML node type: "+m.constructor.name)}},F.prototype.processingInstruction=function(m,d,u){var P;return this.openNode(m,d,u),d.state=e.OpenTag,P=this.indent(m,d,u)+"<?",d.state=e.InsideTag,P+=m.target,m.value&&(P+=" "+m.value),d.state=e.CloseTag,P+=d.spaceBeforeSlash+"?>",P+=this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),P},F.prototype.raw=function(m,d,u){var P;return this.openNode(m,d,u),d.state=e.OpenTag,P=this.indent(m,d,u),d.state=e.InsideTag,P+=m.value,d.state=e.CloseTag,P+=this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),P},F.prototype.text=function(m,d,u){var P;return this.openNode(m,d,u),d.state=e.OpenTag,P=this.indent(m,d,u),d.state=e.InsideTag,P+=m.value,d.state=e.CloseTag,P+=this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),P},F.prototype.dtdAttList=function(m,d,u){var P;return this.openNode(m,d,u),d.state=e.OpenTag,P=this.indent(m,d,u)+"<!ATTLIST",d.state=e.InsideTag,P+=" "+m.elementName+" "+m.attributeName+" "+m.attributeType,m.defaultValueType!=="#DEFAULT"&&(P+=" "+m.defaultValueType),m.defaultValue&&(P+=' "'+m.defaultValue+'"'),d.state=e.CloseTag,P+=d.spaceBeforeSlash+">"+this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),P},F.prototype.dtdElement=function(m,d,u){var P;return this.openNode(m,d,u),d.state=e.OpenTag,P=this.indent(m,d,u)+"<!ELEMENT",d.state=e.InsideTag,P+=" "+m.name+" "+m.value,d.state=e.CloseTag,P+=d.spaceBeforeSlash+">"+this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),P},F.prototype.dtdEntity=function(m,d,u){var P;return this.openNode(m,d,u),d.state=e.OpenTag,P=this.indent(m,d,u)+"<!ENTITY",d.state=e.InsideTag,m.pe&&(P+=" %"),P+=" "+m.name,m.value?P+=' "'+m.value+'"':(m.pubID&&m.sysID?P+=' PUBLIC "'+m.pubID+'" "'+m.sysID+'"':m.sysID&&(P+=' SYSTEM "'+m.sysID+'"'),m.nData&&(P+=" NDATA "+m.nData)),d.state=e.CloseTag,P+=d.spaceBeforeSlash+">"+this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),P},F.prototype.dtdNotation=function(m,d,u){var P;return this.openNode(m,d,u),d.state=e.OpenTag,P=this.indent(m,d,u)+"<!NOTATION",d.state=e.InsideTag,P+=" "+m.name,m.pubID&&m.sysID?P+=' PUBLIC "'+m.pubID+'" "'+m.sysID+'"':m.pubID?P+=' PUBLIC "'+m.pubID+'"':m.sysID&&(P+=' SYSTEM "'+m.sysID+'"'),d.state=e.CloseTag,P+=d.spaceBeforeSlash+">"+this.endline(m,d,u),d.state=e.None,this.closeNode(m,d,u),P},F.prototype.openNode=function(m,d,u){},F.prototype.closeNode=function(m,d,u){},F.prototype.openAttribute=function(m,d,u){},F.prototype.closeAttribute=function(m,d,u){},F}()}).call(gi)});var Pt=q((yi,Pi)=>{(function(){var l,e,t=function(i,o){for(var n in o)r.call(o,n)&&(i[n]=o[n]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=qt(),Pi.exports=l=function(i){t(o,i);function o(n){o.__super__.constructor.call(this,n)}return o.prototype.document=function(n,a){var p,E,T,S,w;for(a=this.filterOptions(a),S="",w=n.children,E=0,T=w.length;E<T;E++)p=w[E],S+=this.writeChildNode(p,a,0);return a.pretty&&S.slice(-a.newline.length)===a.newline&&(S=S.slice(0,-a.newline.length)),S},o}(e)}).call(yi)});var Rt=q((Ei,wi)=>{(function(){var l,e,t,r,i,o,n,a,p=function(T,S){for(var w in S)E.call(S,w)&&(T[w]=S[w]);function f(){this.constructor=T}return f.prototype=S.prototype,T.prototype=new f,T.__super__=S.prototype,T},E={}.hasOwnProperty;a=oe().isPlainObject,t=Lt(),e=Sr(),i=ee(),l=X(),n=kt(),o=Pt(),wi.exports=r=function(T){p(S,T);function S(w){S.__super__.constructor.call(this,null),this.name="#document",this.type=l.Document,this.documentURI=null,this.domConfig=new e,w||(w={}),w.writer||(w.writer=new o),this.options=w,this.stringify=new n(w)}return Object.defineProperty(S.prototype,"implementation",{value:new t}),Object.defineProperty(S.prototype,"doctype",{get:function(){var w,f,y,C;for(C=this.children,f=0,y=C.length;f<y;f++)if(w=C[f],w.type===l.DocType)return w;return null}}),Object.defineProperty(S.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(S.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(S.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(S.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===l.Declaration?this.children[0].encoding:null}}),Object.defineProperty(S.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===l.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(S.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===l.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(S.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(S.prototype,"origin",{get:function(){return null}}),Object.defineProperty(S.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(S.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(S.prototype,"contentType",{get:function(){return null}}),S.prototype.end=function(w){var f;return f={},w?a(w)&&(f=w,w=this.options.writer):w=this.options.writer,w.document(this,w.filterOptions(f))},S.prototype.toString=function(w){return this.options.writer.document(this,this.options.writer.filterOptions(w))},S.prototype.createElement=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createTextNode=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createComment=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createCDATASection=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createProcessingInstruction=function(w,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createAttribute=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createEntityReference=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.getElementsByTagName=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.importNode=function(w,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createElementNS=function(w,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createAttributeNS=function(w,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.getElementsByTagNameNS=function(w,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.getElementById=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.adoptNode=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.renameNode=function(w,f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.getElementsByClassName=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createEvent=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createNodeIterator=function(w,f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.createTreeWalker=function(w,f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},S}(i)}).call(Ei)});var vi=q((bi,Si)=>{(function(){var l,e,t,r,i,o,n,a,p,E,T,S,w,f,y,C,M,x,F,m,d,u,P,v,g={}.hasOwnProperty;v=oe(),u=v.isObject,d=v.isFunction,P=v.isPlainObject,m=v.getValue,l=X(),S=Rt(),f=nt(),r=at(),i=ct(),C=gt(),F=mt(),y=yt(),E=ut(),T=ft(),o=lt(),a=dt(),n=pt(),p=ht(),t=Ft(),x=kt(),M=Pt(),e=We(),Si.exports=w=function(){function A(b,I,L){var O;this.name="?xml",this.type=l.Document,b||(b={}),O={},b.writer?P(b.writer)&&(O=b.writer,b.writer=new M):b.writer=new M,this.options=b,this.writer=b.writer,this.writerOptions=this.writer.filterOptions(O),this.stringify=new x(b),this.onDataCallback=I||function(){},this.onEndCallback=L||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return A.prototype.createChildNode=function(b){var I,L,O,R,B,k,H,V;switch(b.type){case l.CData:this.cdata(b.value);break;case l.Comment:this.comment(b.value);break;case l.Element:O={},H=b.attribs;for(L in H)g.call(H,L)&&(I=H[L],O[L]=I.value);this.node(b.name,O);break;case l.Dummy:this.dummy();break;case l.Raw:this.raw(b.value);break;case l.Text:this.text(b.value);break;case l.ProcessingInstruction:this.instruction(b.target,b.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+b.constructor.name)}for(V=b.children,B=0,k=V.length;B<k;B++)R=V[B],this.createChildNode(R),R.type===l.Element&&this.up();return this},A.prototype.dummy=function(){return this},A.prototype.node=function(b,I,L){var O;if(b==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(b));return this.openCurrent(),b=m(b),I==null&&(I={}),I=m(I),u(I)||(O=[I,L],L=O[0],I=O[1]),this.currentNode=new f(this,b,I),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,L!=null&&this.text(L),this},A.prototype.element=function(b,I,L){var O,R,B,k,H,V;if(this.currentNode&&this.currentNode.type===l.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(b)||u(b)||d(b))for(k=this.options.noValidation,this.options.noValidation=!0,V=new S(this.options).element("TEMP_ROOT"),V.element(b),this.options.noValidation=k,H=V.children,R=0,B=H.length;R<B;R++)O=H[R],this.createChildNode(O),O.type===l.Element&&this.up();else this.node(b,I,L);return this},A.prototype.attribute=function(b,I){var L,O;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(b));if(b!=null&&(b=m(b)),u(b))for(L in b)g.call(b,L)&&(O=b[L],this.attribute(L,O));else d(I)&&(I=I.apply()),this.options.keepNullAttributes&&I==null?this.currentNode.attribs[b]=new t(this,b,""):I!=null&&(this.currentNode.attribs[b]=new t(this,b,I));return this},A.prototype.text=function(b){var I;return this.openCurrent(),I=new F(this,b),this.onData(this.writer.text(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.cdata=function(b){var I;return this.openCurrent(),I=new r(this,b),this.onData(this.writer.cdata(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.comment=function(b){var I;return this.openCurrent(),I=new i(this,b),this.onData(this.writer.comment(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.raw=function(b){var I;return this.openCurrent(),I=new C(this,b),this.onData(this.writer.raw(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.instruction=function(b,I){var L,O,R,B,k;if(this.openCurrent(),b!=null&&(b=m(b)),I!=null&&(I=m(I)),Array.isArray(b))for(L=0,B=b.length;L<B;L++)O=b[L],this.instruction(O);else if(u(b))for(O in b)g.call(b,O)&&(R=b[O],this.instruction(O,R));else d(I)&&(I=I.apply()),k=new y(this,b,I),this.onData(this.writer.processingInstruction(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},A.prototype.declaration=function(b,I,L){var O;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return O=new E(this,b,I,L),this.onData(this.writer.declaration(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.doctype=function(b,I,L){if(this.openCurrent(),b==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new T(this,I,L),this.currentNode.rootNodeName=b,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},A.prototype.dtdElement=function(b,I){var L;return this.openCurrent(),L=new n(this,b,I),this.onData(this.writer.dtdElement(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.attList=function(b,I,L,O,R){var B;return this.openCurrent(),B=new o(this,b,I,L,O,R),this.onData(this.writer.dtdAttList(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.entity=function(b,I){var L;return this.openCurrent(),L=new a(this,!1,b,I),this.onData(this.writer.dtdEntity(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.pEntity=function(b,I){var L;return this.openCurrent(),L=new a(this,!0,b,I),this.onData(this.writer.dtdEntity(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.notation=function(b,I){var L;return this.openCurrent(),L=new p(this,b,I),this.onData(this.writer.dtdNotation(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},A.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},A.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},A.prototype.openNode=function(b){var I,L,O,R;if(!b.isOpen){if(!this.root&&this.currentLevel===0&&b.type===l.Element&&(this.root=b),L="",b.type===l.Element){this.writerOptions.state=e.OpenTag,L=this.writer.indent(b,this.writerOptions,this.currentLevel)+"<"+b.name,R=b.attribs;for(O in R)g.call(R,O)&&(I=R[O],L+=this.writer.attribute(I,this.writerOptions,this.currentLevel));L+=(b.children?">":"/>")+this.writer.endline(b,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,L=this.writer.indent(b,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+b.rootNodeName,b.pubID&&b.sysID?L+=' PUBLIC "'+b.pubID+'" "'+b.sysID+'"':b.sysID&&(L+=' SYSTEM "'+b.sysID+'"'),b.children?(L+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,L+=">"),L+=this.writer.endline(b,this.writerOptions,this.currentLevel);return this.onData(L,this.currentLevel),b.isOpen=!0}},A.prototype.closeNode=function(b){var I;if(!b.isClosed)return I="",this.writerOptions.state=e.CloseTag,b.type===l.Element?I=this.writer.indent(b,this.writerOptions,this.currentLevel)+"</"+b.name+">"+this.writer.endline(b,this.writerOptions,this.currentLevel):I=this.writer.indent(b,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(b,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(I,this.currentLevel),b.isClosed=!0},A.prototype.onData=function(b,I){return this.documentStarted=!0,this.onDataCallback(b,I+1)},A.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},A.prototype.debugInfo=function(b){return b==null?"":"node: <"+b+">"},A.prototype.ele=function(){return this.element.apply(this,arguments)},A.prototype.nod=function(b,I,L){return this.node(b,I,L)},A.prototype.txt=function(b){return this.text(b)},A.prototype.dat=function(b){return this.cdata(b)},A.prototype.com=function(b){return this.comment(b)},A.prototype.ins=function(b,I){return this.instruction(b,I)},A.prototype.dec=function(b,I,L){return this.declaration(b,I,L)},A.prototype.dtd=function(b,I,L){return this.doctype(b,I,L)},A.prototype.e=function(b,I,L){return this.element(b,I,L)},A.prototype.n=function(b,I,L){return this.node(b,I,L)},A.prototype.t=function(b){return this.text(b)},A.prototype.d=function(b){return this.cdata(b)},A.prototype.c=function(b){return this.comment(b)},A.prototype.r=function(b){return this.raw(b)},A.prototype.i=function(b,I){return this.instruction(b,I)},A.prototype.att=function(){return this.currentNode&&this.currentNode.type===l.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},A.prototype.a=function(){return this.currentNode&&this.currentNode.type===l.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},A.prototype.ent=function(b,I){return this.entity(b,I)},A.prototype.pent=function(b,I){return this.pEntity(b,I)},A.prototype.not=function(b,I){return this.notation(b,I)},A}()}).call(bi)});var xi=q((Ti,Di)=>{(function(){var l,e,t,r,i=function(n,a){for(var p in a)o.call(a,p)&&(n[p]=a[p]);function E(){this.constructor=n}return E.prototype=a.prototype,n.prototype=new E,n.__super__=a.prototype,n},o={}.hasOwnProperty;l=X(),r=qt(),e=We(),Di.exports=t=function(n){i(a,n);function a(p,E){this.stream=p,a.__super__.constructor.call(this,E)}return a.prototype.endline=function(p,E,T){return p.isLastRootNode&&E.state===e.CloseTag?"":a.__super__.endline.call(this,p,E,T)},a.prototype.document=function(p,E){var T,S,w,f,y,C,M,x,F;for(M=p.children,S=w=0,y=M.length;w<y;S=++w)T=M[S],T.isLastRootNode=S===p.children.length-1;for(E=this.filterOptions(E),x=p.children,F=[],f=0,C=x.length;f<C;f++)T=x[f],F.push(this.writeChildNode(T,E,0));return F},a.prototype.attribute=function(p,E,T){return this.stream.write(a.__super__.attribute.call(this,p,E,T))},a.prototype.cdata=function(p,E,T){return this.stream.write(a.__super__.cdata.call(this,p,E,T))},a.prototype.comment=function(p,E,T){return this.stream.write(a.__super__.comment.call(this,p,E,T))},a.prototype.declaration=function(p,E,T){return this.stream.write(a.__super__.declaration.call(this,p,E,T))},a.prototype.docType=function(p,E,T){var S,w,f,y;if(T||(T=0),this.openNode(p,E,T),E.state=e.OpenTag,this.stream.write(this.indent(p,E,T)),this.stream.write("<!DOCTYPE "+p.root().name),p.pubID&&p.sysID?this.stream.write(' PUBLIC "'+p.pubID+'" "'+p.sysID+'"'):p.sysID&&this.stream.write(' SYSTEM "'+p.sysID+'"'),p.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(p,E,T)),E.state=e.InsideTag,y=p.children,w=0,f=y.length;w<f;w++)S=y[w],this.writeChildNode(S,E,T+1);E.state=e.CloseTag,this.stream.write("]")}return E.state=e.CloseTag,this.stream.write(E.spaceBeforeSlash+">"),this.stream.write(this.endline(p,E,T)),E.state=e.None,this.closeNode(p,E,T)},a.prototype.element=function(p,E,T){var S,w,f,y,C,M,x,F,m,d;T||(T=0),this.openNode(p,E,T),E.state=e.OpenTag,this.stream.write(this.indent(p,E,T)+"<"+p.name),m=p.attribs;for(x in m)o.call(m,x)&&(S=m[x],this.attribute(S,E,T));if(f=p.children.length,y=f===0?null:p.children[0],f===0||p.children.every(function(u){return(u.type===l.Text||u.type===l.Raw)&&u.value===""}))E.allowEmpty?(this.stream.write(">"),E.state=e.CloseTag,this.stream.write("</"+p.name+">")):(E.state=e.CloseTag,this.stream.write(E.spaceBeforeSlash+"/>"));else if(E.pretty&&f===1&&(y.type===l.Text||y.type===l.Raw)&&y.value!=null)this.stream.write(">"),E.state=e.InsideTag,E.suppressPrettyCount++,F=!0,this.writeChildNode(y,E,T+1),E.suppressPrettyCount--,F=!1,E.state=e.CloseTag,this.stream.write("</"+p.name+">");else{for(this.stream.write(">"+this.endline(p,E,T)),E.state=e.InsideTag,d=p.children,C=0,M=d.length;C<M;C++)w=d[C],this.writeChildNode(w,E,T+1);E.state=e.CloseTag,this.stream.write(this.indent(p,E,T)+"</"+p.name+">")}return this.stream.write(this.endline(p,E,T)),E.state=e.None,this.closeNode(p,E,T)},a.prototype.processingInstruction=function(p,E,T){return this.stream.write(a.__super__.processingInstruction.call(this,p,E,T))},a.prototype.raw=function(p,E,T){return this.stream.write(a.__super__.raw.call(this,p,E,T))},a.prototype.text=function(p,E,T){return this.stream.write(a.__super__.text.call(this,p,E,T))},a.prototype.dtdAttList=function(p,E,T){return this.stream.write(a.__super__.dtdAttList.call(this,p,E,T))},a.prototype.dtdElement=function(p,E,T){return this.stream.write(a.__super__.dtdElement.call(this,p,E,T))},a.prototype.dtdEntity=function(p,E,T){return this.stream.write(a.__super__.dtdEntity.call(this,p,E,T))},a.prototype.dtdNotation=function(p,E,T){return this.stream.write(a.__super__.dtdNotation.call(this,p,E,T))},a}(r)}).call(Ti)});var Ci=q((Ii,ge)=>{(function(){var l,e,t,r,i,o,n,a,p,E;E=oe(),a=E.assign,p=E.isFunction,t=Lt(),r=Rt(),i=vi(),n=Pt(),o=xi(),l=X(),e=We(),ge.exports.create=function(T,S,w,f){var y,C;if(T==null)throw new Error("Root element needs a name.");return f=a({},S,w,f),y=new r(f),C=y.element(T),f.headless||(y.declaration(f),(f.pubID!=null||f.sysID!=null)&&y.dtd(f)),C},ge.exports.begin=function(T,S,w){var f;return p(T)&&(f=[T,S],S=f[0],w=f[1],T={}),S?new i(T,S,w):new r(T)},ge.exports.stringWriter=function(T){return new n(T)},ge.exports.streamWriter=function(T,S){return new o(T,S)},ge.exports.implementation=new t,ge.exports.nodeType=l,ge.exports.writerState=e}).call(Ii)});var Ai=q(_t=>{(function(){"use strict";var l,e,t,r,i,o={}.hasOwnProperty;l=Ci(),e=st().defaults,r=function(n){return typeof n=="string"&&(n.indexOf("&")>=0||n.indexOf(">")>=0||n.indexOf("<")>=0)},i=function(n){return"<![CDATA["+t(n)+"]]>"},t=function(n){return n.replace("]]>","]]]]><![CDATA[>")},_t.Builder=function(){function n(a){var p,E,T;this.options={},E=e["0.2"];for(p in E)o.call(E,p)&&(T=E[p],this.options[p]=T);for(p in a)o.call(a,p)&&(T=a[p],this.options[p]=T)}return n.prototype.buildObject=function(a){var p,E,T,S,w;return p=this.options.attrkey,E=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(w=Object.keys(a)[0],a=a[w]):w=this.options.rootName,T=function(f){return function(y,C){var M,x,F,m,d,u;if(typeof C!="object")f.options.cdata&&r(C)?y.raw(i(C)):y.txt(C);else if(Array.isArray(C)){for(m in C)if(o.call(C,m)){x=C[m];for(d in x)F=x[d],y=T(y.ele(d),F).up()}}else for(d in C)if(o.call(C,d))if(x=C[d],d===p){if(typeof x=="object")for(M in x)u=x[M],y=y.att(M,u)}else if(d===E)f.options.cdata&&r(x)?y=y.raw(i(x)):y=y.txt(x);else if(Array.isArray(x))for(m in x)o.call(x,m)&&(F=x[m],typeof F=="string"?f.options.cdata&&r(F)?y=y.ele(d).raw(i(F)).up():y=y.ele(d,F).up():y=T(y.ele(d),F).up());else typeof x=="object"?y=T(y.ele(d),x).up():typeof x=="string"&&f.options.cdata&&r(x)?y=y.ele(d).raw(i(x)).up():(x==null&&(x=""),y=y.ele(d,x.toString()).up());return y}}(this),S=l.create(w,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),T(S,a).end(this.options.renderOpts)},n}()}).call(_t)});var Ni=q(Et=>{(function(l){l.parser=function(h,c){return new t(h,c)},l.SAXParser=t,l.SAXStream=E,l.createStream=p,l.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];l.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(h,c){if(!(this instanceof t))return new t(h,c);var N=this;i(N),N.q=N.c="",N.bufferCheckPosition=l.MAX_BUFFER_LENGTH,N.opt=c||{},N.opt.lowercase=N.opt.lowercase||N.opt.lowercasetags,N.looseCase=N.opt.lowercase?"toLowerCase":"toUpperCase",N.tags=[],N.closed=N.closedRoot=N.sawRoot=!1,N.tag=N.error=null,N.strict=!!h,N.noscript=!!(h||N.opt.noscript),N.state=g.BEGIN,N.strictEntities=N.opt.strictEntities,N.ENTITIES=N.strictEntities?Object.create(l.XML_ENTITIES):Object.create(l.ENTITIES),N.attribList=[],N.opt.xmlns&&(N.ns=Object.create(y)),N.opt.unquotedAttributeValues===void 0&&(N.opt.unquotedAttributeValues=!h),N.trackPosition=N.opt.position!==!1,N.trackPosition&&(N.position=N.line=N.column=0),b(N,"onready")}Object.create||(Object.create=function(h){function c(){}c.prototype=h;var N=new c;return N}),Object.keys||(Object.keys=function(h){var c=[];for(var N in h)h.hasOwnProperty(N)&&c.push(N);return c});function r(h){for(var c=Math.max(l.MAX_BUFFER_LENGTH,10),N=0,D=0,j=e.length;D<j;D++){var $=h[e[D]].length;if($>c)switch(e[D]){case"textNode":L(h);break;case"cdata":I(h,"oncdata",h.cdata),h.cdata="";break;case"script":I(h,"onscript",h.script),h.script="";break;default:R(h,"Max buffer length exceeded: "+e[D])}N=Math.max(N,$)}var W=l.MAX_BUFFER_LENGTH-N;h.bufferCheckPosition=W+h.position}function i(h){for(var c=0,N=e.length;c<N;c++)h[e[c]]=""}function o(h){L(h),h.cdata!==""&&(I(h,"oncdata",h.cdata),h.cdata=""),h.script!==""&&(I(h,"onscript",h.script),h.script="")}t.prototype={end:function(){B(this)},write:ls,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var n;try{n=require("stream").Stream}catch(h){n=function(){}}n||(n=function(){});var a=l.EVENTS.filter(function(h){return h!=="error"&&h!=="end"});function p(h,c){return new E(h,c)}function E(h,c){if(!(this instanceof E))return new E(h,c);n.apply(this),this._parser=new t(h,c),this.writable=!0,this.readable=!0;var N=this;this._parser.onend=function(){N.emit("end")},this._parser.onerror=function(D){N.emit("error",D),N._parser.error=null},this._decoder=null,a.forEach(function(D){Object.defineProperty(N,"on"+D,{get:function(){return N._parser["on"+D]},set:function(j){if(!j)return N.removeAllListeners(D),N._parser["on"+D]=j,j;N.on(D,j)},enumerable:!0,configurable:!1})})}E.prototype=Object.create(n.prototype,{constructor:{value:E}}),E.prototype.write=function(h){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(h)){if(!this._decoder){var c=require("string_decoder").StringDecoder;this._decoder=new c("utf8")}h=this._decoder.write(h)}return this._parser.write(h.toString()),this.emit("data",h),!0},E.prototype.end=function(h){return h&&h.length&&this.write(h),this._parser.end(),!0},E.prototype.on=function(h,c){var N=this;return!N._parser["on"+h]&&a.indexOf(h)!==-1&&(N._parser["on"+h]=function(){var D=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);D.splice(0,0,h),N.emit.apply(N,D)}),n.prototype.on.call(N,h,c)};var T="[CDATA[",S="DOCTYPE",w="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",y={xml:w,xmlns:f},C=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,M=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function m(h){return h===" "||h===`
`||h==="\r"||h==="	"}function d(h){return h==='"'||h==="'"}function u(h){return h===">"||m(h)}function P(h,c){return h.test(c)}function v(h,c){return!P(h,c)}var g=0;l.STATE={BEGIN:g++,BEGIN_WHITESPACE:g++,TEXT:g++,TEXT_ENTITY:g++,OPEN_WAKA:g++,SGML_DECL:g++,SGML_DECL_QUOTED:g++,DOCTYPE:g++,DOCTYPE_QUOTED:g++,DOCTYPE_DTD:g++,DOCTYPE_DTD_QUOTED:g++,COMMENT_STARTING:g++,COMMENT:g++,COMMENT_ENDING:g++,COMMENT_ENDED:g++,CDATA:g++,CDATA_ENDING:g++,CDATA_ENDING_2:g++,PROC_INST:g++,PROC_INST_BODY:g++,PROC_INST_ENDING:g++,OPEN_TAG:g++,OPEN_TAG_SLASH:g++,ATTRIB:g++,ATTRIB_NAME:g++,ATTRIB_NAME_SAW_WHITE:g++,ATTRIB_VALUE:g++,ATTRIB_VALUE_QUOTED:g++,ATTRIB_VALUE_CLOSED:g++,ATTRIB_VALUE_UNQUOTED:g++,ATTRIB_VALUE_ENTITY_Q:g++,ATTRIB_VALUE_ENTITY_U:g++,CLOSE_TAG:g++,CLOSE_TAG_SAW_WHITE:g++,SCRIPT:g++,SCRIPT_ENDING:g++},l.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},l.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(l.ENTITIES).forEach(function(h){var c=l.ENTITIES[h],N=typeof c=="number"?String.fromCharCode(c):c;l.ENTITIES[h]=N});for(var A in l.STATE)l.STATE[l.STATE[A]]=A;g=l.STATE;function b(h,c,N){h[c]&&h[c](N)}function I(h,c,N){h.textNode&&L(h),b(h,c,N)}function L(h){h.textNode=O(h.opt,h.textNode),h.textNode&&b(h,"ontext",h.textNode),h.textNode=""}function O(h,c){return h.trim&&(c=c.trim()),h.normalize&&(c=c.replace(/\s+/g," ")),c}function R(h,c){return L(h),h.trackPosition&&(c+=`
Line: `+h.line+`
Column: `+h.column+`
Char: `+h.c),c=new Error(c),h.error=c,b(h,"onerror",c),h}function B(h){return h.sawRoot&&!h.closedRoot&&k(h,"Unclosed root tag"),h.state!==g.BEGIN&&h.state!==g.BEGIN_WHITESPACE&&h.state!==g.TEXT&&R(h,"Unexpected end"),L(h),h.c="",h.closed=!0,b(h,"onend"),t.call(h,h.strict,h.opt),h}function k(h,c){if(typeof h!="object"||!(h instanceof t))throw new Error("bad call to strictFail");h.strict&&R(h,c)}function H(h){h.strict||(h.tagName=h.tagName[h.looseCase]());var c=h.tags[h.tags.length-1]||h,N=h.tag={name:h.tagName,attributes:{}};h.opt.xmlns&&(N.ns=c.ns),h.attribList.length=0,I(h,"onopentagstart",N)}function V(h,c){var N=h.indexOf(":"),D=N<0?["",h]:h.split(":"),j=D[0],$=D[1];return c&&h==="xmlns"&&(j="xmlns",$=""),{prefix:j,local:$}}function ye(h){if(h.strict||(h.attribName=h.attribName[h.looseCase]()),h.attribList.indexOf(h.attribName)!==-1||h.tag.attributes.hasOwnProperty(h.attribName)){h.attribName=h.attribValue="";return}if(h.opt.xmlns){var c=V(h.attribName,!0),N=c.prefix,D=c.local;if(N==="xmlns")if(D==="xml"&&h.attribValue!==w)k(h,"xml: prefix must be bound to "+w+`
Actual: `+h.attribValue);else if(D==="xmlns"&&h.attribValue!==f)k(h,"xmlns: prefix must be bound to "+f+`
Actual: `+h.attribValue);else{var j=h.tag,$=h.tags[h.tags.length-1]||h;j.ns===$.ns&&(j.ns=Object.create($.ns)),j.ns[D]=h.attribValue}h.attribList.push([h.attribName,h.attribValue])}else h.tag.attributes[h.attribName]=h.attribValue,I(h,"onattribute",{name:h.attribName,value:h.attribValue});h.attribName=h.attribValue=""}function re(h,c){if(h.opt.xmlns){var N=h.tag,D=V(h.tagName);N.prefix=D.prefix,N.local=D.local,N.uri=N.ns[D.prefix]||"",N.prefix&&!N.uri&&(k(h,"Unbound namespace prefix: "+JSON.stringify(h.tagName)),N.uri=D.prefix);var j=h.tags[h.tags.length-1]||h;N.ns&&j.ns!==N.ns&&Object.keys(N.ns).forEach(function(Jt){I(h,"onopennamespace",{prefix:Jt,uri:N.ns[Jt]})});for(var $=0,W=h.attribList.length;$<W;$++){var K=h.attribList[$],J=K[0],Te=K[1],G=V(J,!0),ae=G.prefix,ds=G.local,Kt=ae===""?"":N.ns[ae]||"",Ct={name:J,value:Te,prefix:ae,local:ds,uri:Kt};ae&&ae!=="xmlns"&&!Kt&&(k(h,"Unbound namespace prefix: "+JSON.stringify(ae)),Ct.uri=ae),h.tag.attributes[J]=Ct,I(h,"onattribute",Ct)}h.attribList.length=0}h.tag.isSelfClosing=!!c,h.sawRoot=!0,h.tags.push(h.tag),I(h,"onopentag",h.tag),c||(!h.noscript&&h.tagName.toLowerCase()==="script"?h.state=g.SCRIPT:h.state=g.TEXT,h.tag=null,h.tagName=""),h.attribName=h.attribValue="",h.attribList.length=0}function xt(h){if(!h.tagName){k(h,"Weird empty close tag."),h.textNode+="</>",h.state=g.TEXT;return}if(h.script){if(h.tagName!=="script"){h.script+="</"+h.tagName+">",h.tagName="",h.state=g.SCRIPT;return}I(h,"onscript",h.script),h.script=""}var c=h.tags.length,N=h.tagName;h.strict||(N=N[h.looseCase]());for(var D=N;c--;){var j=h.tags[c];if(j.name!==D)k(h,"Unexpected close tag");else break}if(c<0){k(h,"Unmatched closing tag: "+h.tagName),h.textNode+="</"+h.tagName+">",h.state=g.TEXT;return}h.tagName=N;for(var $=h.tags.length;$-- >c;){var W=h.tag=h.tags.pop();h.tagName=h.tag.name,I(h,"onclosetag",h.tagName);var K={};for(var J in W.ns)K[J]=W.ns[J];var Te=h.tags[h.tags.length-1]||h;h.opt.xmlns&&W.ns!==Te.ns&&Object.keys(W.ns).forEach(function(G){var ae=W.ns[G];I(h,"onclosenamespace",{prefix:G,uri:ae})})}c===0&&(h.closedRoot=!0),h.tagName=h.attribValue=h.attribName="",h.attribList.length=0,h.state=g.TEXT}function us(h){var c=h.entity,N=c.toLowerCase(),D,j="";return h.ENTITIES[c]?h.ENTITIES[c]:h.ENTITIES[N]?h.ENTITIES[N]:(c=N,c.charAt(0)==="#"&&(c.charAt(1)==="x"?(c=c.slice(2),D=parseInt(c,16),j=D.toString(16)):(c=c.slice(1),D=parseInt(c,10),j=D.toString(10))),c=c.replace(/^0+/,""),isNaN(D)||j.toLowerCase()!==c||D<0||D>1114111?(k(h,"Invalid character entity"),"&"+h.entity+";"):String.fromCodePoint(D))}function Yt(h,c){c==="<"?(h.state=g.OPEN_WAKA,h.startTagPosition=h.position):m(c)||(k(h,"Non-whitespace before first tag."),h.textNode=c,h.state=g.TEXT)}function It(h,c){var N="";return c<h.length&&(N=h.charAt(c)),N}function ls(h){var c=this;if(this.error)throw this.error;if(c.closed)return R(c,"Cannot write after close. Assign an onready handler.");if(h===null)return B(c);typeof h=="object"&&(h=h.toString());for(var N=0,D="";D=It(h,N++),c.c=D,!!D;)switch(c.trackPosition&&(c.position++,D===`
`?(c.line++,c.column=0):c.column++),c.state){case g.BEGIN:if(c.state=g.BEGIN_WHITESPACE,D==="\uFEFF")continue;Yt(c,D);continue;case g.BEGIN_WHITESPACE:Yt(c,D);continue;case g.TEXT:if(c.sawRoot&&!c.closedRoot){for(var $=N-1;D&&D!=="<"&&D!=="&";)D=It(h,N++),D&&c.trackPosition&&(c.position++,D===`
`?(c.line++,c.column=0):c.column++);c.textNode+=h.substring($,N-1)}D==="<"&&!(c.sawRoot&&c.closedRoot&&!c.strict)?(c.state=g.OPEN_WAKA,c.startTagPosition=c.position):(!m(D)&&(!c.sawRoot||c.closedRoot)&&k(c,"Text data outside of root node."),D==="&"?c.state=g.TEXT_ENTITY:c.textNode+=D);continue;case g.SCRIPT:D==="<"?c.state=g.SCRIPT_ENDING:c.script+=D;continue;case g.SCRIPT_ENDING:D==="/"?c.state=g.CLOSE_TAG:(c.script+="<"+D,c.state=g.SCRIPT);continue;case g.OPEN_WAKA:if(D==="!")c.state=g.SGML_DECL,c.sgmlDecl="";else if(!m(D))if(P(C,D))c.state=g.OPEN_TAG,c.tagName=D;else if(D==="/")c.state=g.CLOSE_TAG,c.tagName="";else if(D==="?")c.state=g.PROC_INST,c.procInstName=c.procInstBody="";else{if(k(c,"Unencoded <"),c.startTagPosition+1<c.position){var j=c.position-c.startTagPosition;D=new Array(j).join(" ")+D}c.textNode+="<"+D,c.state=g.TEXT}continue;case g.SGML_DECL:if(c.sgmlDecl+D==="--"){c.state=g.COMMENT,c.comment="",c.sgmlDecl="";continue}c.doctype&&c.doctype!==!0&&c.sgmlDecl?(c.state=g.DOCTYPE_DTD,c.doctype+="<!"+c.sgmlDecl+D,c.sgmlDecl=""):(c.sgmlDecl+D).toUpperCase()===T?(I(c,"onopencdata"),c.state=g.CDATA,c.sgmlDecl="",c.cdata=""):(c.sgmlDecl+D).toUpperCase()===S?(c.state=g.DOCTYPE,(c.doctype||c.sawRoot)&&k(c,"Inappropriately located doctype declaration"),c.doctype="",c.sgmlDecl=""):D===">"?(I(c,"onsgmldeclaration",c.sgmlDecl),c.sgmlDecl="",c.state=g.TEXT):(d(D)&&(c.state=g.SGML_DECL_QUOTED),c.sgmlDecl+=D);continue;case g.SGML_DECL_QUOTED:D===c.q&&(c.state=g.SGML_DECL,c.q=""),c.sgmlDecl+=D;continue;case g.DOCTYPE:D===">"?(c.state=g.TEXT,I(c,"ondoctype",c.doctype),c.doctype=!0):(c.doctype+=D,D==="["?c.state=g.DOCTYPE_DTD:d(D)&&(c.state=g.DOCTYPE_QUOTED,c.q=D));continue;case g.DOCTYPE_QUOTED:c.doctype+=D,D===c.q&&(c.q="",c.state=g.DOCTYPE);continue;case g.DOCTYPE_DTD:D==="]"?(c.doctype+=D,c.state=g.DOCTYPE):D==="<"?(c.state=g.OPEN_WAKA,c.startTagPosition=c.position):d(D)?(c.doctype+=D,c.state=g.DOCTYPE_DTD_QUOTED,c.q=D):c.doctype+=D;continue;case g.DOCTYPE_DTD_QUOTED:c.doctype+=D,D===c.q&&(c.state=g.DOCTYPE_DTD,c.q="");continue;case g.COMMENT:D==="-"?c.state=g.COMMENT_ENDING:c.comment+=D;continue;case g.COMMENT_ENDING:D==="-"?(c.state=g.COMMENT_ENDED,c.comment=O(c.opt,c.comment),c.comment&&I(c,"oncomment",c.comment),c.comment=""):(c.comment+="-"+D,c.state=g.COMMENT);continue;case g.COMMENT_ENDED:D!==">"?(k(c,"Malformed comment"),c.comment+="--"+D,c.state=g.COMMENT):c.doctype&&c.doctype!==!0?c.state=g.DOCTYPE_DTD:c.state=g.TEXT;continue;case g.CDATA:for(var $=N-1;D&&D!=="]";)D=It(h,N++),D&&c.trackPosition&&(c.position++,D===`
`?(c.line++,c.column=0):c.column++);c.cdata+=h.substring($,N-1),D==="]"&&(c.state=g.CDATA_ENDING);continue;case g.CDATA_ENDING:D==="]"?c.state=g.CDATA_ENDING_2:(c.cdata+="]"+D,c.state=g.CDATA);continue;case g.CDATA_ENDING_2:D===">"?(c.cdata&&I(c,"oncdata",c.cdata),I(c,"onclosecdata"),c.cdata="",c.state=g.TEXT):D==="]"?c.cdata+="]":(c.cdata+="]]"+D,c.state=g.CDATA);continue;case g.PROC_INST:D==="?"?c.state=g.PROC_INST_ENDING:m(D)?c.state=g.PROC_INST_BODY:c.procInstName+=D;continue;case g.PROC_INST_BODY:if(!c.procInstBody&&m(D))continue;D==="?"?c.state=g.PROC_INST_ENDING:c.procInstBody+=D;continue;case g.PROC_INST_ENDING:D===">"?(I(c,"onprocessinginstruction",{name:c.procInstName,body:c.procInstBody}),c.procInstName=c.procInstBody="",c.state=g.TEXT):(c.procInstBody+="?"+D,c.state=g.PROC_INST_BODY);continue;case g.OPEN_TAG:P(M,D)?c.tagName+=D:(H(c),D===">"?re(c):D==="/"?c.state=g.OPEN_TAG_SLASH:(m(D)||k(c,"Invalid character in tag name"),c.state=g.ATTRIB));continue;case g.OPEN_TAG_SLASH:D===">"?(re(c,!0),xt(c)):(k(c,"Forward-slash in opening tag not followed by >"),c.state=g.ATTRIB);continue;case g.ATTRIB:if(m(D))continue;D===">"?re(c):D==="/"?c.state=g.OPEN_TAG_SLASH:P(C,D)?(c.attribName=D,c.attribValue="",c.state=g.ATTRIB_NAME):k(c,"Invalid attribute name");continue;case g.ATTRIB_NAME:D==="="?c.state=g.ATTRIB_VALUE:D===">"?(k(c,"Attribute without value"),c.attribValue=c.attribName,ye(c),re(c)):m(D)?c.state=g.ATTRIB_NAME_SAW_WHITE:P(M,D)?c.attribName+=D:k(c,"Invalid attribute name");continue;case g.ATTRIB_NAME_SAW_WHITE:if(D==="=")c.state=g.ATTRIB_VALUE;else{if(m(D))continue;k(c,"Attribute without value"),c.tag.attributes[c.attribName]="",c.attribValue="",I(c,"onattribute",{name:c.attribName,value:""}),c.attribName="",D===">"?re(c):P(C,D)?(c.attribName=D,c.state=g.ATTRIB_NAME):(k(c,"Invalid attribute name"),c.state=g.ATTRIB)}continue;case g.ATTRIB_VALUE:if(m(D))continue;d(D)?(c.q=D,c.state=g.ATTRIB_VALUE_QUOTED):(c.opt.unquotedAttributeValues||R(c,"Unquoted attribute value"),c.state=g.ATTRIB_VALUE_UNQUOTED,c.attribValue=D);continue;case g.ATTRIB_VALUE_QUOTED:if(D!==c.q){D==="&"?c.state=g.ATTRIB_VALUE_ENTITY_Q:c.attribValue+=D;continue}ye(c),c.q="",c.state=g.ATTRIB_VALUE_CLOSED;continue;case g.ATTRIB_VALUE_CLOSED:m(D)?c.state=g.ATTRIB:D===">"?re(c):D==="/"?c.state=g.OPEN_TAG_SLASH:P(C,D)?(k(c,"No whitespace between attributes"),c.attribName=D,c.attribValue="",c.state=g.ATTRIB_NAME):k(c,"Invalid attribute name");continue;case g.ATTRIB_VALUE_UNQUOTED:if(!u(D)){D==="&"?c.state=g.ATTRIB_VALUE_ENTITY_U:c.attribValue+=D;continue}ye(c),D===">"?re(c):c.state=g.ATTRIB;continue;case g.CLOSE_TAG:if(c.tagName)D===">"?xt(c):P(M,D)?c.tagName+=D:c.script?(c.script+="</"+c.tagName,c.tagName="",c.state=g.SCRIPT):(m(D)||k(c,"Invalid tagname in closing tag"),c.state=g.CLOSE_TAG_SAW_WHITE);else{if(m(D))continue;v(C,D)?c.script?(c.script+="</"+D,c.state=g.SCRIPT):k(c,"Invalid tagname in closing tag."):c.tagName=D}continue;case g.CLOSE_TAG_SAW_WHITE:if(m(D))continue;D===">"?xt(c):k(c,"Invalid characters in closing tag");continue;case g.TEXT_ENTITY:case g.ATTRIB_VALUE_ENTITY_Q:case g.ATTRIB_VALUE_ENTITY_U:var W,K;switch(c.state){case g.TEXT_ENTITY:W=g.TEXT,K="textNode";break;case g.ATTRIB_VALUE_ENTITY_Q:W=g.ATTRIB_VALUE_QUOTED,K="attribValue";break;case g.ATTRIB_VALUE_ENTITY_U:W=g.ATTRIB_VALUE_UNQUOTED,K="attribValue";break}if(D===";"){var J=us(c);c.opt.unparsedEntities&&!Object.values(l.XML_ENTITIES).includes(J)?(c.entity="",c.state=W,c.write(J)):(c[K]+=J,c.entity="",c.state=W)}else P(c.entity.length?F:x,D)?c.entity+=D:(k(c,"Invalid character in entity name"),c[K]+="&"+c.entity+D,c.entity="",c.state=W);continue;default:throw new Error(c,"Unknown state: "+c.state)}return c.position>=c.bufferCheckPosition&&r(c),c}String.fromCodePoint||function(){var h=String.fromCharCode,c=Math.floor,N=function(){var D=16384,j=[],$,W,K=-1,J=arguments.length;if(!J)return"";for(var Te="";++K<J;){var G=Number(arguments[K]);if(!isFinite(G)||G<0||G>1114111||c(G)!==G)throw RangeError("Invalid code point: "+G);G<=65535?j.push(G):(G-=65536,$=(G>>10)+55296,W=G%1024+56320,j.push($,W)),(K+1===J||j.length>D)&&(Te+=h.apply(null,j),j.length=0)}return Te};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:N,configurable:!0,writable:!0}):String.fromCodePoint=N}()})(typeof Et=="undefined"?Et.sax={}:Et)});var Mi=q(Ut=>{(function(){"use strict";Ut.stripBOM=function(l){return l[0]==="\uFEFF"?l.substring(1):l}}).call(Ut)});var Vt=q(be=>{(function(){"use strict";var l;l=new RegExp(/(?!xmlns)^.*:/),be.normalize=function(e){return e.toLowerCase()},be.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},be.stripPrefix=function(e){return e.replace(l,"")},be.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},be.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(be)});var Li=q(de=>{(function(){"use strict";var l,e,t,r,i,o,n,a,p=function(S,w){return function(){return S.apply(w,arguments)}},E=function(S,w){for(var f in w)T.call(w,f)&&(S[f]=w[f]);function y(){this.constructor=S}return y.prototype=w.prototype,S.prototype=new y,S.__super__=w.prototype,S},T={}.hasOwnProperty;n=Ni(),t=require("events"),l=Mi(),o=Vt(),a=require("timers").setImmediate,e=st().defaults,r=function(S){return typeof S=="object"&&S!=null&&Object.keys(S).length===0},i=function(S,w,f){var y,C,M;for(y=0,C=S.length;y<C;y++)M=S[y],w=M(w,f);return w},de.Parser=function(S){E(w,S);function w(f){this.parseStringPromise=p(this.parseStringPromise,this),this.parseString=p(this.parseString,this),this.reset=p(this.reset,this),this.assignOrPush=p(this.assignOrPush,this),this.processAsync=p(this.processAsync,this);var y,C,M;if(!(this instanceof de.Parser))return new de.Parser(f);this.options={},C=e["0.2"];for(y in C)T.call(C,y)&&(M=C[y],this.options[y]=M);for(y in f)T.call(f,y)&&(M=f[y],this.options[y]=M);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return w.prototype.processAsync=function(){var f,y;try{return this.remaining.length<=this.options.chunkSize?(f=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(f),this.saxParser.close()):(f=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(f),a(this.processAsync))}catch(C){if(y=C,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(y)}},w.prototype.assignOrPush=function(f,y,C){return y in f?(f[y]instanceof Array||(f[y]=[f[y]]),f[y].push(C)):this.options.explicitArray?f[y]=[C]:f[y]=C},w.prototype.reset=function(){var f,y,C,M;return this.removeAllListeners(),this.saxParser=n.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(x){return function(F){if(x.saxParser.resume(),!x.saxParser.errThrown)return x.saxParser.errThrown=!0,x.emit("error",F)}}(this),this.saxParser.onend=function(x){return function(){if(!x.saxParser.ended)return x.saxParser.ended=!0,x.emit("end",x.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,M=[],f=this.options.attrkey,y=this.options.charkey,this.saxParser.onopentag=function(x){return function(F){var m,d,u,P,v;if(u=Object.create(null),u[y]="",!x.options.ignoreAttrs){v=F.attributes;for(m in v)T.call(v,m)&&(!(f in u)&&!x.options.mergeAttrs&&(u[f]=Object.create(null)),d=x.options.attrValueProcessors?i(x.options.attrValueProcessors,F.attributes[m],m):F.attributes[m],P=x.options.attrNameProcessors?i(x.options.attrNameProcessors,m):m,x.options.mergeAttrs?x.assignOrPush(u,P,d):u[f][P]=d)}return u["#name"]=x.options.tagNameProcessors?i(x.options.tagNameProcessors,F.name):F.name,x.options.xmlns&&(u[x.options.xmlnskey]={uri:F.uri,local:F.local}),M.push(u)}}(this),this.saxParser.onclosetag=function(x){return function(){var F,m,d,u,P,v,g,A,b,I;if(v=M.pop(),P=v["#name"],(!x.options.explicitChildren||!x.options.preserveChildrenOrder)&&delete v["#name"],v.cdata===!0&&(F=v.cdata,delete v.cdata),b=M[M.length-1],v[y].match(/^\s*$/)&&!F?(m=v[y],delete v[y]):(x.options.trim&&(v[y]=v[y].trim()),x.options.normalize&&(v[y]=v[y].replace(/\s{2,}/g," ").trim()),v[y]=x.options.valueProcessors?i(x.options.valueProcessors,v[y],P):v[y],Object.keys(v).length===1&&y in v&&!x.EXPLICIT_CHARKEY&&(v=v[y])),r(v)&&(typeof x.options.emptyTag=="function"?v=x.options.emptyTag():v=x.options.emptyTag!==""?x.options.emptyTag:m),x.options.validator!=null&&(I="/"+function(){var L,O,R;for(R=[],L=0,O=M.length;L<O;L++)u=M[L],R.push(u["#name"]);return R}().concat(P).join("/"),function(){var L;try{return v=x.options.validator(I,b&&b[P],v)}catch(O){return L=O,x.emit("error",L)}}()),x.options.explicitChildren&&!x.options.mergeAttrs&&typeof v=="object"){if(!x.options.preserveChildrenOrder)u=Object.create(null),x.options.attrkey in v&&(u[x.options.attrkey]=v[x.options.attrkey],delete v[x.options.attrkey]),!x.options.charsAsChildren&&x.options.charkey in v&&(u[x.options.charkey]=v[x.options.charkey],delete v[x.options.charkey]),Object.getOwnPropertyNames(v).length>0&&(u[x.options.childkey]=v),v=u;else if(b){b[x.options.childkey]=b[x.options.childkey]||[],g=Object.create(null);for(d in v)T.call(v,d)&&(g[d]=v[d]);b[x.options.childkey].push(g),delete v["#name"],Object.keys(v).length===1&&y in v&&!x.EXPLICIT_CHARKEY&&(v=v[y])}}return M.length>0?x.assignOrPush(b,P,v):(x.options.explicitRoot&&(A=v,v=Object.create(null),v[P]=A),x.resultObject=v,x.saxParser.ended=!0,x.emit("end",x.resultObject))}}(this),C=function(x){return function(F){var m,d;if(d=M[M.length-1],d)return d[y]+=F,x.options.explicitChildren&&x.options.preserveChildrenOrder&&x.options.charsAsChildren&&(x.options.includeWhiteChars||F.replace(/\\n/g,"").trim()!=="")&&(d[x.options.childkey]=d[x.options.childkey]||[],m={"#name":"__text__"},m[y]=F,x.options.normalize&&(m[y]=m[y].replace(/\s{2,}/g," ").trim()),d[x.options.childkey].push(m)),d}}(this),this.saxParser.ontext=C,this.saxParser.oncdata=function(x){return function(F){var m;if(m=C(F),m)return m.cdata=!0}}(this)},w.prototype.parseString=function(f,y){var C;y!=null&&typeof y=="function"&&(this.on("end",function(M){return this.reset(),y(null,M)}),this.on("error",function(M){return this.reset(),y(M)}));try{return f=f.toString(),f.trim()===""?(this.emit("end",null),!0):(f=l.stripBOM(f),this.options.async?(this.remaining=f,a(this.processAsync),this.saxParser):this.saxParser.write(f).close())}catch(M){if(C=M,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw C}else return this.emit("error",C),this.saxParser.errThrown=!0}},w.prototype.parseStringPromise=function(f){return new Promise(function(y){return function(C,M){return y.parseString(f,function(x,F){return x?M(x):C(F)})}}(this))},w}(t),de.parseString=function(S,w,f){var y,C,M;return f!=null?(typeof f=="function"&&(y=f),typeof w=="object"&&(C=w)):(typeof w=="function"&&(y=w),C={}),M=new de.Parser(C),M.parseString(S,y)},de.parseStringPromise=function(S,w){var f,y;return typeof w=="object"&&(f=w),y=new de.Parser(f),y.parseStringPromise(S)}}).call(de)});var Bt=q(pe=>{(function(){"use strict";var l,e,t,r,i=function(n,a){for(var p in a)o.call(a,p)&&(n[p]=a[p]);function E(){this.constructor=n}return E.prototype=a.prototype,n.prototype=new E,n.__super__=a.prototype,n},o={}.hasOwnProperty;e=st(),l=Ai(),t=Li(),r=Vt(),pe.defaults=e.defaults,pe.processors=r,pe.ValidationError=function(n){i(a,n);function a(p){this.message=p}return a}(Error),pe.Builder=l.Builder,pe.Parser=t.Parser,pe.parseString=t.parseString,pe.parseStringPromise=t.parseStringPromise}).call(pe)});var ki=q((Dn,Oi)=>{var wt=Oi.exports={};wt.feed=[["author","creator"],["dc:publisher","publisher"],["dc:creator","creator"],["dc:source","source"],["dc:title","title"],["dc:type","type"],"title","description","author","pubDate","webMaster","managingEditor","generator","link","language","copyright","lastBuildDate","docs","generator","ttl","rating","skipHours","skipDays"];wt.item=[["author","creator"],["dc:creator","creator"],["dc:date","date"],["dc:language","language"],["dc:rights","rights"],["dc:source","source"],["dc:title","title"],"title","link","pubDate","author","summary",["content:encoded","content:encoded",{includeSnippet:!0}],"enclosure","dc:creator","dc:date","comments"];var Fi=function(l){return["itunes:"+l,l]};wt.podcastFeed=["author","subtitle","summary","explicit"].map(Fi);wt.podcastItem=["author","subtitle","summary","explicit","duration","image","episode","image","season","keywords","episodeType"].map(Fi)});var jt=q((xn,bs)=>{bs.exports={Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",amp:"&",AMP:"&",andand:"\u2A55",And:"\u2A53",and:"\u2227",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angmsd:"\u2221",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",apacir:"\u2A6F",ap:"\u2248",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250C",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252C",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxul:"\u2518",boxuL:"\u255B",boxUl:"\u255C",boxUL:"\u255D",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255A",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253C",boxvH:"\u256A",boxVh:"\u256B",boxVH:"\u256C",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251C",boxvR:"\u255E",boxVr:"\u255F",boxVR:"\u2560",bprime:"\u2035",breve:"\u02D8",Breve:"\u02D8",brvbar:"\xA6",bscr:"\u{1D4B7}",Bscr:"\u212C",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsolb:"\u29C5",bsol:"\\",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",cap:"\u2229",Cap:"\u22D2",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",centerdot:"\xB7",CenterDot:"\xB7",cfr:"\u{1D520}",Cfr:"\u212D",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25CB",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",conint:"\u222E",Conint:"\u222F",ContourIntegral:"\u222E",copf:"\u{1D554}",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xA9",COPY:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",cross:"\u2717",Cross:"\u2A2F",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",cupbrcap:"\u2A48",cupcap:"\u2A46",CupCap:"\u224D",cup:"\u222A",Cup:"\u22D3",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21A1",dArr:"\u21D3",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21CA",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",diamond:"\u22C4",Diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21D3",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21BD",DownRightTeeVector:"\u295F",DownRightVectorBar:"\u2957",DownRightVector:"\u21C1",DownTeeArrow:"\u21A7",DownTee:"\u22A4",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",Ecirc:"\xCA",ecirc:"\xEA",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",escr:"\u212F",Escr:"\u2130",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",forall:"\u2200",ForAll:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",fscr:"\u{1D4BB}",Fscr:"\u2131",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",gescc:"\u2AA9",ges:"\u2A7E",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",gg:"\u226B",Gg:"\u22D9",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2AA5",gl:"\u2277",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gnE:"\u2269",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gt:">",GT:">",Gt:"\u226B",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",harrcir:"\u2948",harr:"\u2194",hArr:"\u21D4",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",Hfr:"\u210C",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",hopf:"\u{1D559}",Hopf:"\u210D",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\u{1D4BD}",Hscr:"\u210B",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",ifr:"\u{1D526}",Ifr:"\u2111",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",incare:"\u2105",in:"\u2208",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",intcal:"\u22BA",int:"\u222B",Int:"\u222C",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",iscr:"\u{1D4BE}",Iscr:"\u2110",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",lang:"\u27E8",Lang:"\u27EA",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",larrb:"\u21E4",larrbfs:"\u291F",larr:"\u2190",Larr:"\u219E",lArr:"\u21D0",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",latail:"\u2919",lAtail:"\u291B",lat:"\u2AAB",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lBarr:"\u290E",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27E8",LeftArrowBar:"\u21E4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21D0",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21C3",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTeeArrow:"\u21A4",LeftTee:"\u22A3",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangleBar:"\u29CF",LeftTriangle:"\u22B2",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21BF",LeftVectorBar:"\u2952",LeftVector:"\u21BC",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",lescc:"\u2AA8",les:"\u2A7D",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21C7",ll:"\u226A",Ll:"\u22D8",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoustache:"\u23B0",lmoust:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lnE:"\u2268",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",longleftarrow:"\u27F5",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftrightarrow:"\u27F7",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longmapsto:"\u27FC",longrightarrow:"\u27F6",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",Lscr:"\u2112",lsh:"\u21B0",Lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",lt:"<",LT:"<",Lt:"\u226A",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midast:"*",midcir:"\u2AF0",mid:"\u2223",middot:"\xB7",minusb:"\u229F",minus:"\u2212",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",mscr:"\u{1D4C2}",Mscr:"\u2133",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266E",naturals:"\u2115",natur:"\u266E",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21D7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nharr:"\u21AE",nhArr:"\u21CE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlarr:"\u219A",nlArr:"\u21CD",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219A",nLeftarrow:"\u21CD",nleftrightarrow:"\u21AE",nLeftrightarrow:"\u21CE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nopf:"\u{1D55F}",Nopf:"\u2115",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangle:"\u22EA",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangle:"\u22EB",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",nprec:"\u2280",npreceq:"\u2AAF\u0338",npre:"\u2AAF\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219B",nrArr:"\u21CF",nrarrw:"\u219D\u0338",nrightarrow:"\u219B",nRightarrow:"\u21CF",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvDash:"\u22AD",nVdash:"\u22AE",nVDash:"\u22AF",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21D6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",Ocirc:"\xD4",ocirc:"\xF4",ocir:"\u229A",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",orarr:"\u21BB",Or:"\u2A54",or:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",otimesas:"\u2A36",Otimes:"\u2A37",otimes:"\u2297",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",para:"\xB6",parallel:"\u2225",par:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plus:"+",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",popf:"\u{1D561}",Popf:"\u2119",pound:"\xA3",prap:"\u2AB7",Pr:"\u2ABB",pr:"\u227A",prcue:"\u227C",precapprox:"\u2AB7",prec:"\u227A",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",pre:"\u2AAF",prE:"\u2AB3",precsim:"\u227E",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportional:"\u221D",Proportion:"\u2237",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",qopf:"\u{1D562}",Qopf:"\u211A",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",quot:'"',QUOT:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",rang:"\u27E9",Rang:"\u27EB",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21A0",rArr:"\u21D2",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",ratail:"\u291A",rAtail:"\u291C",ratio:"\u2236",rationals:"\u211A",rbarr:"\u290D",rBarr:"\u290F",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",Re:"\u211C",rect:"\u25AD",reg:"\xAE",REG:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",rfr:"\u{1D52F}",Rfr:"\u211C",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrowBar:"\u21E5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21D2",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVectorBar:"\u2955",RightDownVector:"\u21C2",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTeeArrow:"\u21A6",RightTee:"\u22A2",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangleBar:"\u29D0",RightTriangle:"\u22B3",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVectorBar:"\u2954",RightUpVector:"\u21BE",RightVectorBar:"\u2953",RightVector:"\u21C0",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoustache:"\u23B1",rmoust:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",ropf:"\u{1D563}",Ropf:"\u211D",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",rscr:"\u{1D4C7}",Rscr:"\u211B",rsh:"\u21B1",Rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2ABC",sc:"\u227B",sccue:"\u227D",sce:"\u2AB0",scE:"\u2AB4",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdotb:"\u22A1",sdot:"\u22C5",sdote:"\u2A66",searhk:"\u2925",searr:"\u2198",seArr:"\u21D8",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",solbar:"\u233F",solb:"\u29C4",sol:"/",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25A1",Square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squ:"\u25A1",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",sub:"\u2282",Sub:"\u22D0",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subset:"\u2282",Subset:"\u22D0",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succapprox:"\u2AB8",succ:"\u227B",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",sum:"\u2211",Sum:"\u2211",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",sup:"\u2283",Sup:"\u22D1",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",supset:"\u2283",Supset:"\u22D1",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21D9",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",tilde:"\u02DC",Tilde:"\u223C",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2A31",timesb:"\u22A0",times:"\xD7",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",topbot:"\u2336",topcir:"\u2AF1",top:"\u22A4",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",uarr:"\u2191",Uarr:"\u219F",uArr:"\u21D1",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21D1",UpArrowDownArrow:"\u21C5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21D5",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03C5",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTeeArrow:"\u21A5",UpTee:"\u22A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",varr:"\u2195",vArr:"\u21D5",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",vBar:"\u2AE8",Vbar:"\u2AEB",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22A2",vDash:"\u22A8",Vdash:"\u22A9",VDash:"\u22AB",Vdashl:"\u2AE6",veebar:"\u22BB",vee:"\u2228",Vee:"\u22C1",veeeq:"\u225A",vellip:"\u22EE",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",wedge:"\u2227",Wedge:"\u22C0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xharr:"\u27F7",xhArr:"\u27FA",Xi:"\u039E",xi:"\u03BE",xlarr:"\u27F5",xlArr:"\u27F8",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrarr:"\u27F6",xrArr:"\u27F9",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",yuml:"\xFF",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",zfr:"\u{1D537}",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",Zopf:"\u2124",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"}});var qi=q((In,Ss)=>{Ss.exports={Aacute:"\xC1",aacute:"\xE1",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",AElig:"\xC6",aelig:"\xE6",Agrave:"\xC0",agrave:"\xE0",amp:"&",AMP:"&",Aring:"\xC5",aring:"\xE5",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",brvbar:"\xA6",Ccedil:"\xC7",ccedil:"\xE7",cedil:"\xB8",cent:"\xA2",copy:"\xA9",COPY:"\xA9",curren:"\xA4",deg:"\xB0",divide:"\xF7",Eacute:"\xC9",eacute:"\xE9",Ecirc:"\xCA",ecirc:"\xEA",Egrave:"\xC8",egrave:"\xE8",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",frac12:"\xBD",frac14:"\xBC",frac34:"\xBE",gt:">",GT:">",Iacute:"\xCD",iacute:"\xED",Icirc:"\xCE",icirc:"\xEE",iexcl:"\xA1",Igrave:"\xCC",igrave:"\xEC",iquest:"\xBF",Iuml:"\xCF",iuml:"\xEF",laquo:"\xAB",lt:"<",LT:"<",macr:"\xAF",micro:"\xB5",middot:"\xB7",nbsp:"\xA0",not:"\xAC",Ntilde:"\xD1",ntilde:"\xF1",Oacute:"\xD3",oacute:"\xF3",Ocirc:"\xD4",ocirc:"\xF4",Ograve:"\xD2",ograve:"\xF2",ordf:"\xAA",ordm:"\xBA",Oslash:"\xD8",oslash:"\xF8",Otilde:"\xD5",otilde:"\xF5",Ouml:"\xD6",ouml:"\xF6",para:"\xB6",plusmn:"\xB1",pound:"\xA3",quot:'"',QUOT:'"',raquo:"\xBB",reg:"\xAE",REG:"\xAE",sect:"\xA7",shy:"\xAD",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",szlig:"\xDF",THORN:"\xDE",thorn:"\xFE",times:"\xD7",Uacute:"\xDA",uacute:"\xFA",Ucirc:"\xDB",ucirc:"\xFB",Ugrave:"\xD9",ugrave:"\xF9",uml:"\xA8",Uuml:"\xDC",uuml:"\xFC",Yacute:"\xDD",yacute:"\xFD",yen:"\xA5",yuml:"\xFF"}});var $t=q((Cn,vs)=>{vs.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}});var Ri=q((An,Ts)=>{Ts.exports={"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}});var Ui=q(Ge=>{"use strict";var Ds=Ge&&Ge.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ge,"__esModule",{value:!0});var _i=Ds(Ri()),xs=String.fromCodePoint||function(l){var e="";return l>65535&&(l-=65536,e+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),e+=String.fromCharCode(l),e};function Is(l){return l>=55296&&l<=57343||l>1114111?"\uFFFD":(l in _i.default&&(l=_i.default[l]),xs(l))}Ge.default=Is});var Xt=q(ne=>{"use strict";var bt=ne&&ne.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ne,"__esModule",{value:!0});ne.decodeHTML=ne.decodeHTMLStrict=ne.decodeXML=void 0;var Qt=bt(jt()),Cs=bt(qi()),As=bt($t()),Vi=bt(Ui()),Ns=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;ne.decodeXML=ji(As.default);ne.decodeHTMLStrict=ji(Qt.default);function ji(l){var e=$i(l);return function(t){return String(t).replace(Ns,e)}}var Bi=function(l,e){return l<e?1:-1};ne.decodeHTML=function(){for(var l=Object.keys(Cs.default).sort(Bi),e=Object.keys(Qt.default).sort(Bi),t=0,r=0;t<e.length;t++)l[r]===e[t]?(e[t]+=";?",r++):e[t]+=";";var i=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),o=$i(Qt.default);function n(a){return a.substr(-1)!==";"&&(a+=";"),o(a)}return function(a){return String(a).replace(i,n)}}();function $i(l){return function(t){if(t.charAt(1)==="#"){var r=t.charAt(2);return r==="X"||r==="x"?Vi.default(parseInt(t.substr(3),16)):Vi.default(parseInt(t.substr(2),10))}return l[t.slice(1,-1)]||t}}});var Wt=q(Z=>{"use strict";var Qi=Z&&Z.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Z,"__esModule",{value:!0});Z.escapeUTF8=Z.escape=Z.encodeNonAsciiHTML=Z.encodeHTML=Z.encodeXML=void 0;var Ms=Qi($t()),Xi=Wi(Ms.default),Hi=Gi(Xi);Z.encodeXML=Ki(Xi);var Ls=Qi(jt()),Ht=Wi(Ls.default),Fs=Gi(Ht);Z.encodeHTML=ks(Ht,Fs);Z.encodeNonAsciiHTML=Ki(Ht);function Wi(l){return Object.keys(l).sort().reduce(function(e,t){return e[l[t]]="&"+t+";",e},{})}function Gi(l){for(var e=[],t=[],r=0,i=Object.keys(l);r<i.length;r++){var o=i[r];o.length===1?e.push("\\"+o):t.push(o)}e.sort();for(var n=0;n<e.length-1;n++){for(var a=n;a<e.length-1&&e[a].charCodeAt(1)+1===e[a+1].charCodeAt(1);)a+=1;var p=1+a-n;p<3||e.splice(n,p,e[n]+"-"+e[a])}return t.unshift("["+e.join("")+"]"),new RegExp(t.join("|"),"g")}var zi=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,Os=String.prototype.codePointAt!=null?function(l){return l.codePointAt(0)}:function(l){return(l.charCodeAt(0)-55296)*1024+l.charCodeAt(1)-56320+65536};function St(l){return"&#x"+(l.length>1?Os(l):l.charCodeAt(0)).toString(16).toUpperCase()+";"}function ks(l,e){return function(t){return t.replace(e,function(r){return l[r]}).replace(zi,St)}}var Yi=new RegExp(Hi.source+"|"+zi.source,"g");function qs(l){return l.replace(Yi,St)}Z.escape=qs;function Rs(l){return l.replace(Hi,St)}Z.escapeUTF8=Rs;function Ki(l){return function(e){return e.replace(Yi,function(t){return l[t]||St(t)})}}});var Zi=q(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.decodeXMLStrict=_.decodeHTML5Strict=_.decodeHTML4Strict=_.decodeHTML5=_.decodeHTML4=_.decodeHTMLStrict=_.decodeHTML=_.decodeXML=_.encodeHTML5=_.encodeHTML4=_.escapeUTF8=_.escape=_.encodeNonAsciiHTML=_.encodeHTML=_.encodeXML=_.encode=_.decodeStrict=_.decode=void 0;var vt=Xt(),Ji=Wt();function _s(l,e){return(!e||e<=0?vt.decodeXML:vt.decodeHTML)(l)}_.decode=_s;function Us(l,e){return(!e||e<=0?vt.decodeXML:vt.decodeHTMLStrict)(l)}_.decodeStrict=Us;function Vs(l,e){return(!e||e<=0?Ji.encodeXML:Ji.encodeHTML)(l)}_.encode=Vs;var Se=Wt();Object.defineProperty(_,"encodeXML",{enumerable:!0,get:function(){return Se.encodeXML}});Object.defineProperty(_,"encodeHTML",{enumerable:!0,get:function(){return Se.encodeHTML}});Object.defineProperty(_,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return Se.encodeNonAsciiHTML}});Object.defineProperty(_,"escape",{enumerable:!0,get:function(){return Se.escape}});Object.defineProperty(_,"escapeUTF8",{enumerable:!0,get:function(){return Se.escapeUTF8}});Object.defineProperty(_,"encodeHTML4",{enumerable:!0,get:function(){return Se.encodeHTML}});Object.defineProperty(_,"encodeHTML5",{enumerable:!0,get:function(){return Se.encodeHTML}});var me=Xt();Object.defineProperty(_,"decodeXML",{enumerable:!0,get:function(){return me.decodeXML}});Object.defineProperty(_,"decodeHTML",{enumerable:!0,get:function(){return me.decodeHTML}});Object.defineProperty(_,"decodeHTMLStrict",{enumerable:!0,get:function(){return me.decodeHTMLStrict}});Object.defineProperty(_,"decodeHTML4",{enumerable:!0,get:function(){return me.decodeHTML}});Object.defineProperty(_,"decodeHTML5",{enumerable:!0,get:function(){return me.decodeHTML}});Object.defineProperty(_,"decodeHTML4Strict",{enumerable:!0,get:function(){return me.decodeHTMLStrict}});Object.defineProperty(_,"decodeHTML5Strict",{enumerable:!0,get:function(){return me.decodeHTMLStrict}});Object.defineProperty(_,"decodeXMLStrict",{enumerable:!0,get:function(){return me.decodeXML}})});var ts=q((On,es)=>{var he=es.exports={},Bs=Zi(),js=Bt();he.stripHtml=function(l){return l=l.replace(/([^\n])<\/?(h|br|p|ul|ol|li|blockquote|section|table|tr|div)(?:.|\n)*?>([^\n])/gm,`$1
$3`),l=l.replace(/<(?:.|\n)*?>/gm,""),l};he.getSnippet=function(l){return Bs.decodeHTML(he.stripHtml(l)).trim()};he.getLink=function(l,e,t){if(l){for(let r=0;r<l.length;++r)if(l[r].$.rel===e)return l[r].$.href;if(l[t])return l[t].$.href}};he.getContent=function(l){return typeof l._=="string"?l._:typeof l=="object"?new js.Builder({headless:!0,explicitRoot:!0,rootName:"div",renderOpts:{pretty:!1}}).buildObject(l):l};he.copyFromXML=function(l,e,t){t.forEach(function(r){let i=r,o=r,n={};Array.isArray(r)&&(i=r[0],o=r[1],r.length>2&&(n=r[2]));let{keepArray:a,includeSnippet:p}=n;l[i]!==void 0&&(e[o]=a?l[i]:l[i][0]),e[o]&&typeof e[o]._=="string"&&(e[o]=e[o]._),p&&e[o]&&typeof e[o]=="string"&&(e[o+"Snippet"]=he.getSnippet(e[o]))})};he.maybePromisify=function(l,e){return l?e.then(t=>setTimeout(()=>l(null,t)),t=>setTimeout(()=>l(t))):e};var $s="utf8",Qs=/(encoding|charset)\s*=\s*(\S+)/,Xs=["ascii","utf8","utf16le","ucs2","base64","latin1","binary","hex"],Hs={"utf-8":"utf8","iso-8859-1":"latin1"};he.getEncodingFromContentType=function(l){l=l||"";let t=(l.match(Qs)||[])[2]||"";return t=t.toLowerCase(),t=Hs[t]||t,(!t||Xs.indexOf(t)===-1)&&(t=$s),t}});var ss=q((kn,is)=>{"use strict";var Ws=require("http"),Gs=require("https"),zs=Bt(),rs=require("url"),Tt=ki(),Y=ts(),Ys={"User-Agent":"rss-parser",Accept:"application/rss+xml"},Ks=5,Js=6e4,Gt=class{constructor(e={}){e.headers=e.headers||{},e.xml2js=e.xml2js||{},e.customFields=e.customFields||{},e.customFields.item=e.customFields.item||[],e.customFields.feed=e.customFields.feed||[],e.requestOptions=e.requestOptions||{},e.maxRedirects||(e.maxRedirects=Ks),e.timeout||(e.timeout=Js),this.options=e,this.xmlParser=new zs.Parser(this.options.xml2js)}parseString(e,t){let r=new Promise((i,o)=>{this.xmlParser.parseString(e,(n,a)=>{if(n)return o(n);if(!a)return o(new Error("Unable to parse XML."));let p=null;if(a.feed)p=this.buildAtomFeed(a);else if(a.rss&&a.rss.$&&a.rss.$.version&&a.rss.$.version.match(/^2/))p=this.buildRSS2(a);else if(a["rdf:RDF"])p=this.buildRSS1(a);else if(a.rss&&a.rss.$&&a.rss.$.version&&a.rss.$.version.match(/0\.9/))p=this.buildRSS0_9(a);else if(a.rss&&this.options.defaultRSS)switch(this.options.defaultRSS){case .9:p=this.buildRSS0_9(a);break;case 1:p=this.buildRSS1(a);break;case 2:p=this.buildRSS2(a);break;default:return o(new Error("default RSS version not recognized."))}else return o(new Error("Feed not recognized as RSS 1 or 2."));i(p)})});return r=Y.maybePromisify(t,r),r}parseURL(e,t,r=0){let i="",o=e.indexOf("https")===0?Gs.get:Ws.get,n=rs.parse(e),a=Object.assign({},Ys,this.options.headers),p=null,E=new Promise((T,S)=>{let w=Object.assign({headers:a},n,this.options.requestOptions);o(w,y=>{if(this.options.maxRedirects&&y.statusCode>=300&&y.statusCode<400&&y.headers.location){if(r===this.options.maxRedirects)return S(new Error("Too many redirects"));{let M=rs.resolve(e,y.headers.location);return this.parseURL(M,null,r+1).then(T,S)}}else if(y.statusCode>=300)return S(new Error("Status code "+y.statusCode));let C=Y.getEncodingFromContentType(y.headers["content-type"]);y.setEncoding(C),y.on("data",M=>{i+=M}),y.on("end",()=>this.parseString(i).then(T,S))}).on("error",S),p=setTimeout(()=>S(new Error("Request timed out after "+this.options.timeout+"ms")),this.options.timeout)}).then(T=>(clearTimeout(p),Promise.resolve(T)),T=>(clearTimeout(p),Promise.reject(T)));return E=Y.maybePromisify(t,E),E}buildAtomFeed(e){let t={items:[]};if(Y.copyFromXML(e.feed,t,this.options.customFields.feed),e.feed.link&&(t.link=Y.getLink(e.feed.link,"alternate",0),t.feedUrl=Y.getLink(e.feed.link,"self",1)),e.feed.title){let r=e.feed.title[0]||"";r._&&(r=r._),r&&(t.title=r)}return e.feed.updated&&(t.lastBuildDate=e.feed.updated[0]),t.items=(e.feed.entry||[]).map(r=>this.parseItemAtom(r)),t}parseItemAtom(e){let t={};if(Y.copyFromXML(e,t,this.options.customFields.item),e.title){let r=e.title[0]||"";r._&&(r=r._),r&&(t.title=r)}return e.link&&e.link.length&&(t.link=Y.getLink(e.link,"alternate",0)),e.published&&e.published.length&&e.published[0].length&&(t.pubDate=new Date(e.published[0]).toISOString()),!t.pubDate&&e.updated&&e.updated.length&&e.updated[0].length&&(t.pubDate=new Date(e.updated[0]).toISOString()),e.author&&e.author.length&&e.author[0].name&&e.author[0].name.length&&(t.author=e.author[0].name[0]),e.content&&e.content.length&&(t.content=Y.getContent(e.content[0]),t.contentSnippet=Y.getSnippet(t.content)),e.summary&&e.summary.length&&(t.summary=Y.getContent(e.summary[0])),e.id&&(t.id=e.id[0]),this.setISODate(t),t}buildRSS0_9(e){var t=e.rss.channel[0],r=t.item;return this.buildRSS(t,r)}buildRSS1(e){e=e["rdf:RDF"];let t=e.channel[0],r=e.item;return this.buildRSS(t,r)}buildRSS2(e){let t=e.rss.channel[0],r=t.item,i=this.buildRSS(t,r);return e.rss.$&&e.rss.$["xmlns:itunes"]&&this.decorateItunes(i,t),i}buildRSS(e,t){t=t||[];let r={items:[]},i=Tt.feed.concat(this.options.customFields.feed),o=Tt.item.concat(this.options.customFields.item);if(e["atom:link"]&&e["atom:link"][0]&&e["atom:link"][0].$&&(r.feedUrl=e["atom:link"][0].$.href),e.image&&e.image[0]&&e.image[0].url){r.image={};let a=e.image[0];a.link&&(r.image.link=a.link[0]),a.url&&(r.image.url=a.url[0]),a.title&&(r.image.title=a.title[0]),a.width&&(r.image.width=a.width[0]),a.height&&(r.image.height=a.height[0])}let n=this.generatePaginationLinks(e);return Object.keys(n).length&&(r.paginationLinks=n),Y.copyFromXML(e,r,i),r.items=t.map(a=>this.parseItemRss(a,o)),r}parseItemRss(e,t){let r={};return Y.copyFromXML(e,r,t),e.enclosure&&(r.enclosure=e.enclosure[0].$),e.description&&(r.content=Y.getContent(e.description[0]),r.contentSnippet=Y.getSnippet(r.content)),e.guid&&(r.guid=e.guid[0],r.guid._&&(r.guid=r.guid._)),e.$&&e.$["rdf:about"]&&(r["rdf:about"]=e.$["rdf:about"]),e.category&&(r.categories=e.category),this.setISODate(r),r}decorateItunes(e,t){let r=t.item||[],i=[];if(e.itunes={},t["itunes:owner"]){let o={};t["itunes:owner"][0]["itunes:name"]&&(o.name=t["itunes:owner"][0]["itunes:name"][0]),t["itunes:owner"][0]["itunes:email"]&&(o.email=t["itunes:owner"][0]["itunes:email"][0]),e.itunes.owner=o}if(t["itunes:image"]){let o;o=t["itunes:image"][0]&&t["itunes:image"][0].$&&t["itunes:image"][0].$.href?t["itunes:image"][0].$.href:null,o&&(e.itunes.image=o)}if(t["itunes:category"]){let o=t["itunes:category"].map(n=>({name:n&&n.$&&n.$.text,subs:n["itunes:category"]?n["itunes:category"].map(a=>({name:a&&a.$&&a.$.text})):null}));e.itunes.categories=o.map(n=>n.name),e.itunes.categoriesWithSubs=o}if(t["itunes:keywords"])if(t["itunes:keywords"].length>1)e.itunes.keywords=t["itunes:keywords"].map(o=>o&&o.$&&o.$.text);else{let o=t["itunes:keywords"][0];o&&typeof o._=="string"&&(o=o._),o&&o.$&&o.$.text?e.itunes.keywords=o.$.text.split(","):typeof o=="string"&&(e.itunes.keywords=o.split(","))}Y.copyFromXML(t,e.itunes,Tt.podcastFeed),r.forEach((o,n)=>{let a=e.items[n];a.itunes={},Y.copyFromXML(o,a.itunes,Tt.podcastItem);let p=o["itunes:image"];p&&p[0]&&p[0].$&&p[0].$.href&&(a.itunes.image=p[0].$.href)})}setISODate(e){let t=e.pubDate||e.date;if(t)try{e.isoDate=new Date(t.trim()).toISOString()}catch(r){}}generatePaginationLinks(e){if(!e["atom:link"])return{};let t=["self","first","next","prev","last"];return e["atom:link"].reduce((r,i)=>(!i.$||!t.includes(i.$.rel)||(r[i.$.rel]=i.$.href),r),{})}};is.exports=Gt});var zt=q((qn,os)=>{"use strict";os.exports=ss()});var Zs={};ys(Zs,{default:()=>Dt});module.exports=Ps(Zs);var Ce=require("obsidian");var ce={dataFolderPath:".obsidian/plugins/podcast-player/data",defaultPlaybackSettings:{volume:1,playbackSpeed:1,skipIntroSeconds:0,skipOutroSeconds:0},autoDownload:!1,maxCacheEpisodes:50,feedUpdateInterval:60,enableNotifications:!0};var te=require("obsidian");var At=class l{constructor(){this.logLevel=1;this.prefix="[Podcast Player]"}static getInstance(){return l.instance||(l.instance=new l),l.instance}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}debug(e,...t){this.logLevel<=0&&console.debug(`${this.prefix} [DEBUG]`,e,...t)}info(e,...t){this.logLevel<=1&&console.info(`${this.prefix} [INFO]`,e,...t)}warn(e,...t){this.logLevel<=2&&console.warn(`${this.prefix} [WARN]`,e,...t)}error(e,t,...r){this.logLevel<=3&&(t instanceof Error?console.error(`${this.prefix} [ERROR]`,e,t.message,t.stack,...r):console.error(`${this.prefix} [ERROR]`,e,t,...r))}methodEntry(e,t,...r){this.debug(`${e}.${t}() called`,...r)}methodExit(e,t,r){this.debug(`${e}.${t}() completed`,r)}},s=At.getInstance();var Es=require("obsidian"),De=class extends Error{constructor(t,r){super(t);this.code=r;this.name="PodcastPlayerError"}},se=class extends De{constructor(t,r,i){super(t,"FEED_PARSE_ERROR");this.feedUrl=r;this.cause=i;this.name="FeedParseError"}},Pe=class extends De{constructor(t,r,i){super(t,"NETWORK_ERROR");this.url=r;this.cause=i;this.name="NetworkError"}},z=class extends De{constructor(t,r,i){super(t,"AUDIO_PLAYBACK_ERROR");this.audioUrl=r;this.cause=i;this.name="AudioPlaybackError"}},U=class extends De{constructor(t,r){super(t,"STORAGE_ERROR");this.path=r;this.name="StorageError"}};async function tr(l,e={}){let{maxRetries:t=3,initialDelay:r=1e3,maxDelay:i=1e4,backoffMultiplier:o=2}=e,n,a=r;for(let p=0;p<=t;p++)try{return await l()}catch(E){n=E,p<t&&(s.warn(`Attempt ${p+1} failed, retrying in ${a}ms...`,E),await ws(a),a=Math.min(a*o,i))}throw n}function ws(l){return new Promise(e=>setTimeout(e,l))}function rr(l,e){try{return JSON.parse(l)}catch(t){return s.warn("Failed to parse JSON",t),e}}var Ae=class{constructor(e,t){this.vault=e,this.basePath=(0,te.normalizePath)(t),this.structure=this.buildStructure()}buildStructure(){return{root:this.basePath,subscriptions:(0,te.normalizePath)(`${this.basePath}/subscriptions`),progress:(0,te.normalizePath)(`${this.basePath}/progress`),playlists:(0,te.normalizePath)(`${this.basePath}/playlists`),queues:(0,te.normalizePath)(`${this.basePath}/queues`),cache:(0,te.normalizePath)(`${this.basePath}/cache`),cacheFeed:(0,te.normalizePath)(`${this.basePath}/cache/feeds`),cacheImages:(0,te.normalizePath)(`${this.basePath}/cache/images`),backups:(0,te.normalizePath)(`${this.basePath}/backups`)}}getStructure(){return{...this.structure}}getBasePath(){return this.basePath}updateBasePath(e){this.basePath=(0,te.normalizePath)(e),this.structure=this.buildStructure()}async ensureDirectories(){s.info("Ensuring data directories exist",this.basePath);try{let e=this.vault.adapter;await e.exists(this.basePath)||(s.info("Creating base directory",this.basePath),await e.mkdir(this.basePath));let t=[this.structure.subscriptions,this.structure.progress,this.structure.playlists,this.structure.queues,this.structure.cache,this.structure.cacheFeed,this.structure.cacheImages,this.structure.backups];for(let r of t)await e.exists(r)||(s.debug("Creating directory",r),await e.mkdir(r));s.info("Data directories ready")}catch(e){throw s.error("Failed to create data directories",e),new U("Failed to create data directories",this.basePath)}}getFilePath(e,t){let r=this.structure[e];return(0,te.normalizePath)(`${r}/${t}`)}async directoryExists(e){try{return await this.vault.adapter.exists(e)}catch(t){return s.error("Failed to check directory existence",t),!1}}async fileExists(e){try{return await this.vault.adapter.exists(e)}catch(t){return s.error("Failed to check file existence",t),!1}}async listFiles(e){let t=this.structure[e];try{let r=this.vault.adapter;return await r.exists(t)?(await r.list(t)).files:[]}catch(r){throw s.error("Failed to list files",r),new U(`Failed to list files in ${t}`,t)}}async deleteFile(e){try{await this.vault.adapter.remove(e),s.debug("Deleted file",e)}catch(t){throw s.error("Failed to delete file",t),new U(`Failed to delete file ${e}`,e)}}async createBackup(e,t){try{let r=await this.vault.adapter.read(e),i=new Date().toISOString().replace(/[:.]/g,"-"),o=t||`backup-${i}.json`,n=this.getFilePath("backups",o);return await this.vault.adapter.write(n,r),s.info("Created backup",n),n}catch(r){throw s.error("Failed to create backup",r),new U(`Failed to create backup of ${e}`,e)}}async cleanupOldBackups(e=5){try{let t=await this.listFiles("backups");if(t.length<=e)return;let r=await Promise.all(t.map(async o=>{let n=await this.vault.adapter.stat(o);return{file:o,mtime:(n==null?void 0:n.mtime)||0}}));r.sort((o,n)=>n.mtime-o.mtime);let i=r.slice(e);for(let{file:o}of i)await this.deleteFile(o),s.debug("Deleted old backup",o);s.info(`Cleaned up ${i.length} old backups`)}catch(t){s.error("Failed to cleanup old backups",t)}}async getDirectorySize(e){try{let t=await this.listFiles(e),r=0;for(let i of t){let o=await this.vault.adapter.stat(i);r+=(o==null?void 0:o.size)||0}return r}catch(t){return s.error("Failed to get directory size",t),0}}};var rt=require("obsidian");var Ne=class{constructor(e,t,r="json"){this.vault=e,this.pathManager=t,this.format=r}async readJson(e,t){try{let r=this.vault.adapter;if(!await r.exists(e))return s.debug("File does not exist, returning fallback",e),t;let i=await r.read(e),o=rr(i,t);return s.debug("Read JSON file",e),o}catch(r){throw s.error("Failed to read JSON file",r),new U(`Failed to read file ${e}`,e)}}async writeJson(e,t,r=!0){try{let i=this.vault.adapter;if(r&&await i.exists(e))try{await this.pathManager.createBackup(e)}catch(n){s.warn("Failed to create backup, continuing",n)}let o=JSON.stringify(t,null,2);await i.write(e,o),s.debug("Wrote JSON file",e)}catch(i){throw s.error("Failed to write JSON file",i),new U(`Failed to write file ${e}`,e)}}async deleteFile(e){try{await this.vault.adapter.remove(e),s.debug("Deleted file",e)}catch(t){throw s.error("Failed to delete file",t),new U(`Failed to delete file ${e}`,e)}}async fileExists(e){try{return await this.vault.adapter.exists(e)}catch(t){return s.error("Failed to check file existence",t),!1}}async listFiles(e){try{let t=this.vault.adapter;return await t.exists(e)?(await t.list(e)).files:[]}catch(t){throw s.error("Failed to list files",t),new U(`Failed to list files in ${e}`,e)}}},ue=class extends Ne{constructor(e,t,r,i="json"){super(e,t,i),this.filePath=(0,rt.normalizePath)(r)}async load(){s.methodEntry("SingleFileStore","load",this.filePath);let e=await this.readJson(this.filePath,this.getDefaultValue());return this.validate(e)?(s.methodExit("SingleFileStore","load"),e):(s.warn("Data validation failed, using default value",this.filePath),this.getDefaultValue())}async save(e){if(s.methodEntry("SingleFileStore","save",this.filePath),!this.validate(e))throw new U("Data validation failed",this.filePath);await this.writeJson(this.filePath,e),s.methodExit("SingleFileStore","save")}async clear(){s.methodEntry("SingleFileStore","clear",this.filePath);let e=this.getDefaultValue();await this.save(e),s.methodExit("SingleFileStore","clear")}async delete(){await this.fileExists(this.filePath)&&await this.deleteFile(this.filePath)}},le=class extends Ne{constructor(e,t,r,i="json"){super(e,t,i),this.dirPath=(0,rt.normalizePath)(r)}getItemFilePath(e){return(0,rt.normalizePath)(`${this.dirPath}/${e}.json`)}async loadItem(e,t){let r=this.getItemFilePath(e);return await this.readJson(r,t)}async saveItem(e,t){let r=this.getItemFilePath(e);await this.writeJson(r,t)}async deleteItem(e){let t=this.getItemFilePath(e);await this.fileExists(t)&&await this.deleteFile(t)}async listItemIds(){return(await this.listFiles(this.dirPath)).filter(t=>t.endsWith(".json")).map(t=>(t.split("/").pop()||"").replace(".json",""))}async clear(){s.methodEntry("MultiFileStore","clear",this.dirPath);let e=await this.listFiles(this.dirPath);for(let t of e)await this.deleteFile(t);s.methodExit("MultiFileStore","clear")}};var Me=class Me extends ue{constructor(e,t){let r=t.getFilePath("subscriptions","subscriptions.json");super(e,t,r)}validate(e){if(!e||typeof e!="object")return s.warn("Invalid subscription data: not an object"),!1;if(!Array.isArray(e.podcasts))return s.warn("Invalid subscription data: podcasts is not an array"),!1;if(typeof e.version!="number")return s.warn("Invalid subscription data: version is not a number"),!1;for(let t of e.podcasts)if(!this.validatePodcast(t))return s.warn("Invalid podcast in subscription data",t),!1;return!0}validatePodcast(e){if(!e||typeof e!="object")return!1;let t=["id","title","feedUrl","subscribedAt"];for(let r of t)if(!(r in e))return s.warn(`Missing required field in podcast: ${r}`),!1;return!0}getDefaultValue(){return{podcasts:[],version:Me.CURRENT_VERSION}}async getAllPodcasts(){s.methodEntry("SubscriptionStore","getAllPodcasts");let e=await this.load();return s.methodExit("SubscriptionStore","getAllPodcasts"),e.podcasts}async getPodcast(e){s.methodEntry("SubscriptionStore","getPodcast",e);let r=(await this.load()).podcasts.find(i=>i.id===e)||null;return s.methodExit("SubscriptionStore","getPodcast"),r}async getPodcastByFeedUrl(e){s.methodEntry("SubscriptionStore","getPodcastByFeedUrl",e);let r=(await this.load()).podcasts.find(i=>i.feedUrl===e)||null;return s.methodExit("SubscriptionStore","getPodcastByFeedUrl"),r}async addPodcast(e){if(s.methodEntry("SubscriptionStore","addPodcast",e.id),!this.validatePodcast(e))throw new U("Invalid podcast data",this.filePath);let t=await this.load(),r=t.podcasts.findIndex(i=>i.id===e.id);r!==-1?(s.warn("Podcast already exists, updating instead",e.id),t.podcasts[r]=e):t.podcasts.push(e),await this.save(t),s.methodExit("SubscriptionStore","addPodcast")}async updatePodcast(e){if(s.methodEntry("SubscriptionStore","updatePodcast",e.id),!this.validatePodcast(e))throw new U("Invalid podcast data",this.filePath);let t=await this.load(),r=t.podcasts.findIndex(i=>i.id===e.id);if(r===-1)throw new U(`Podcast not found: ${e.id}`,this.filePath);t.podcasts[r]=e,await this.save(t),s.methodExit("SubscriptionStore","updatePodcast")}async removePodcast(e){s.methodEntry("SubscriptionStore","removePodcast",e);let t=await this.load(),r=t.podcasts.findIndex(i=>i.id===e);if(r===-1){s.warn("Podcast not found, nothing to remove",e);return}t.podcasts.splice(r,1),await this.save(t),s.methodExit("SubscriptionStore","removePodcast")}async isSubscribed(e){return(await this.load()).podcasts.some(r=>r.id===e)}async isSubscribedByFeedUrl(e){return(await this.load()).podcasts.some(r=>r.feedUrl===e)}async getSubscriptionCount(){return(await this.load()).podcasts.length}async updatePodcastEpisodes(e,t){s.methodEntry("SubscriptionStore","updatePodcastEpisodes",e);let r=await this.load(),i=r.podcasts.find(o=>o.id===e);if(!i)throw new U(`Podcast not found: ${e}`,this.filePath);i.episodes=t,i.lastFetchedAt=new Date,await this.save(r),s.methodExit("SubscriptionStore","updatePodcastEpisodes")}async updatePodcastSettings(e,t){s.methodEntry("SubscriptionStore","updatePodcastSettings",e);let r=await this.load(),i=r.podcasts.find(o=>o.id===e);if(!i)throw new U(`Podcast not found: ${e}`,this.filePath);i.settings=t,await this.save(r),s.methodExit("SubscriptionStore","updatePodcastSettings")}async getPodcastsNeedingUpdate(e){let t=await this.load(),r=Date.now();return t.podcasts.filter(i=>{if(!i.lastFetchedAt)return!0;let o=new Date(i.lastFetchedAt).getTime();return r-o>=e})}async searchPodcasts(e){let t=await this.load(),r=e.toLowerCase();return t.podcasts.filter(i=>{var a;let o=i.title.toLowerCase().includes(r),n=(a=i.author)==null?void 0:a.toLowerCase().includes(r);return o||n})}async exportSubscriptions(){s.methodEntry("SubscriptionStore","exportSubscriptions");let e=await this.load();return s.methodExit("SubscriptionStore","exportSubscriptions"),e}async importSubscriptions(e,t=!1){if(s.methodEntry("SubscriptionStore","importSubscriptions",`replace=${t}`),!this.validate(e))throw new U("Invalid import data",this.filePath);if(t)await this.save(e);else{let i=[...(await this.load()).podcasts];for(let o of e.podcasts){let n=i.findIndex(a=>a.id===o.id);n!==-1?i[n]=o:i.push(o)}await this.save({podcasts:i,version:Me.CURRENT_VERSION})}s.methodExit("SubscriptionStore","importSubscriptions")}};Me.CURRENT_VERSION=1;var Le=Me;function ir(l){return Math.max(.5,Math.min(3,l))}function sr(l){return Math.max(0,Math.min(1,l))}var Nt=[.5,.75,1,1.25,1.5,1.75,2,2.5,3];function or(l){let e=Nt.findIndex(t=>t>l);return e===-1?Nt[0]:Nt[e]}var nr={SHORT:15,MEDIUM:30,LONG:60};function ar(l,e,t=nr.SHORT){return Math.min(e,l+t)}function cr(l,e=nr.SHORT){return Math.max(0,l-e)}function Fe(l,e,t=30){return e<=0?!1:e-l<=t}var Oe=class Oe extends ue{constructor(e,t){let r=t.getFilePath("progress","progress.json");super(e,t,r)}validate(e){if(!e||typeof e!="object")return s.warn("Invalid progress data: not an object"),!1;if(!Array.isArray(e.progress))return s.warn("Invalid progress data: progress is not an array"),!1;if(typeof e.version!="number")return s.warn("Invalid progress data: version is not a number"),!1;for(let t of e.progress)if(!this.validateProgress(t))return s.warn("Invalid progress entry in data",t),!1;return!0}validateProgress(e){if(!e||typeof e!="object")return!1;let t=["episodeId","podcastId","position","duration","lastPlayedAt"];for(let r of t)if(!(r in e))return s.warn(`Missing required field in progress: ${r}`),!1;return!(typeof e.position!="number"||e.position<0||typeof e.duration!="number"||e.duration<0||typeof e.completed!="boolean")}getDefaultValue(){return{progress:[],version:Oe.CURRENT_VERSION}}async getProgress(e){s.methodEntry("ProgressStore","getProgress",e);let r=(await this.load()).progress.find(i=>i.episodeId===e)||null;return s.methodExit("ProgressStore","getProgress"),r}async getPodcastProgress(e){s.methodEntry("ProgressStore","getPodcastProgress",e);let r=(await this.load()).progress.filter(i=>i.podcastId===e);return s.methodExit("ProgressStore","getPodcastProgress"),r}async getAllProgress(){s.methodEntry("ProgressStore","getAllProgress");let e=await this.load();return s.methodExit("ProgressStore","getAllProgress"),e.progress}async updateProgress(e){if(s.methodEntry("ProgressStore","updateProgress",e.episodeId),!this.validateProgress(e))throw new U("Invalid progress data",this.filePath);let t=await this.load(),r=t.progress.findIndex(i=>i.episodeId===e.episodeId);e.completed=Fe(e.position,e.duration),r!==-1?t.progress[r]=e:t.progress.push(e),await this.save(t),s.methodExit("ProgressStore","updateProgress")}async updatePosition(e,t,r,i){s.methodEntry("ProgressStore","updatePosition",e);let o=await this.getProgress(e),n={episodeId:e,podcastId:t,position:r,duration:i,lastPlayedAt:new Date,completed:Fe(r,i)};await this.updateProgress(n),s.methodExit("ProgressStore","updatePosition")}async markCompleted(e,t,r){s.methodEntry("ProgressStore","markCompleted",e);let i={episodeId:e,podcastId:t,position:r,duration:r,lastPlayedAt:new Date,completed:!0};await this.updateProgress(i),s.methodExit("ProgressStore","markCompleted")}async resetProgress(e){s.methodEntry("ProgressStore","resetProgress",e);let t=await this.load(),r=t.progress.findIndex(i=>i.episodeId===e);r!==-1&&(t.progress.splice(r,1),await this.save(t)),s.methodExit("ProgressStore","resetProgress")}async removeProgress(e){s.methodEntry("ProgressStore","removeProgress",e);let t=await this.load(),r=t.progress.findIndex(i=>i.episodeId===e);r!==-1&&(t.progress.splice(r,1),await this.save(t)),s.methodExit("ProgressStore","removeProgress")}async removePodcastProgress(e){s.methodEntry("ProgressStore","removePodcastProgress",e);let t=await this.load();t.progress=t.progress.filter(r=>r.podcastId!==e),await this.save(t),s.methodExit("ProgressStore","removePodcastProgress")}async getInProgressEpisodes(){return(await this.load()).progress.filter(t=>!t.completed&&t.position>0)}async getCompletedEpisodes(){return(await this.load()).progress.filter(t=>t.completed)}async getRecentlyPlayed(e=10){return[...(await this.load()).progress].sort((i,o)=>{let n=new Date(i.lastPlayedAt).getTime();return new Date(o.lastPlayedAt).getTime()-n}).slice(0,e)}async getCompletionPercentage(e){let t=await this.getProgress(e);return!t||t.duration<=0?0:Math.min(100,Math.max(0,t.position/t.duration*100))}async getTotalListeningTime(){return(await this.load()).progress.reduce((t,r)=>t+r.position,0)}async getPodcastStatistics(e){let t=await this.getPodcastProgress(e);return{totalEpisodes:t.length,completedEpisodes:t.filter(r=>r.completed).length,inProgressEpisodes:t.filter(r=>!r.completed&&r.position>0).length,totalListeningTime:t.reduce((r,i)=>r+i.position,0)}}async cleanupOldProgress(e=100){s.methodEntry("ProgressStore","cleanupOldProgress",`keepRecentCount=${e}`);let t=await this.load(),r=[...t.progress].sort((i,o)=>{let n=new Date(i.lastPlayedAt).getTime();return new Date(o.lastPlayedAt).getTime()-n});t.progress=r.slice(0,e),await this.save(t),s.methodExit("ProgressStore","cleanupOldProgress")}async exportProgress(){s.methodEntry("ProgressStore","exportProgress");let e=await this.load();return s.methodExit("ProgressStore","exportProgress"),e}async importProgress(e,t=!1){if(s.methodEntry("ProgressStore","importProgress",`replace=${t}`),!this.validate(e))throw new U("Invalid import data",this.filePath);if(t)await this.save(e);else{let i=[...(await this.load()).progress];for(let o of e.progress){let n=i.findIndex(a=>a.episodeId===o.episodeId);if(n!==-1){let a=new Date(i[n].lastPlayedAt).getTime();new Date(o.lastPlayedAt).getTime()>a&&(i[n]=o)}else i.push(o)}await this.save({progress:i,version:Oe.CURRENT_VERSION})}s.methodExit("ProgressStore","importProgress")}};Oe.CURRENT_VERSION=1;var ke=Oe;var ur=require("obsidian");var qe=class extends ue{constructor(e,t){let r=t.getFilePath("root","settings.json");super(e,t,r)}validate(e){if(!e||typeof e!="object")return s.warn("Invalid settings data: not an object"),!1;if(typeof e.dataFolderPath!="string")return s.warn("Invalid settings: dataFolderPath is not a string"),!1;if(!e.defaultPlaybackSettings||typeof e.defaultPlaybackSettings!="object")return s.warn("Invalid settings: defaultPlaybackSettings is not an object"),!1;let t=e.defaultPlaybackSettings;return typeof t.volume!="number"||typeof t.playbackSpeed!="number"||typeof t.skipIntroSeconds!="number"?(s.warn("Invalid settings: defaultPlaybackSettings has invalid fields"),!1):typeof e.autoDownload!="boolean"?(s.warn("Invalid settings: autoDownload is not a boolean"),!1):typeof e.enableNotifications!="boolean"?(s.warn("Invalid settings: enableNotifications is not a boolean"),!1):typeof e.maxCacheEpisodes!="number"||e.maxCacheEpisodes<0?(s.warn("Invalid settings: maxCacheEpisodes is invalid"),!1):typeof e.feedUpdateInterval!="number"||e.feedUpdateInterval<0?(s.warn("Invalid settings: feedUpdateInterval is invalid"),!1):!0}getDefaultValue(){return{...ce}}async getSettings(){s.methodEntry("SettingsStore","getSettings");let e=await this.load();return s.methodExit("SettingsStore","getSettings"),e}async updateSettings(e){s.methodEntry("SettingsStore","updateSettings"),await this.save(e),s.methodExit("SettingsStore","updateSettings")}async updateSetting(e,t){s.methodEntry("SettingsStore","updateSetting",e);let r=await this.load();r[e]=t,await this.save(r),s.methodExit("SettingsStore","updateSetting")}async getSetting(e){return(await this.load())[e]}async updateDataFolderPath(e){s.methodEntry("SettingsStore","updateDataFolderPath",e),await this.updateSetting("dataFolderPath",(0,ur.normalizePath)(e)),s.methodExit("SettingsStore","updateDataFolderPath")}async updateDefaultVolume(e){s.methodEntry("SettingsStore","updateDefaultVolume",e);let t=await this.load();t.defaultPlaybackSettings.volume=Math.max(0,Math.min(1,e)),await this.save(t),s.methodExit("SettingsStore","updateDefaultVolume")}async updateDefaultPlaybackSpeed(e){s.methodEntry("SettingsStore","updateDefaultPlaybackSpeed",e);let t=await this.load();t.defaultPlaybackSettings.playbackSpeed=Math.max(.5,Math.min(3,e)),await this.save(t),s.methodExit("SettingsStore","updateDefaultPlaybackSpeed")}async updateDefaultSkipIntro(e){s.methodEntry("SettingsStore","updateDefaultSkipIntro",e);let t=await this.load();t.defaultPlaybackSettings.skipIntroSeconds=Math.max(0,e),await this.save(t),s.methodExit("SettingsStore","updateDefaultSkipIntro")}async updateDefaultSkipOutro(e){s.methodEntry("SettingsStore","updateDefaultSkipOutro",e);let t=await this.load();t.defaultPlaybackSettings.skipOutroSeconds=Math.max(0,e),await this.save(t),s.methodExit("SettingsStore","updateDefaultSkipOutro")}async updateAutoDownload(e){s.methodEntry("SettingsStore","updateAutoDownload",e),await this.updateSetting("autoDownload",e),s.methodExit("SettingsStore","updateAutoDownload")}async updateMaxCacheEpisodes(e){s.methodEntry("SettingsStore","updateMaxCacheEpisodes",e),await this.updateSetting("maxCacheEpisodes",Math.max(0,e)),s.methodExit("SettingsStore","updateMaxCacheEpisodes")}async updateFeedUpdateInterval(e){s.methodEntry("SettingsStore","updateFeedUpdateInterval",e),await this.updateSetting("feedUpdateInterval",Math.max(0,e)),s.methodExit("SettingsStore","updateFeedUpdateInterval")}async updateNotifications(e){s.methodEntry("SettingsStore","updateNotifications",e),await this.updateSetting("enableNotifications",e),s.methodExit("SettingsStore","updateNotifications")}async resetToDefaults(){s.methodEntry("SettingsStore","resetToDefaults"),await this.save(this.getDefaultValue()),s.methodExit("SettingsStore","resetToDefaults")}async exportSettings(){s.methodEntry("SettingsStore","exportSettings");let e=await this.load();return s.methodExit("SettingsStore","exportSettings"),e}async importSettings(e){if(s.methodEntry("SettingsStore","importSettings"),!this.validate(e))throw new U("Invalid import settings",this.filePath);await this.save(e),s.methodExit("SettingsStore","importSettings")}async loadWithMigration(){s.methodEntry("SettingsStore","loadWithMigration");let e=await this.load(),t={...this.getDefaultValue(),...e,defaultPlaybackSettings:{...ce.defaultPlaybackSettings,...e.defaultPlaybackSettings}};return JSON.stringify(e)!==JSON.stringify(t)&&(s.info("Migrating settings to current version"),await this.save(t)),s.methodExit("SettingsStore","loadWithMigration"),t}};var Re=class extends le{constructor(e,t,r=36e5){let i=t.getStructure().cacheFeed;super(e,t,i),this.defaultTTL=r}validate(e){if(!Array.isArray(e))return s.warn("Invalid feed cache data: not an array"),!1;for(let t of e)if(!this.validateEntry(t))return s.warn("Invalid feed cache entry",t),!1;return!0}validateEntry(e){if(!e||typeof e!="object")return!1;let t=["data","cachedAt","expiresAt","url","feedUrl"];for(let r of t)if(!(r in e))return s.warn(`Missing required field in cache entry: ${r}`),!1;return!0}getDefaultValue(){return[]}async loadAllItems(){let e=await this.listItemIds(),t=[];for(let r of e)try{let i=await this.loadItem(r,null);i&&this.validateEntry(i)&&t.push(i)}catch(i){s.warn(`Failed to load cache entry: ${r}`,i)}return t}async load(){s.methodEntry("FeedCacheStore","load");let e=await this.loadAllItems();return s.methodExit("FeedCacheStore","load"),e}async save(e){if(s.methodEntry("FeedCacheStore","save"),!this.validate(e))throw new U("Invalid feed cache data",this.dirPath);await this.clear();for(let t of e){let r=this.getFeedCacheId(t.feedUrl);await this.saveItem(r,t)}s.methodExit("FeedCacheStore","save")}getFeedCacheId(e){let t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);t=(t<<5)-t+i,t=t&t}return`feed-${Math.abs(t).toString(36)}`}async getCacheEntry(e){s.methodEntry("FeedCacheStore","getCacheEntry",e);let t=this.getFeedCacheId(e);try{let r=await this.loadItem(t,null);if(!r||!this.validateEntry(r))return s.methodExit("FeedCacheStore","getCacheEntry","invalid entry"),null;let i=new Date,o=new Date(r.expiresAt);return i>o?(s.debug("Cache entry expired",e),await this.deleteItem(t),s.methodExit("FeedCacheStore","getCacheEntry","expired"),null):(s.methodExit("FeedCacheStore","getCacheEntry"),r)}catch(r){return s.warn("Failed to get cache entry",r),s.methodExit("FeedCacheStore","getCacheEntry","error"),null}}async setCacheEntry(e,t,r=this.defaultTTL,i){s.methodEntry("FeedCacheStore","setCacheEntry",e);let o=new Date,n=new Date(o.getTime()+r),a={data:t,cachedAt:o,expiresAt:n,url:e,feedUrl:e,etag:i==null?void 0:i.etag,lastModified:i==null?void 0:i.lastModified},p=this.getFeedCacheId(e);await this.saveItem(p,a),s.methodExit("FeedCacheStore","setCacheEntry")}async removeCacheEntry(e){s.methodEntry("FeedCacheStore","removeCacheEntry",e);let t=this.getFeedCacheId(e);await this.deleteItem(t),s.methodExit("FeedCacheStore","removeCacheEntry")}async cleanupExpired(){s.methodEntry("FeedCacheStore","cleanupExpired");let e=await this.loadAllItems(),t=new Date,r=0;for(let i of e){let o=new Date(i.expiresAt);if(t>o){let n=this.getFeedCacheId(i.feedUrl);await this.deleteItem(n),r++}}s.info(`Cleaned up ${r} expired cache entries`),s.methodExit("FeedCacheStore","cleanupExpired")}async getCacheStats(){let e=await this.loadAllItems(),t=new Date,r=0,i=0;for(let o of e){let n=new Date(o.expiresAt);t>n&&r++,i+=o.data.length}return{totalEntries:e.length,expiredEntries:r,totalSize:i}}},it=class it{constructor(e,t){this.vault=e,this.pathManager=t,this.indexFilePath=t.getFilePath("cache","image-index.json")}async loadIndex(){try{let e=this.vault.adapter;if(!await e.exists(this.indexFilePath))return this.getDefaultIndex();let t=await e.read(this.indexFilePath),r=JSON.parse(t);return this.validateIndex(r)?r:(s.warn("Invalid image cache index, using default"),this.getDefaultIndex())}catch(e){return s.error("Failed to load image cache index",e),this.getDefaultIndex()}}async saveIndex(e){try{let t=JSON.stringify(e,null,2);await this.vault.adapter.write(this.indexFilePath,t)}catch(t){throw s.error("Failed to save image cache index",t),new U("Failed to save image cache index",this.indexFilePath)}}validateIndex(e){return!(!e||typeof e!="object"||!Array.isArray(e.images)||typeof e.version!="number")}getDefaultIndex(){return{images:[],version:it.CURRENT_VERSION}}getImageCacheFilename(e){let t="jpg";try{let n=new URL(e).pathname.match(/\.([a-zA-Z0-9]+)$/);n&&(t=n[1].toLowerCase())}catch(i){}let r=0;for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);r=(r<<5)-r+o,r=r&r}return`image-${Math.abs(r).toString(36)}.${t}`}async getCachedImage(e){s.methodEntry("ImageCacheStore","getCachedImage",e);let r=(await this.loadIndex()).images.find(o=>o.imageUrl===e);return r?await this.vault.adapter.exists(r.localPath)?(s.methodExit("ImageCacheStore","getCachedImage"),r.localPath):(s.warn("Cached image file not found",r.localPath),await this.removeCachedImage(e),s.methodExit("ImageCacheStore","getCachedImage","file missing"),null):(s.methodExit("ImageCacheStore","getCachedImage","not found"),null)}async cacheImage(e,t){s.methodEntry("ImageCacheStore","cacheImage",e);let r=this.getImageCacheFilename(e),i=this.pathManager.getFilePath("cacheImages",r);await this.vault.adapter.writeBinary(i,t);let o=await this.loadIndex();o.images=o.images.filter(a=>a.imageUrl!==e);let n={imageUrl:e,localPath:i,cachedAt:new Date,size:t.byteLength};return o.images.push(n),await this.saveIndex(o),s.methodExit("ImageCacheStore","cacheImage"),i}async removeCachedImage(e){s.methodEntry("ImageCacheStore","removeCachedImage",e);let t=await this.loadIndex(),r=t.images.find(i=>i.imageUrl===e);if(r){try{await this.vault.adapter.remove(r.localPath)}catch(i){s.warn("Failed to delete cached image file",i)}t.images=t.images.filter(i=>i.imageUrl!==e),await this.saveIndex(t)}s.methodExit("ImageCacheStore","removeCachedImage")}async clearAll(){s.methodEntry("ImageCacheStore","clearAll");let e=await this.loadIndex();for(let t of e.images)try{await this.vault.adapter.remove(t.localPath)}catch(r){s.warn(`Failed to delete cached image: ${t.localPath}`,r)}await this.saveIndex(this.getDefaultIndex()),s.methodExit("ImageCacheStore","clearAll")}async getCacheStats(){let e=await this.loadIndex(),t=e.images.reduce((r,i)=>r+i.size,0);return{totalImages:e.images.length,totalSize:t}}async cleanupOldImages(e=100){s.methodEntry("ImageCacheStore","cleanupOldImages",`keepCount=${e}`);let t=await this.loadIndex();if(t.images.length<=e){s.methodExit("ImageCacheStore","cleanupOldImages","nothing to cleanup");return}let r=[...t.images].sort((o,n)=>{let a=new Date(o.cachedAt).getTime();return new Date(n.cachedAt).getTime()-a}),i=r.slice(e);for(let o of i)try{await this.vault.adapter.remove(o.localPath)}catch(n){s.warn(`Failed to delete old image: ${o.localPath}`,n)}t.images=r.slice(0,e),await this.saveIndex(t),s.info(`Cleaned up ${i.length} old cached images`),s.methodExit("ImageCacheStore","cleanupOldImages")}};it.CURRENT_VERSION=1;var _e=it;var Q=require("obsidian"),Ue=class extends Q.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){let{containerEl:e}=this;e.empty(),this.loadSettings(),e.createEl("h2",{text:"Podcast Player Settings"}),this.addStorageSection(e),this.addPlaybackSection(e),this.addCacheSection(e),this.addSyncSection(e),this.addNotificationSection(e),this.addAdvancedSection(e)}async loadSettings(){this.settings=this.plugin.settings}async saveSettings(){await this.plugin.saveSettings()}addStorageSection(e){e.createEl("h3",{text:"Data Storage"}),new Q.Setting(e).setName("Data folder path").setDesc("Folder where podcast data will be stored (relative to vault root)").addText(t=>t.setPlaceholder(".obsidian/plugins/podcast-player/data").setValue(this.settings.dataFolderPath).onChange(async r=>{this.settings.dataFolderPath=r,await this.saveSettings()}))}addPlaybackSection(e){e.createEl("h3",{text:"Default Playback Settings"}),e.createEl("p",{text:"These settings apply to all podcasts by default. Individual podcasts can override these.",cls:"setting-item-description"}),new Q.Setting(e).setName("Default volume").setDesc("Default playback volume (0.0 to 1.0)").addSlider(t=>t.setLimits(0,100,5).setValue(this.settings.defaultPlaybackSettings.volume*100).setDynamicTooltip().onChange(async r=>{this.settings.defaultPlaybackSettings.volume=r/100,await this.saveSettings()})),new Q.Setting(e).setName("Default playback speed").setDesc("Default playback speed (0.5x to 3.0x)").addSlider(t=>t.setLimits(50,300,5).setValue(this.settings.defaultPlaybackSettings.playbackSpeed*100).setDynamicTooltip().onChange(async r=>{this.settings.defaultPlaybackSettings.playbackSpeed=r/100,await this.saveSettings()})),new Q.Setting(e).setName("Skip intro seconds").setDesc("Number of seconds to skip at the beginning of each episode").addText(t=>t.setPlaceholder("0").setValue(String(this.settings.defaultPlaybackSettings.skipIntroSeconds)).onChange(async r=>{let i=parseInt(r,10);!isNaN(i)&&i>=0&&(this.settings.defaultPlaybackSettings.skipIntroSeconds=i,await this.saveSettings())})),new Q.Setting(e).setName("Skip outro seconds").setDesc("Number of seconds to skip at the end of each episode").addText(t=>t.setPlaceholder("0").setValue(String(this.settings.defaultPlaybackSettings.skipOutroSeconds||0)).onChange(async r=>{let i=parseInt(r,10);!isNaN(i)&&i>=0&&(this.settings.defaultPlaybackSettings.skipOutroSeconds=i,await this.saveSettings())}))}addCacheSection(e){e.createEl("h3",{text:"Download & Cache"}),new Q.Setting(e).setName("Auto download new episodes").setDesc("Automatically download new episodes when feeds are updated").addToggle(t=>t.setValue(this.settings.autoDownload).onChange(async r=>{this.settings.autoDownload=r,await this.saveSettings()})),new Q.Setting(e).setName("Maximum cached episodes").setDesc("Maximum number of episodes to keep in cache. Older episodes will be removed.").addText(t=>t.setPlaceholder("50").setValue(String(this.settings.maxCacheEpisodes)).onChange(async r=>{let i=parseInt(r,10);!isNaN(i)&&i>=0&&(this.settings.maxCacheEpisodes=i,await this.saveSettings())}))}addSyncSection(e){e.createEl("h3",{text:"Feed Sync"}),new Q.Setting(e).setName("Feed update interval").setDesc("How often to check for new episodes (in minutes)").addDropdown(t=>t.addOption("15","15 minutes").addOption("30","30 minutes").addOption("60","1 hour").addOption("120","2 hours").addOption("360","6 hours").addOption("720","12 hours").addOption("1440","24 hours").setValue(String(this.settings.feedUpdateInterval)).onChange(async r=>{this.settings.feedUpdateInterval=parseInt(r,10),await this.saveSettings()}))}addNotificationSection(e){e.createEl("h3",{text:"Notifications"}),new Q.Setting(e).setName("Enable notifications").setDesc("Show notifications for new episodes and playback events").addToggle(t=>t.setValue(this.settings.enableNotifications).onChange(async r=>{this.settings.enableNotifications=r,await this.saveSettings()}))}addAdvancedSection(e){e.createEl("h3",{text:"Advanced"}),new Q.Setting(e).setName("Reset to defaults").setDesc("Reset all settings to their default values").addButton(t=>t.setButtonText("Reset").setWarning().onClick(async()=>{confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(await this.plugin.resetSettings(),this.display(),new Q.Notice("Settings reset to defaults"))})),new Q.Setting(e).setName("Export settings").setDesc("Export your settings to a JSON file for backup or sharing").addButton(t=>t.setButtonText("Export").onClick(async()=>{await this.exportSettings()})),new Q.Setting(e).setName("Import settings").setDesc("Import settings from a JSON file").addButton(t=>t.setButtonText("Import").onClick(async()=>{await this.importSettings()}))}async exportSettings(){try{let e=JSON.stringify(this.settings,null,2),t=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=`podcast-player-settings-${Date.now()}.json`,i.click(),URL.revokeObjectURL(r),new Q.Notice("Settings exported successfully")}catch(e){console.error("Failed to export settings:",e),new Q.Notice("Failed to export settings")}}async importSettings(){let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async t=>{var o;let i=(o=t.target.files)==null?void 0:o[0];if(i)try{let n=await i.text(),a=JSON.parse(n);if(!a.dataFolderPath||!a.defaultPlaybackSettings)throw new Error("Invalid settings file format");this.settings=a,await this.saveSettings(),this.display(),new Q.Notice("Settings imported successfully")}catch(n){console.error("Failed to import settings:",n),new Q.Notice("Failed to import settings: Invalid file format")}},e.click()}};var lr=require("obsidian"),Ee="podcast-player-view",Ve=class extends lr.ItemView{constructor(t,r){super(t);this.updateInterval=null;this.plugin=r}getViewType(){return Ee}getDisplayText(){return"Podcast Player"}getIcon(){return"podcast"}async onOpen(){let t=this.containerEl.children[1];t.empty(),t.addClass("podcast-player-view"),this.playerContentEl=t.createDiv({cls:"podcast-player-content"}),this.renderPlayer(),this.startUpdateInterval()}async onClose(){this.stopUpdateInterval()}renderPlayer(){this.playerContentEl.empty();let t=this.playerContentEl.createDiv({cls:"player-container"});this.renderEpisodeInfo(t),this.renderPlaybackControls(t),this.renderProgressSection(t),this.renderAdvancedControls(t)}renderEpisodeInfo(t){let r=t.createDiv({cls:"episode-info-section"}),i=r.createEl("h3",{text:"No episode playing",cls:"episode-title"}),o=r.createEl("p",{text:"Select a podcast to start",cls:"podcast-name"});r.createDiv({cls:"episode-metadata"}).createSpan({text:"--:--",cls:"episode-duration"})}renderPlaybackControls(t){let r=t.createDiv({cls:"playback-controls-section"}),i=r.createEl("button",{cls:"player-button player-button-prev",attr:{"aria-label":"Previous episode"}});i.innerHTML="\u23EE",i.addEventListener("click",()=>this.handlePrevious());let o=r.createEl("button",{cls:"player-button player-button-skip-back",attr:{"aria-label":"Skip backward 15s"}});o.innerHTML="\u23EA",o.addEventListener("click",()=>this.handleSkipBackward());let n=r.createEl("button",{cls:"player-button player-button-play-pause",attr:{"aria-label":"Play/Pause"}});n.innerHTML="\u25B6\uFE0F",n.addEventListener("click",()=>this.handlePlayPause());let a=r.createEl("button",{cls:"player-button player-button-skip-forward",attr:{"aria-label":"Skip forward 30s"}});a.innerHTML="\u23E9",a.addEventListener("click",()=>this.handleSkipForward());let p=r.createEl("button",{cls:"player-button player-button-next",attr:{"aria-label":"Next episode"}});p.innerHTML="\u23ED",p.addEventListener("click",()=>this.handleNext())}renderProgressSection(t){let r=t.createDiv({cls:"progress-section"}),i=r.createDiv({cls:"time-display"});i.createSpan({text:"0:00",cls:"current-time"}),i.createSpan({text:" / ",cls:"time-separator"}),i.createSpan({text:"0:00",cls:"total-time"});let n=r.createDiv({cls:"progress-bar-container"}).createDiv({cls:"progress-bar"}),a=n.createDiv({cls:"progress-fill"});a.style.width="0%",n.addEventListener("click",p=>this.handleSeek(p,n))}renderAdvancedControls(t){let r=t.createDiv({cls:"advanced-controls-section"}),i=r.createDiv({cls:"volume-control"});i.createSpan({text:"\u{1F50A}",cls:"volume-icon"}),i.createEl("input",{type:"range",cls:"volume-slider",attr:{min:"0",max:"100",value:"100"}}).addEventListener("input",p=>{let E=p.target;this.handleVolumeChange(parseInt(E.value))});let n=r.createDiv({cls:"speed-control"});n.createSpan({text:"Speed:",cls:"speed-label"}),n.createEl("button",{text:"1.0x",cls:"speed-button"}).addEventListener("click",()=>this.handleSpeedChange())}handlePlayPause(){console.log("Play/Pause clicked")}handlePrevious(){console.log("Previous episode clicked")}handleNext(){console.log("Next episode clicked")}handleSkipBackward(){console.log("Skip backward clicked")}handleSkipForward(){console.log("Skip forward clicked")}handleSeek(t,r){let i=r.getBoundingClientRect(),n=(t.clientX-i.left)/i.width*100;console.log(`Seek to ${n.toFixed(2)}%`)}handleVolumeChange(t){console.log(`Volume changed to ${t}%`)}handleSpeedChange(){console.log("Speed change clicked")}startUpdateInterval(){this.updateInterval=window.setInterval(()=>{this.updatePlayerState()},1e3)}stopUpdateInterval(){this.updateInterval!==null&&(window.clearInterval(this.updateInterval),this.updateInterval=null)}updatePlayerState(){}formatTime(t){let r=Math.floor(t/3600),i=Math.floor(t%3600/60),o=Math.floor(t%60);return r>0?`${r}:${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${i}:${o.toString().padStart(2,"0")}`}};var ie=require("obsidian"),we="podcast-sidebar-view",Be=class extends ie.ItemView{constructor(t,r){super(t);this.selectedPodcast=null;this.plugin=r}getViewType(){return we}getDisplayText(){return"Podcasts"}getIcon(){return"podcast"}async onOpen(){let t=this.containerEl.children[1];t.empty(),t.addClass("podcast-sidebar-view"),this.sidebarContentEl=t.createDiv({cls:"podcast-sidebar-content"}),await this.render()}async onClose(){}async render(){this.sidebarContentEl.empty(),this.renderHeader(),this.selectedPodcast?await this.renderEpisodeList():await this.renderPodcastList()}renderHeader(){let t=this.sidebarContentEl.createDiv({cls:"sidebar-header"});if(this.selectedPodcast){let o=t.createEl("button",{cls:"sidebar-back-button",attr:{"aria-label":"Back to podcasts"}});o.innerHTML="\u2190 Back",o.addEventListener("click",()=>{this.selectedPodcast=null,this.render()})}let r=t.createEl("h2",{text:this.selectedPodcast?this.selectedPodcast.title:"My Podcasts",cls:"sidebar-title"}),i=t.createDiv({cls:"sidebar-actions"});if(this.selectedPodcast){let o=i.createEl("button",{cls:"sidebar-action-button",attr:{"aria-label":"Podcast settings"}});o.innerHTML="\u2699\uFE0F",o.addEventListener("click",()=>this.handlePodcastSettings())}else{let o=i.createEl("button",{cls:"sidebar-action-button",attr:{"aria-label":"Subscribe to podcast"}});o.innerHTML="\u2795",o.addEventListener("click",()=>this.handleAddPodcast());let n=i.createEl("button",{cls:"sidebar-action-button",attr:{"aria-label":"Refresh feeds"}});n.innerHTML="\u{1F504}",n.addEventListener("click",()=>this.handleRefreshFeeds())}}async renderPodcastList(){let t=this.sidebarContentEl.createDiv({cls:"podcast-list-container"}),r=await this.loadPodcasts();if(r.length===0){let i=t.createDiv({cls:"empty-state"});i.createEl("p",{text:"No podcasts yet"}),i.createEl("p",{text:"Click the + button to subscribe to a podcast",cls:"empty-state-hint"});return}for(let i of r)this.renderPodcastItem(t,i)}renderPodcastItem(t,r){var a;let i=t.createDiv({cls:"podcast-item"});if(r.imageUrl){let p=i.createEl("img",{cls:"podcast-image",attr:{src:r.imageUrl,alt:r.title}})}else{let p=i.createDiv({cls:"podcast-image-placeholder"});p.innerHTML="\u{1F399}\uFE0F"}let o=i.createDiv({cls:"podcast-info"});o.createEl("h3",{text:r.title,cls:"podcast-title"}),o.createEl("p",{text:r.author,cls:"podcast-author"});let n=((a=r.episodes)==null?void 0:a.length)||0;o.createSpan({text:`${n} episodes`,cls:"podcast-episode-count"}),i.addEventListener("click",()=>{this.selectedPodcast=r,this.render()}),i.addEventListener("contextmenu",p=>{p.preventDefault(),this.showPodcastContextMenu(r,p)})}async renderEpisodeList(){if(!this.selectedPodcast)return;let t=this.sidebarContentEl.createDiv({cls:"episode-list-container"}),r=this.selectedPodcast.episodes||[];if(r.length===0){let i=t.createDiv({cls:"empty-state"});i.createEl("p",{text:"No episodes available"}),i.createEl("p",{text:"Try refreshing the feed",cls:"empty-state-hint"});return}for(let i of r)this.renderEpisodeItem(t,i)}renderEpisodeItem(t,r){let i=t.createDiv({cls:"episode-item"}),o=i.createDiv({cls:"episode-info"});o.createEl("h4",{text:r.title,cls:"episode-title"});let n=o.createDiv({cls:"episode-metadata"}),a=new Date(r.publishDate);n.createSpan({text:a.toLocaleDateString(),cls:"episode-date"}),r.duration&&n.createSpan({text:` \u2022 ${this.formatDuration(r.duration)}`,cls:"episode-duration"});let p=i.createEl("button",{cls:"episode-play-button",attr:{"aria-label":"Play episode"}});p.innerHTML="\u25B6\uFE0F",p.addEventListener("click",E=>{E.stopPropagation(),this.handlePlayEpisode(r)}),i.addEventListener("click",()=>{this.handleEpisodeClick(r)}),i.addEventListener("contextmenu",E=>{E.preventDefault(),this.showEpisodeContextMenu(r,E)})}async handleAddPodcast(){console.log("Add podcast clicked")}async handleRefreshFeeds(){try{let t=this.plugin.getFeedSyncManager(),r=new ie.Notice("Refreshing feeds...",0),i=await t.syncAll();r.hide(),new ie.Notice(`Refreshed ${i.successCount} feeds. ${i.failureCount} failed.`),await this.render()}catch(t){console.error("Failed to refresh feeds:",t),new ie.Notice("Failed to refresh feeds")}}handlePodcastSettings(){console.log("Podcast settings clicked")}async handlePlayEpisode(t){try{await this.plugin.playerController.loadEpisode(t,!0,!0),new ie.Notice(`Now playing: ${t.title}`)}catch(r){console.error("Failed to play episode:",r),new ie.Notice("Failed to start playback")}}handleEpisodeClick(t){console.log("Episode clicked:",t.title)}showPodcastContextMenu(t,r){let i=new ie.Menu;i.addItem(o=>o.setTitle("View Episodes").setIcon("list").onClick(()=>{this.selectedPodcast=t,this.render()})),i.addItem(o=>o.setTitle("Refresh Feed").setIcon("refresh-cw").onClick(()=>{console.log("Refresh feed:",t.title)})),i.addSeparator(),i.addItem(o=>o.setTitle("Unsubscribe").setIcon("trash").onClick(()=>{console.log("Unsubscribe:",t.title)})),i.showAtMouseEvent(r)}showEpisodeContextMenu(t,r){let i=new ie.Menu;i.addItem(o=>o.setTitle("Play").setIcon("play").onClick(()=>this.handlePlayEpisode(t))),i.addItem(o=>o.setTitle("Add to Queue").setIcon("list-plus").onClick(()=>{console.log("Add to queue:",t.title)})),i.addItem(o=>o.setTitle("Add to Playlist").setIcon("folder-plus").onClick(()=>{console.log("Add to playlist:",t.title)})),i.addSeparator(),i.addItem(o=>o.setTitle("Export to Note").setIcon("file-text").onClick(()=>{console.log("Export to note:",t.title)})),i.showAtMouseEvent(r)}formatDuration(t){let r=Math.floor(t/3600),i=Math.floor(t%3600/60);return r>0?`${r}h ${i}m`:`${i}m`}async loadPodcasts(){try{return await this.plugin.getSubscriptionStore().getAllPodcasts()}catch(t){return console.error("Failed to load podcasts:",t),[]}}async refresh(){await this.render()}};var je=class extends le{constructor(e,t){let r=t.getStructure().playlists;super(e,t,r)}validate(e){if(!Array.isArray(e))return s.warn("Invalid playlist data: not an array"),!1;for(let t of e)if(!this.validatePlaylist(t))return s.warn("Invalid playlist",t),!1;return!0}validatePlaylist(e){if(!e||typeof e!="object")return!1;let t=["id","name","episodeIds","createdAt","updatedAt"];for(let r of t)if(!(r in e))return s.warn(`Missing required field in playlist: ${r}`),!1;return Array.isArray(e.episodeIds)?!0:(s.warn("Playlist episodeIds is not an array"),!1)}getDefaultValue(){return[]}async loadAllItems(){let e=await this.listItemIds(),t=[];for(let r of e)try{let i=await this.loadItem(r,null);i&&this.validatePlaylist(i)&&t.push(i)}catch(i){s.warn(`Failed to load playlist: ${r}`,i)}return t}async load(){s.methodEntry("PlaylistStore","load");let e=await this.loadAllItems();return s.methodExit("PlaylistStore","load"),e}async save(e){if(s.methodEntry("PlaylistStore","save"),!this.validate(e))throw new U("Invalid playlist data",this.dirPath);await this.clear();for(let t of e)await this.saveItem(t.id,t);s.methodExit("PlaylistStore","save")}async getPlaylist(e){s.methodEntry("PlaylistStore","getPlaylist",e);try{let t=await this.loadItem(e,null);return!t||!this.validatePlaylist(t)?(s.methodExit("PlaylistStore","getPlaylist","invalid"),null):(s.methodExit("PlaylistStore","getPlaylist"),t)}catch(t){return s.warn("Failed to get playlist",t),s.methodExit("PlaylistStore","getPlaylist","error"),null}}async savePlaylist(e){if(s.methodEntry("PlaylistStore","savePlaylist",e.id),!this.validatePlaylist(e))throw new U("Invalid playlist data",`${this.dirPath}/${e.id}.json`);await this.saveItem(e.id,e),s.methodExit("PlaylistStore","savePlaylist")}async deletePlaylist(e){s.methodEntry("PlaylistStore","deletePlaylist",e),await this.deleteItem(e),s.methodExit("PlaylistStore","deletePlaylist")}async exists(e){return await this.getPlaylist(e)!==null}async getAllIds(){return await this.listItemIds()}async getCount(){return(await this.listItemIds()).length}async clear(){s.methodEntry("PlaylistStore","clear");let e=await this.listItemIds();for(let t of e)await this.deleteItem(t);s.info("All playlists cleared"),s.methodExit("PlaylistStore","clear")}};var $e=class{constructor(e){this.playlistStore=e}async createPlaylist(e,t,r){s.methodEntry("PlaylistManager","createPlaylist",e);let i=this.generatePlaylistId(e),o=new Date,n={id:i,name:e,description:t,episodeIds:[],createdAt:o,updatedAt:o,imageUrl:r};return await this.playlistStore.savePlaylist(n),s.info("Playlist created",i),s.methodExit("PlaylistManager","createPlaylist"),n}async getPlaylist(e){s.methodEntry("PlaylistManager","getPlaylist",e);let t=await this.playlistStore.getPlaylist(e);return s.methodExit("PlaylistManager","getPlaylist"),t}async getAllPlaylists(){s.methodEntry("PlaylistManager","getAllPlaylists");let e=await this.playlistStore.load();return e.sort((t,r)=>r.updatedAt.getTime()-t.updatedAt.getTime()),s.methodExit("PlaylistManager","getAllPlaylists"),e}async updatePlaylist(e,t){s.methodEntry("PlaylistManager","updatePlaylist",e);let r=await this.playlistStore.getPlaylist(e);if(!r)throw new Error(`Playlist not found: ${e}`);let i={...r,...t,id:r.id,createdAt:r.createdAt,updatedAt:new Date};await this.playlistStore.savePlaylist(i),s.methodExit("PlaylistManager","updatePlaylist")}async deletePlaylist(e){s.methodEntry("PlaylistManager","deletePlaylist",e),await this.playlistStore.deletePlaylist(e),s.info("Playlist deleted",e),s.methodExit("PlaylistManager","deletePlaylist")}async addEpisode(e,t){s.methodEntry("PlaylistManager","addEpisode",`${e}, ${t}`);let r=await this.playlistStore.getPlaylist(e);if(!r)throw new Error(`Playlist not found: ${e}`);if(r.episodeIds.includes(t)){s.warn("Episode already in playlist",t);return}r.episodeIds.push(t),r.updatedAt=new Date,await this.playlistStore.savePlaylist(r),s.info("Episode added to playlist",t),s.methodExit("PlaylistManager","addEpisode")}async addEpisodes(e,t){s.methodEntry("PlaylistManager","addEpisodes",`${e}, count=${t.length}`);let r=await this.playlistStore.getPlaylist(e);if(!r)throw new Error(`Playlist not found: ${e}`);let i=new Set(r.episodeIds),o=t.filter(n=>!i.has(n));if(o.length===0){s.warn("No new episodes to add");return}r.episodeIds.push(...o),r.updatedAt=new Date,await this.playlistStore.savePlaylist(r),s.info(`Added ${o.length} episodes to playlist`),s.methodExit("PlaylistManager","addEpisodes")}async removeEpisode(e,t){s.methodEntry("PlaylistManager","removeEpisode",`${e}, ${t}`);let r=await this.playlistStore.getPlaylist(e);if(!r)throw new Error(`Playlist not found: ${e}`);let i=r.episodeIds.indexOf(t);if(i===-1){s.warn("Episode not found in playlist",t);return}r.episodeIds.splice(i,1),r.updatedAt=new Date,await this.playlistStore.savePlaylist(r),s.info("Episode removed from playlist",t),s.methodExit("PlaylistManager","removeEpisode")}async removeEpisodes(e,t){s.methodEntry("PlaylistManager","removeEpisodes",`${e}, count=${t.length}`);let r=await this.playlistStore.getPlaylist(e);if(!r)throw new Error(`Playlist not found: ${e}`);let i=new Set(t);r.episodeIds=r.episodeIds.filter(o=>!i.has(o)),r.updatedAt=new Date,await this.playlistStore.savePlaylist(r),s.info(`Removed ${t.length} episodes from playlist`),s.methodExit("PlaylistManager","removeEpisodes")}async reorderEpisodes(e,t){s.methodEntry("PlaylistManager","reorderEpisodes",e);let r=await this.playlistStore.getPlaylist(e);if(!r)throw new Error(`Playlist not found: ${e}`);let i=new Set(r.episodeIds);if(!t.every(n=>i.has(n)))throw new Error("Invalid episode IDs in reorder request");r.episodeIds=t,r.updatedAt=new Date,await this.playlistStore.savePlaylist(r),s.info("Playlist episodes reordered"),s.methodExit("PlaylistManager","reorderEpisodes")}async moveEpisode(e,t,r){s.methodEntry("PlaylistManager","moveEpisode",`${e}, ${t}, to=${r}`);let i=await this.playlistStore.getPlaylist(e);if(!i)throw new Error(`Playlist not found: ${e}`);let o=i.episodeIds.indexOf(t);if(o===-1)throw new Error(`Episode not found in playlist: ${t}`);i.episodeIds.splice(o,1);let n=Math.max(0,Math.min(r,i.episodeIds.length));i.episodeIds.splice(n,0,t),i.updatedAt=new Date,await this.playlistStore.savePlaylist(i),s.info("Episode moved in playlist"),s.methodExit("PlaylistManager","moveEpisode")}async clearPlaylist(e){s.methodEntry("PlaylistManager","clearPlaylist",e);let t=await this.playlistStore.getPlaylist(e);if(!t)throw new Error(`Playlist not found: ${e}`);t.episodeIds=[],t.updatedAt=new Date,await this.playlistStore.savePlaylist(t),s.info("Playlist cleared"),s.methodExit("PlaylistManager","clearPlaylist")}async getEpisodeCount(e){let t=await this.playlistStore.getPlaylist(e);return t?t.episodeIds.length:0}async hasEpisode(e,t){let r=await this.playlistStore.getPlaylist(e);return r?r.episodeIds.includes(t):!1}async searchPlaylists(e){s.methodEntry("PlaylistManager","searchPlaylists",e);let t=await this.getAllPlaylists(),r=e.toLowerCase(),i=t.filter(o=>{var p;let n=o.name.toLowerCase().includes(r),a=(p=o.description)==null?void 0:p.toLowerCase().includes(r);return n||a});return s.methodExit("PlaylistManager","searchPlaylists",`results=${i.length}`),i}async duplicatePlaylist(e,t){s.methodEntry("PlaylistManager","duplicatePlaylist",e);let r=await this.playlistStore.getPlaylist(e);if(!r)throw new Error(`Playlist not found: ${e}`);let i=t||`${r.name} (Copy)`,o=await this.createPlaylist(i,r.description,r.imageUrl);return o.episodeIds=[...r.episodeIds],await this.playlistStore.savePlaylist(o),s.info("Playlist duplicated",o.id),s.methodExit("PlaylistManager","duplicatePlaylist"),o}async mergePlaylists(e,t){s.methodEntry("PlaylistManager","mergePlaylists",`count=${e.length}`);let r=[];for(let n of e){let a=await this.playlistStore.getPlaylist(n);a&&r.push(...a.episodeIds)}let i=Array.from(new Set(r)),o=await this.createPlaylist(t);return o.episodeIds=i,await this.playlistStore.savePlaylist(o),s.info("Playlists merged",o.id),s.methodExit("PlaylistManager","mergePlaylists"),o}async getPlaylistCount(){return await this.playlistStore.getCount()}generatePlaylistId(e){let t=Date.now(),r=Math.random().toString(36).substring(2,8);return`playlist-${t}-${r}`}async exportPlaylist(e){let t=await this.playlistStore.getPlaylist(e);if(!t)throw new Error(`Playlist not found: ${e}`);return t}async importPlaylist(e){return s.methodEntry("PlaylistManager","importPlaylist",e.id),await this.playlistStore.exists(e.id)&&(e.id=this.generatePlaylistId(e.name)),await this.playlistStore.savePlaylist(e),s.info("Playlist imported",e.id),s.methodExit("PlaylistManager","importPlaylist"),e}};var Qe=class extends le{constructor(e,t){let r=t.getStructure().queues;super(e,t,r)}validate(e){if(!Array.isArray(e))return s.warn("Invalid queue data: not an array"),!1;for(let t of e)if(!this.validateQueue(t))return s.warn("Invalid queue",t),!1;return!0}validateQueue(e){if(!e||typeof e!="object")return!1;let t=["id","name","episodeIds","currentIndex","autoPlayNext","shuffle","repeat","createdAt","updatedAt"];for(let r of t)if(!(r in e))return s.warn(`Missing required field in queue: ${r}`),!1;return Array.isArray(e.episodeIds)?typeof e.currentIndex!="number"?(s.warn("Queue currentIndex is not a number"),!1):typeof e.autoPlayNext!="boolean"?(s.warn("Queue autoPlayNext is not a boolean"),!1):typeof e.shuffle!="boolean"?(s.warn("Queue shuffle is not a boolean"),!1):["none","one","all"].includes(e.repeat)?!0:(s.warn("Queue repeat has invalid value"),!1):(s.warn("Queue episodeIds is not an array"),!1)}getDefaultValue(){return[]}async loadAllItems(){let e=await this.listItemIds(),t=[];for(let r of e)try{let i=await this.loadItem(r,null);i&&this.validateQueue(i)&&t.push(i)}catch(i){s.warn(`Failed to load queue: ${r}`,i)}return t}async load(){s.methodEntry("QueueStore","load");let e=await this.loadAllItems();return s.methodExit("QueueStore","load"),e}async save(e){if(s.methodEntry("QueueStore","save"),!this.validate(e))throw new U("Invalid queue data",this.dirPath);await this.clear();for(let t of e)await this.saveItem(t.id,t);s.methodExit("QueueStore","save")}async getQueue(e){s.methodEntry("QueueStore","getQueue",e);try{let t=await this.loadItem(e,null);return!t||!this.validateQueue(t)?(s.methodExit("QueueStore","getQueue","invalid"),null):(s.methodExit("QueueStore","getQueue"),t)}catch(t){return s.warn("Failed to get queue",t),s.methodExit("QueueStore","getQueue","error"),null}}async saveQueue(e){if(s.methodEntry("QueueStore","saveQueue",e.id),!this.validateQueue(e))throw new U("Invalid queue data",`${this.dirPath}/${e.id}.json`);await this.saveItem(e.id,e),s.methodExit("QueueStore","saveQueue")}async deleteQueue(e){s.methodEntry("QueueStore","deleteQueue",e),await this.deleteItem(e),s.methodExit("QueueStore","deleteQueue")}async exists(e){return await this.getQueue(e)!==null}async getAllIds(){return await this.listItemIds()}async getCount(){return(await this.listItemIds()).length}async clear(){s.methodEntry("QueueStore","clear");let e=await this.listItemIds();for(let t of e)await this.deleteItem(t);s.info("All queues cleared"),s.methodExit("QueueStore","clear")}};var Xe=class{constructor(e){this.currentQueueId=null;this.queueStore=e}async createQueue(e){s.methodEntry("QueueManager","createQueue",e);let t=this.generateQueueId(e),r=new Date,i={id:t,name:e,episodeIds:[],currentIndex:0,autoPlayNext:!0,shuffle:!1,repeat:"none",createdAt:r,updatedAt:r};return await this.queueStore.saveQueue(i),s.info("Queue created",t),s.methodExit("QueueManager","createQueue"),i}async getQueue(e){s.methodEntry("QueueManager","getQueue",e);let t=await this.queueStore.getQueue(e);return s.methodExit("QueueManager","getQueue"),t}async getAllQueues(){s.methodEntry("QueueManager","getAllQueues");let e=await this.queueStore.load();return e.sort((t,r)=>r.updatedAt.getTime()-t.updatedAt.getTime()),s.methodExit("QueueManager","getAllQueues"),e}async updateQueue(e,t){s.methodEntry("QueueManager","updateQueue",e);let r=await this.queueStore.getQueue(e);if(!r)throw new Error(`Queue not found: ${e}`);let i={...r,...t,id:r.id,createdAt:r.createdAt,updatedAt:new Date};await this.queueStore.saveQueue(i),s.methodExit("QueueManager","updateQueue")}async deleteQueue(e){s.methodEntry("QueueManager","deleteQueue",e),await this.queueStore.deleteQueue(e),this.currentQueueId===e&&(this.currentQueueId=null),s.info("Queue deleted",e),s.methodExit("QueueManager","deleteQueue")}setCurrentQueue(e){s.methodEntry("QueueManager","setCurrentQueue",e),this.currentQueueId=e,s.methodExit("QueueManager","setCurrentQueue")}async getCurrentQueue(){return this.currentQueueId?await this.getQueue(this.currentQueueId):null}async addEpisode(e,t){s.methodEntry("QueueManager","addEpisode",`${e}, ${t}`);let r=await this.queueStore.getQueue(e);if(!r)throw new Error(`Queue not found: ${e}`);r.episodeIds.push(t),r.updatedAt=new Date,await this.queueStore.saveQueue(r),s.info("Episode added to queue",t),s.methodExit("QueueManager","addEpisode")}async addEpisodes(e,t){s.methodEntry("QueueManager","addEpisodes",`${e}, count=${t.length}`);let r=await this.queueStore.getQueue(e);if(!r)throw new Error(`Queue not found: ${e}`);r.episodeIds.push(...t),r.updatedAt=new Date,await this.queueStore.saveQueue(r),s.info(`Added ${t.length} episodes to queue`),s.methodExit("QueueManager","addEpisodes")}async insertEpisode(e,t,r){s.methodEntry("QueueManager","insertEpisode",`${e}, ${t}, index=${r}`);let i=await this.queueStore.getQueue(e);if(!i)throw new Error(`Queue not found: ${e}`);let o=Math.max(0,Math.min(r,i.episodeIds.length));i.episodeIds.splice(o,0,t),i.updatedAt=new Date,await this.queueStore.saveQueue(i),s.info("Episode inserted into queue",t),s.methodExit("QueueManager","insertEpisode")}async removeEpisode(e,t){s.methodEntry("QueueManager","removeEpisode",`${e}, ${t}`);let r=await this.queueStore.getQueue(e);if(!r)throw new Error(`Queue not found: ${e}`);let i=r.episodeIds.indexOf(t);if(i===-1){s.warn("Episode not found in queue",t);return}r.episodeIds.splice(i,1),i<r.currentIndex?r.currentIndex=Math.max(0,r.currentIndex-1):i===r.currentIndex&&(r.currentIndex=Math.min(r.currentIndex,r.episodeIds.length-1)),r.updatedAt=new Date,await this.queueStore.saveQueue(r),s.info("Episode removed from queue",t),s.methodExit("QueueManager","removeEpisode")}async clearQueue(e){s.methodEntry("QueueManager","clearQueue",e);let t=await this.queueStore.getQueue(e);if(!t)throw new Error(`Queue not found: ${e}`);t.episodeIds=[],t.currentIndex=0,t.updatedAt=new Date,await this.queueStore.saveQueue(t),s.info("Queue cleared"),s.methodExit("QueueManager","clearQueue")}async getCurrentEpisodeId(e){let t=await this.queueStore.getQueue(e);return!t||t.episodeIds.length===0||t.currentIndex<0||t.currentIndex>=t.episodeIds.length?null:t.episodeIds[t.currentIndex]}async next(e){s.methodEntry("QueueManager","next",e);let t=await this.queueStore.getQueue(e);if(!t||t.episodeIds.length===0)return s.methodExit("QueueManager","next","no queue or empty"),null;if(t.repeat==="one")return s.methodExit("QueueManager","next","repeat one"),t.episodeIds[t.currentIndex];if(t.currentIndex++,t.currentIndex>=t.episodeIds.length)if(t.repeat==="all")t.currentIndex=0;else return t.currentIndex=t.episodeIds.length-1,await this.queueStore.saveQueue(t),s.methodExit("QueueManager","next","end of queue"),null;t.updatedAt=new Date,await this.queueStore.saveQueue(t);let r=t.episodeIds[t.currentIndex];return s.info("Moved to next episode",r),s.methodExit("QueueManager","next"),r}async previous(e){s.methodEntry("QueueManager","previous",e);let t=await this.queueStore.getQueue(e);if(!t||t.episodeIds.length===0)return s.methodExit("QueueManager","previous","no queue or empty"),null;if(t.repeat==="one")return s.methodExit("QueueManager","previous","repeat one"),t.episodeIds[t.currentIndex];t.currentIndex--,t.currentIndex<0&&(t.repeat==="all"?t.currentIndex=t.episodeIds.length-1:t.currentIndex=0),t.updatedAt=new Date,await this.queueStore.saveQueue(t);let r=t.episodeIds[t.currentIndex];return s.info("Moved to previous episode",r),s.methodExit("QueueManager","previous"),r}async jumpTo(e,t){s.methodEntry("QueueManager","jumpTo",`${e}, index=${t}`);let r=await this.queueStore.getQueue(e);if(!r||r.episodeIds.length===0)return s.methodExit("QueueManager","jumpTo","no queue or empty"),null;if(t<0||t>=r.episodeIds.length)return s.warn("Invalid index",t),s.methodExit("QueueManager","jumpTo","invalid index"),null;r.currentIndex=t,r.updatedAt=new Date,await this.queueStore.saveQueue(r);let i=r.episodeIds[r.currentIndex];return s.info("Jumped to episode",i),s.methodExit("QueueManager","jumpTo"),i}async toggleShuffle(e){s.methodEntry("QueueManager","toggleShuffle",e);let t=await this.queueStore.getQueue(e);if(!t)throw new Error(`Queue not found: ${e}`);if(t.shuffle=!t.shuffle,t.updatedAt=new Date,t.shuffle&&t.episodeIds.length>0){let r=t.episodeIds[t.currentIndex];this.shuffleArray(t.episodeIds),t.currentIndex=t.episodeIds.indexOf(r)}return await this.queueStore.saveQueue(t),s.info("Shuffle toggled",t.shuffle),s.methodExit("QueueManager","toggleShuffle"),t.shuffle}async setRepeat(e,t){s.methodEntry("QueueManager","setRepeat",`${e}, ${t}`);let r=await this.queueStore.getQueue(e);if(!r)throw new Error(`Queue not found: ${e}`);r.repeat=t,r.updatedAt=new Date,await this.queueStore.saveQueue(r),s.info("Repeat mode set",t),s.methodExit("QueueManager","setRepeat")}async cycleRepeat(e){let t=await this.queueStore.getQueue(e);if(!t)throw new Error(`Queue not found: ${e}`);let r=t.repeat==="none"?"one":t.repeat==="one"?"all":"none";return await this.setRepeat(e,r),r}async setAutoPlayNext(e,t){s.methodEntry("QueueManager","setAutoPlayNext",`${e}, ${t}`);let r=await this.queueStore.getQueue(e);if(!r)throw new Error(`Queue not found: ${e}`);r.autoPlayNext=t,r.updatedAt=new Date,await this.queueStore.saveQueue(r),s.info("Auto play next set",t),s.methodExit("QueueManager","setAutoPlayNext")}async getEpisodeCount(e){let t=await this.queueStore.getQueue(e);return t?t.episodeIds.length:0}async hasNext(e){let t=await this.queueStore.getQueue(e);return!t||t.episodeIds.length===0?!1:t.repeat!=="none"?!0:t.currentIndex<t.episodeIds.length-1}async hasPrevious(e){let t=await this.queueStore.getQueue(e);return!t||t.episodeIds.length===0?!1:t.repeat==="all"?!0:t.currentIndex>0}async getQueueCount(){return await this.queueStore.getCount()}generateQueueId(e){let t=Date.now(),r=Math.random().toString(36).substring(2,8);return`queue-${t}-${r}`}shuffleArray(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}}};var ns=er(zt());var xe=class{constructor(){this.parser=new ns.default({customFields:{feed:["itunes:image","itunes:author","itunes:summary","itunes:category","itunes:owner"],item:["itunes:image","itunes:duration","itunes:episode","itunes:season","itunes:episodeType","itunes:author","itunes:summary"]}})}async parseFromString(e,t){s.methodEntry("RSSParser","parseFromString",t);try{let r=await this.parser.parseString(e),i=this.extractPodcastData(r,t),o=this.extractEpisodesData(r,i.id);return s.info(`Parsed RSS feed: ${i.title}, ${o.length} episodes`),s.methodExit("RSSParser","parseFromString"),{podcast:i,episodes:o}}catch(r){throw s.error("Failed to parse RSS feed",r),new se("Failed to parse RSS feed",t,r)}}async parseFromUrl(e){s.methodEntry("RSSParser","parseFromUrl",e);try{let t=await this.parser.parseURL(e),r=this.extractPodcastData(t,e),i=this.extractEpisodesData(t,r.id);return s.info(`Parsed RSS feed: ${r.title}, ${i.length} episodes`),s.methodExit("RSSParser","parseFromUrl"),{podcast:r,episodes:i}}catch(t){throw s.error("Failed to parse RSS feed from URL",t),new se("Failed to parse RSS feed from URL",e,t)}}extractPodcastData(e,t){var w,f,y,C,M,x,F,m,d,u,P,v,g,A,b,I;let r=this.generatePodcastId(t),i=((w=e.title)==null?void 0:w.trim())||"Untitled Podcast",o=((y=(f=e.itunes)==null?void 0:f.author)==null?void 0:y.trim())||((x=(M=(C=e.itunes)==null?void 0:C.owner)==null?void 0:M.name)==null?void 0:x.trim())||"Unknown Author",n=((m=(F=e.itunes)==null?void 0:F.summary)==null?void 0:m.trim())||((d=e.description)==null?void 0:d.trim())||"No description available",a;typeof((u=e.itunes)==null?void 0:u.image)=="string"?a=e.itunes.image:(P=e.itunes)!=null&&P.image&&typeof e.itunes.image=="object"&&"href"in e.itunes.image?a=e.itunes.image.href:(v=e.image)!=null&&v.url&&(a=e.image.url);let p=(g=e.link)==null?void 0:g.trim(),E=(b=(A=e.itunes)==null?void 0:A.categories)==null?void 0:b.filter(L=>typeof L=="string"),T=(I=e.language)==null?void 0:I.trim();return{id:r,title:i,author:o,description:n,feedUrl:t,imageUrl:a,websiteUrl:p,categories:E,language:T,subscribedAt:new Date,lastFetchedAt:new Date}}extractEpisodesData(e,t){if(!e.items||e.items.length===0)return s.warn("No episodes found in RSS feed"),[];let r=[];for(let i of e.items)try{let o=this.extractEpisodeData(i,t);o&&r.push(o)}catch(o){s.warn("Failed to parse episode, skipping",o)}return r}extractEpisodeData(e,t){var M,x,F,m,d,u,P,v,g,A,b,I,L,O;if(!((M=e.enclosure)!=null&&M.url))return s.warn("Episode missing audio URL, skipping"),null;let r=e.enclosure.url.trim(),i=this.generateEpisodeId(e.guid||r),o=((x=e.title)==null?void 0:x.trim())||"Untitled Episode",n=((m=(F=e.itunes)==null?void 0:F.summary)==null?void 0:m.trim())||((d=e.content)==null?void 0:d.trim())||((u=e.description)==null?void 0:u.trim())||"No description available",a=this.parseDuration((P=e.itunes)==null?void 0:P.duration),p=e.pubDate?new Date(e.pubDate):new Date,E=(v=e.itunes)!=null&&v.episode?parseInt(e.itunes.episode,10):void 0,T=(g=e.itunes)!=null&&g.season?parseInt(e.itunes.season,10):void 0,S;if((A=e.itunes)!=null&&A.episodeType){let R=e.itunes.episodeType.toLowerCase();(R==="full"||R==="trailer"||R==="bonus")&&(S=R)}let w;typeof((b=e.itunes)==null?void 0:b.image)=="string"?w=e.itunes.image:(I=e.itunes)!=null&&I.image&&typeof e.itunes.image=="object"&&"href"in e.itunes.image&&(w=e.itunes.image.href);let f=e.enclosure.length?parseInt(e.enclosure.length,10):void 0,y=(L=e.enclosure.type)==null?void 0:L.trim();return{id:i,podcastId:t,title:o,description:n,audioUrl:r,duration:a,publishDate:p,episodeNumber:E,seasonNumber:T,episodeType:S,imageUrl:w,fileSize:f,mimeType:y,guid:(O=e.guid)==null?void 0:O.trim()}}parseDuration(e){if(!e)return 0;let t=e.trim(),r=parseInt(t,10);if(!isNaN(r)&&t===r.toString())return r;let i=t.split(":").map(o=>parseInt(o,10));if(i.some(isNaN))return s.warn(`Invalid duration format: ${e}`),0;if(i.length===3){let[o,n,a]=i;return o*3600+n*60+a}else if(i.length===2){let[o,n]=i;return o*60+n}else if(i.length===1)return i[0];return s.warn(`Invalid duration format: ${e}`),0}generatePodcastId(e){let t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);t=(t<<5)-t+i,t=t&t}return`podcast-${Math.abs(t).toString(36)}`}generateEpisodeId(e){let t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);t=(t<<5)-t+i,t=t&t}return`episode-${Math.abs(t).toString(36)}`}static validateXML(e){if(!e||typeof e!="string")return!1;let t=e.trim();return!(!t.startsWith("<?xml")&&!t.startsWith("<rss")||!t.includes("<rss"))}};var as=er(zt());var Ie=class{constructor(){this.parser=new as.default({customFields:{feed:["subtitle","author"],item:["summary","author"]}})}async parseFromString(e,t){s.methodEntry("AtomParser","parseFromString",t);try{let r=await this.parser.parseString(e),i=this.extractPodcastData(r,t),o=this.extractEpisodesData(r,i.id);return s.info(`Parsed Atom feed: ${i.title}, ${o.length} episodes`),s.methodExit("AtomParser","parseFromString"),{podcast:i,episodes:o}}catch(r){throw s.error("Failed to parse Atom feed",r),new se("Failed to parse Atom feed",t,r)}}async parseFromUrl(e){s.methodEntry("AtomParser","parseFromUrl",e);try{let t=await this.parser.parseURL(e),r=this.extractPodcastData(t,e),i=this.extractEpisodesData(t,r.id);return s.info(`Parsed Atom feed: ${r.title}, ${i.length} episodes`),s.methodExit("AtomParser","parseFromUrl"),{podcast:r,episodes:i}}catch(t){throw s.error("Failed to parse Atom feed from URL",t),new se("Failed to parse Atom feed from URL",e,t)}}extractPodcastData(e,t){var S,w,f,y,C,M,x;let r=this.generatePodcastId(t),i=((S=e.title)==null?void 0:S.trim())||"Untitled Podcast",o=((w=e.author)==null?void 0:w.trim())||"Unknown Author",n=((f=e.subtitle)==null?void 0:f.trim())||"No description available",a=(C=(y=e.image)==null?void 0:y.url)==null?void 0:C.trim(),p=(M=e.link)==null?void 0:M.trim(),E=(x=e.language)==null?void 0:x.trim();return{id:r,title:i,author:o,description:n,feedUrl:t,imageUrl:a,websiteUrl:p,language:E,subscribedAt:new Date,lastFetchedAt:new Date}}extractEpisodesData(e,t){if(!e.items||e.items.length===0)return s.warn("No episodes found in Atom feed"),[];let r=[];for(let i of e.items)try{let o=this.extractEpisodeData(i,t);o&&r.push(o)}catch(o){s.warn("Failed to parse episode, skipping",o)}return r}extractEpisodeData(e,t){var w,f,y,C,M,x;if(!((w=e.enclosure)!=null&&w.url))return s.warn("Episode missing audio URL, skipping"),null;let r=e.enclosure.url.trim(),i=this.generateEpisodeId(e.id||r),o=((f=e.title)==null?void 0:f.trim())||"Untitled Episode",n=((y=e.content)==null?void 0:y.trim())||((C=e.summary)==null?void 0:C.trim())||"No description available",a=0,p=e.pubDate?new Date(e.pubDate):new Date,E=e.enclosure.length?parseInt(e.enclosure.length,10):void 0,T=(M=e.enclosure.type)==null?void 0:M.trim();return{id:i,podcastId:t,title:o,description:n,audioUrl:r,duration:a,publishDate:p,fileSize:E,mimeType:T,guid:(x=e.id)==null?void 0:x.trim()}}generatePodcastId(e){let t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);t=(t<<5)-t+i,t=t&t}return`podcast-${Math.abs(t).toString(36)}`}generateEpisodeId(e){let t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);t=(t<<5)-t+i,t=t&t}return`episode-${Math.abs(t).toString(36)}`}static validateXML(e){if(!e||typeof e!="string")return!1;let t=e.trim();return!(!t.startsWith("<?xml")&&!t.startsWith("<feed")||!t.includes("<feed")||!t.includes('xmlns="http://www.w3.org/2005/Atom"'))}};var cs=require("obsidian");var ve=class{constructor(e){this.cacheStore=null;this.rssParser=new xe,this.atomParser=new Ie,this.cacheStore=e||null}async fetchFeed(e,t={}){s.methodEntry("FeedService","fetchFeed",e);let{useCache:r=!0,cacheTTL:i=36e5,timeout:o=3e4,userAgent:n="Obsidian Podcast Player",etag:a,lastModified:p}=t;if(r&&this.cacheStore){let y=await this.getCachedFeed(e);if(y)return s.info("Using cached feed data"),s.methodExit("FeedService","fetchFeed","from cache"),y}let{xml:E,responseEtag:T,responseLastModified:S}=await this.fetchFeedXML(e,o,n,a,p),w=this.detectFeedType(E),f;if(w==="rss")f=await this.rssParser.parseFromString(E,e);else if(w==="atom")f=await this.atomParser.parseFromString(E,e);else try{f=await this.rssParser.parseFromString(E,e)}catch(y){f=await this.atomParser.parseFromString(E,e)}return this.cacheStore&&await this.cacheFeed(e,E,i,{etag:T,lastModified:S}),s.methodExit("FeedService","fetchFeed"),f}async updateFeed(e){var n;s.methodEntry("FeedService","updateFeed",e.id);let{podcast:t,episodes:r}=await this.fetchFeed(e.feedUrl,{useCache:!1}),i=new Set(((n=e.episodes)==null?void 0:n.map(a=>a.id))||[]),o=r.filter(a=>!i.has(a.id));return s.info(`Feed updated: ${o.length} new episodes`),s.methodExit("FeedService","updateFeed"),{podcast:t,episodes:r,newEpisodes:o}}async fetchFeedXML(e,t,r,i,o){s.debug("Fetching feed XML",e);try{let n=await tr(async()=>{let T={"User-Agent":r,Accept:"application/rss+xml, application/atom+xml, application/xml, text/xml"};i&&(T["If-None-Match"]=i),o&&(T["If-Modified-Since"]=o);let w=await(0,cs.requestUrl)({url:e,method:"GET",headers:T,throw:!1});if(w.status===304)throw new Error("NOT_MODIFIED");if(w.status>=400)throw new Pe(`HTTP ${w.status}: Failed to fetch feed`,e);return w},{maxRetries:3,initialDelay:1e3,maxDelay:1e4}),a=n.text,p=n.headers.etag,E=n.headers["last-modified"];return{xml:a,responseEtag:p,responseLastModified:E}}catch(n){throw n instanceof Error&&n.message==="NOT_MODIFIED"?n:(s.error("Failed to fetch feed XML",n),new Pe("Failed to fetch feed",e,n))}}detectFeedType(e){let t=e.trim().toLowerCase();return t.includes("<rss")?"rss":t.includes("<feed")&&t.includes('xmlns="http://www.w3.org/2005/atom"')?"atom":xe.validateXML(e)?"rss":Ie.validateXML(e)?"atom":"unknown"}async getCachedFeed(e){if(!this.cacheStore)return null;try{let t=await this.cacheStore.getCacheEntry(e);if(!t)return null;let r=this.detectFeedType(t.data);return r==="rss"?await this.rssParser.parseFromString(t.data,e):r==="atom"?await this.atomParser.parseFromString(t.data,e):null}catch(t){return s.warn("Failed to get cached feed",t),null}}async cacheFeed(e,t,r,i){if(this.cacheStore)try{await this.cacheStore.setCacheEntry(e,t,r,i),s.debug("Feed cached successfully")}catch(o){s.warn("Failed to cache feed",o)}}async clearCache(e){this.cacheStore&&(e?(await this.cacheStore.removeCacheEntry(e),s.info("Feed cache cleared",e)):(await this.cacheStore.clear(),s.info("All feed caches cleared")))}static validateFeedUrl(e){try{let t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch(t){return!1}}};var ze=class{constructor(e,t,r=36e5){this.syncTimer=null;this.isSyncing=!1;this.lastSyncTime=null;this.feedService=e,this.subscriptionStore=t,this.syncInterval=r}startAutoSync(){if(s.methodEntry("FeedSyncManager","startAutoSync"),this.syncTimer){s.warn("Auto sync already running");return}this.syncAll({force:!1}).catch(e=>{s.error("Initial sync failed",e)}),this.syncTimer=setInterval(()=>{this.syncAll({force:!1}).catch(e=>{s.error("Auto sync failed",e)})},this.syncInterval),s.info(`Auto sync started (interval: ${this.syncInterval}ms)`),s.methodExit("FeedSyncManager","startAutoSync")}stopAutoSync(){s.methodEntry("FeedSyncManager","stopAutoSync"),this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=null,s.info("Auto sync stopped")),s.methodExit("FeedSyncManager","stopAutoSync")}async syncAll(e={}){if(s.methodEntry("FeedSyncManager","syncAll"),this.isSyncing)throw s.warn("Sync already in progress"),new Error("Sync already in progress");this.isSyncing=!0;let t=new Date;try{let{force:r=!1,concurrency:i=3,updateInterval:o=this.syncInterval}=e,n=await this.subscriptionStore.getAllPodcasts(),a=r?n:n.filter(S=>this.shouldUpdate(S,o));s.info(`Syncing ${a.length} of ${n.length} podcasts`);let p=await this.batchUpdate(a,i),E=new Date,T={totalPodcasts:a.length,successCount:p.filter(S=>S.success).length,failureCount:p.filter(S=>!S.success).length,totalNewEpisodes:p.reduce((S,w)=>S+w.newEpisodesCount,0),results:p,startedAt:t,completedAt:E};return this.lastSyncTime=E,s.info(`Sync completed: ${T.successCount} succeeded, ${T.failureCount} failed, ${T.totalNewEpisodes} new episodes`),s.methodExit("FeedSyncManager","syncAll"),T}finally{this.isSyncing=!1}}async syncPodcasts(e,t={}){if(s.methodEntry("FeedSyncManager","syncPodcasts",`count=${e.length}`),this.isSyncing)throw s.warn("Sync already in progress"),new Error("Sync already in progress");this.isSyncing=!0;let r=new Date;try{let{concurrency:i=3}=t,o=[];for(let E of e){let T=await this.subscriptionStore.getPodcast(E);T&&o.push(T)}s.info(`Syncing ${o.length} specific podcasts`);let n=await this.batchUpdate(o,i),a=new Date,p={totalPodcasts:o.length,successCount:n.filter(E=>E.success).length,failureCount:n.filter(E=>!E.success).length,totalNewEpisodes:n.reduce((E,T)=>E+T.newEpisodesCount,0),results:n,startedAt:r,completedAt:a};return s.info(`Sync completed: ${p.successCount} succeeded, ${p.failureCount} failed`),s.methodExit("FeedSyncManager","syncPodcasts"),p}finally{this.isSyncing=!1}}async syncPodcast(e){s.methodEntry("FeedSyncManager","syncPodcast",e);let t=await this.subscriptionStore.getPodcast(e);if(!t)throw new Error(`Podcast not found: ${e}`);let r=await this.updatePodcast(t);return s.methodExit("FeedSyncManager","syncPodcast"),r}async batchUpdate(e,t){let r=[],i=[...e];for(;i.length>0;){let o=i.splice(0,t),n=await Promise.all(o.map(a=>this.updatePodcast(a)));r.push(...n),i.length>0&&await this.delay(1e3)}return r}async updatePodcast(e){s.debug(`Updating podcast: ${e.title}`);try{let{podcast:t,episodes:r,newEpisodes:i}=await this.feedService.updateFeed(e),o=e.episodes||[],n=[...i,...o],a=Array.from(new Map(n.map(p=>[p.id,p])).values());return a.sort((p,E)=>E.publishDate.getTime()-p.publishDate.getTime()),t.episodes=a,await this.subscriptionStore.updatePodcast(t),{podcastId:e.id,success:!0,newEpisodesCount:i.length}}catch(t){return s.error(`Failed to update podcast: ${e.title}`,t),{podcastId:e.id,success:!1,newEpisodesCount:0,error:t instanceof Error?t.message:"Unknown error"}}}shouldUpdate(e,t){if(!e.lastFetchedAt)return!0;let r=Date.now(),i=new Date(e.lastFetchedAt).getTime();return r-i>=t}delay(e){return new Promise(t=>setTimeout(t,e))}getSyncStatus(){return{isSyncing:this.isSyncing,isAutoSyncEnabled:this.syncTimer!==null,lastSyncTime:this.lastSyncTime,syncInterval:this.syncInterval}}setSyncInterval(e){s.methodEntry("FeedSyncManager","setSyncInterval",e),this.syncInterval=e,this.syncTimer&&(this.stopAutoSync(),this.startAutoSync()),s.methodExit("FeedSyncManager","setSyncInterval")}};var Ye=class{constructor(e,t,r){this.imageCache=null;this.feedService=e,this.subscriptionStore=t,this.imageCache=r||null}async subscribe(e){s.methodEntry("PodcastService","subscribe",e);try{if(!ve.validateFeedUrl(e))return{success:!1,error:"Invalid feed URL"};let t=await this.subscriptionStore.getPodcastByFeedUrl(e);if(t)return s.info("Already subscribed to this podcast"),{success:!0,podcast:t};let{podcast:r,episodes:i}=await this.feedService.fetchFeed(e,{useCache:!1});return r.episodes=i,r.imageUrl&&this.imageCache&&await this.cacheImage(r.imageUrl).catch(o=>{s.warn("Failed to cache podcast image",o)}),await this.subscriptionStore.addPodcast(r),s.info(`Subscribed to podcast: ${r.title}`),s.methodExit("PodcastService","subscribe"),{success:!0,podcast:r}}catch(t){s.error("Failed to subscribe to podcast",t);let r="Failed to subscribe to podcast";return t instanceof se?r="Failed to parse podcast feed":t instanceof Pe&&(r="Failed to fetch podcast feed"),s.methodExit("PodcastService","subscribe","failed"),{success:!1,error:r}}}async unsubscribe(e){s.methodEntry("PodcastService","unsubscribe",e);let t=await this.subscriptionStore.getPodcast(e);if(!t)throw new Error(`Podcast not found: ${e}`);await this.subscriptionStore.removePodcast(e),await this.feedService.clearCache(t.feedUrl),s.info(`Unsubscribed from podcast: ${t.title}`),s.methodExit("PodcastService","unsubscribe")}async getPodcast(e){s.methodEntry("PodcastService","getPodcast",e);let t=await this.subscriptionStore.getPodcast(e);return s.methodExit("PodcastService","getPodcast"),t}async getPodcastByFeedUrl(e){s.methodEntry("PodcastService","getPodcastByFeedUrl",e);let t=await this.subscriptionStore.getPodcastByFeedUrl(e);return s.methodExit("PodcastService","getPodcastByFeedUrl"),t}async getAllPodcasts(){s.methodEntry("PodcastService","getAllPodcasts");let e=await this.subscriptionStore.getAllPodcasts();return s.methodExit("PodcastService","getAllPodcasts"),e}async getSubscriptionCount(){return await this.subscriptionStore.getSubscriptionCount()}async isSubscribed(e){return await this.subscriptionStore.isSubscribed(e)}async isSubscribedByFeedUrl(e){return await this.subscriptionStore.isSubscribedByFeedUrl(e)}async searchPodcasts(e){s.methodEntry("PodcastService","searchPodcasts",e);let t=await this.subscriptionStore.searchPodcasts(e);return s.methodExit("PodcastService","searchPodcasts"),t}async updatePodcastMetadata(e,t){s.methodEntry("PodcastService","updatePodcastMetadata",e);let r=await this.subscriptionStore.getPodcast(e);if(!r)throw new Error(`Podcast not found: ${e}`);let i={...r,...t,id:r.id,feedUrl:r.feedUrl,subscribedAt:r.subscribedAt};await this.subscriptionStore.updatePodcast(i),s.methodExit("PodcastService","updatePodcastMetadata")}async updatePodcastSettings(e,t){s.methodEntry("PodcastService","updatePodcastSettings",e),await this.subscriptionStore.updatePodcastSettings(e,t),s.methodExit("PodcastService","updatePodcastSettings")}async getPodcastSettings(e){let t=await this.subscriptionStore.getPodcast(e);return t==null?void 0:t.settings}async clearPodcastSettings(e){s.methodEntry("PodcastService","clearPodcastSettings",e),await this.subscriptionStore.updatePodcastSettings(e,void 0),s.methodExit("PodcastService","clearPodcastSettings")}async getEpisodes(e){s.methodEntry("PodcastService","getEpisodes",e);let t=await this.subscriptionStore.getPodcast(e);if(!t)throw new Error(`Podcast not found: ${e}`);return s.methodExit("PodcastService","getEpisodes"),t.episodes||[]}async getEpisode(e,t){s.methodEntry("PodcastService","getEpisode",t);let i=(await this.getEpisodes(e)).find(o=>o.id===t)||null;return s.methodExit("PodcastService","getEpisode"),i}async getLatestEpisodes(e=20){s.methodEntry("PodcastService","getLatestEpisodes",`limit=${e}`);let t=await this.subscriptionStore.getAllPodcasts(),r=[];for(let o of t)o.episodes&&r.push(...o.episodes);r.sort((o,n)=>n.publishDate.getTime()-o.publishDate.getTime());let i=r.slice(0,e);return s.methodExit("PodcastService","getLatestEpisodes"),i}async getPodcastsNeedingUpdate(e){return await this.subscriptionStore.getPodcastsNeedingUpdate(e)}async cacheImage(e){if(this.imageCache)try{if(await this.imageCache.getCachedImage(e)){s.debug("Image already cached",e);return}let r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch image: ${r.status}`);let i=await r.arrayBuffer();await this.imageCache.cacheImage(e,i),s.debug("Image cached successfully",e)}catch(t){throw s.warn("Failed to cache image",t),t}}async getCachedImagePath(e){return this.imageCache?await this.imageCache.getCachedImage(e):null}async exportSubscriptions(){s.methodEntry("PodcastService","exportSubscriptions");let e=await this.subscriptionStore.exportSubscriptions();return s.methodExit("PodcastService","exportSubscriptions"),e}async importSubscriptions(e,t=!1){s.methodEntry("PodcastService","importSubscriptions",`replace=${t}`),await this.subscriptionStore.importSubscriptions(e,t),s.methodExit("PodcastService","importSubscriptions")}};var Ke=class{constructor(e,t){this.progressStore=e,this.subscriptionStore=t}async getEpisodeWithProgress(e){s.methodEntry("EpisodeManager","getEpisodeWithProgress",e);let t=await this.subscriptionStore.getAllPodcasts(),r=null;for(let a of t)if(a.episodes){let p=a.episodes.find(E=>E.id===e);if(p){r=p;break}}if(!r)return s.methodExit("EpisodeManager","getEpisodeWithProgress","not found"),null;let i=await this.progressStore.getProgress(e),o=i?await this.progressStore.getCompletionPercentage(e):0,n={...r,progress:i||void 0,completionPercentage:o};return s.methodExit("EpisodeManager","getEpisodeWithProgress"),n}async getEpisodesWithProgress(e){s.methodEntry("EpisodeManager","getEpisodesWithProgress",`count=${e.length}`);let t=[];for(let r of e){let i=await this.getEpisodeWithProgress(r);i&&t.push(i)}return s.methodExit("EpisodeManager","getEpisodesWithProgress"),t}async getPodcastEpisodesWithProgress(e){s.methodEntry("EpisodeManager","getPodcastEpisodesWithProgress",e);let t=await this.subscriptionStore.getPodcast(e);if(!t||!t.episodes)return s.methodExit("EpisodeManager","getPodcastEpisodesWithProgress","not found"),[];let r=[];for(let i of t.episodes){let o=await this.progressStore.getProgress(i.id),n=o?await this.progressStore.getCompletionPercentage(i.id):0;r.push({...i,progress:o||void 0,completionPercentage:n})}return s.methodExit("EpisodeManager","getPodcastEpisodesWithProgress"),r}async filterEpisodes(e,t){s.methodEntry("EpisodeManager","filterEpisodes",`count=${e.length}`);let r=[...e];return t.podcastId&&(r=r.filter(i=>i.podcastId===t.podcastId)),t.completed!==void 0&&(r=r.filter(i=>{var n;return(((n=i.progress)==null?void 0:n.completed)||!1)===t.completed})),t.inProgress!==void 0&&(r=r.filter(i=>!!(i.progress&&!i.progress.completed&&i.progress.position>0)===t.inProgress)),t.newerThan&&(r=r.filter(i=>i.publishDate>=t.newerThan)),t.olderThan&&(r=r.filter(i=>i.publishDate<=t.olderThan)),t.episodeType&&(r=r.filter(i=>i.episodeType===t.episodeType)),t.seasonNumber!==void 0&&(r=r.filter(i=>i.seasonNumber===t.seasonNumber)),s.methodExit("EpisodeManager","filterEpisodes",`filtered=${r.length}`),r}sortEpisodes(e,t="publishDate",r="desc"){s.methodEntry("EpisodeManager","sortEpisodes",`sortBy=${t}, order=${r}`);let i=[...e].sort((o,n)=>{var p,E,T,S;let a=0;switch(t){case"publishDate":a=o.publishDate.getTime()-n.publishDate.getTime();break;case"duration":a=o.duration-n.duration;break;case"title":a=o.title.localeCompare(n.title);break;case"episodeNumber":let w=o.episodeNumber||0,f=n.episodeNumber||0;a=w-f;break;case"lastPlayed":let y=((E=(p=o.progress)==null?void 0:p.lastPlayedAt)==null?void 0:E.getTime())||0,C=((S=(T=n.progress)==null?void 0:T.lastPlayedAt)==null?void 0:S.getTime())||0;a=y-C;break;default:a=0}return r==="asc"?a:-a});return s.methodExit("EpisodeManager","sortEpisodes"),i}searchEpisodes(e,t){s.methodEntry("EpisodeManager","searchEpisodes",t);let r=t.toLowerCase(),i=e.filter(o=>{let n=o.title.toLowerCase().includes(r),a=o.description.toLowerCase().includes(r);return n||a});return s.methodExit("EpisodeManager","searchEpisodes",`results=${i.length}`),i}async getUnplayedEpisodes(e){s.methodEntry("EpisodeManager","getUnplayedEpisodes",e);let t;e?t=await this.getPodcastEpisodesWithProgress(e):t=await this.getAllEpisodesWithProgress();let r=t.filter(i=>!i.progress||i.progress.position===0);return s.methodExit("EpisodeManager","getUnplayedEpisodes"),r}async getInProgressEpisodes(e){s.methodEntry("EpisodeManager","getInProgressEpisodes",e);let t=await this.progressStore.getInProgressEpisodes();if(!t.length)return s.methodExit("EpisodeManager","getInProgressEpisodes","empty"),[];let i=(e?t.filter(n=>n.podcastId===e):t).map(n=>n.episodeId),o=await this.getEpisodesWithProgress(i);return s.methodExit("EpisodeManager","getInProgressEpisodes"),o}async getCompletedEpisodes(e){s.methodEntry("EpisodeManager","getCompletedEpisodes",e);let t=await this.progressStore.getCompletedEpisodes();if(!t.length)return s.methodExit("EpisodeManager","getCompletedEpisodes","empty"),[];let i=(e?t.filter(n=>n.podcastId===e):t).map(n=>n.episodeId),o=await this.getEpisodesWithProgress(i);return s.methodExit("EpisodeManager","getCompletedEpisodes"),o}async getRecentlyPlayedEpisodes(e=10){s.methodEntry("EpisodeManager","getRecentlyPlayedEpisodes",`limit=${e}`);let t=await this.progressStore.getRecentlyPlayed(e);if(!t.length)return s.methodExit("EpisodeManager","getRecentlyPlayedEpisodes","empty"),[];let r=t.map(n=>n.episodeId),i=await this.getEpisodesWithProgress(r),o=r.map(n=>i.find(a=>a.id===n)).filter(n=>n!==void 0);return s.methodExit("EpisodeManager","getRecentlyPlayedEpisodes"),o}async getAllEpisodesWithProgress(){s.methodEntry("EpisodeManager","getAllEpisodesWithProgress");let e=await this.subscriptionStore.getAllPodcasts(),t=[];for(let r of e)if(r.episodes)for(let i of r.episodes){let o=await this.progressStore.getProgress(i.id),n=o?await this.progressStore.getCompletionPercentage(i.id):0;t.push({...i,progress:o||void 0,completionPercentage:n})}return s.methodExit("EpisodeManager","getAllEpisodesWithProgress"),t}async getPodcastStatistics(e){s.methodEntry("EpisodeManager","getPodcastStatistics",e);let t=await this.getPodcastEpisodesWithProgress(e),r={totalEpisodes:t.length,completedEpisodes:t.filter(i=>{var o;return(o=i.progress)==null?void 0:o.completed}).length,inProgressEpisodes:t.filter(i=>i.progress&&!i.progress.completed&&i.progress.position>0).length,unplayedEpisodes:t.filter(i=>!i.progress||i.progress.position===0).length,totalDuration:t.reduce((i,o)=>i+o.duration,0),totalListeningTime:t.reduce((i,o)=>{var n;return i+(((n=o.progress)==null?void 0:n.position)||0)},0),averageCompletionRate:0};return r.totalEpisodes>0&&r.totalDuration>0&&(r.averageCompletionRate=r.totalListeningTime/r.totalDuration*100),s.methodExit("EpisodeManager","getPodcastStatistics"),r}async getOverallStatistics(){s.methodEntry("EpisodeManager","getOverallStatistics");let e=await this.subscriptionStore.getAllPodcasts(),t=0,r=0;for(let E of e)E.episodes&&(t+=E.episodes.length,r+=E.episodes.reduce((T,S)=>T+S.duration,0));let i=await this.progressStore.getTotalListeningTime(),o=(await this.progressStore.getCompletedEpisodes()).length,n=(await this.progressStore.getInProgressEpisodes()).length,a=t-o-n,p={totalEpisodes:t,completedEpisodes:o,inProgressEpisodes:n,unplayedEpisodes:a,totalDuration:r,totalListeningTime:i,averageCompletionRate:0};return p.totalEpisodes>0&&p.totalDuration>0&&(p.averageCompletionRate=p.totalListeningTime/p.totalDuration*100),s.methodExit("EpisodeManager","getOverallStatistics"),p}async getEpisodesBySeason(e,t){s.methodEntry("EpisodeManager","getEpisodesBySeason",`${e}, season=${t}`);let i=(await this.getPodcastEpisodesWithProgress(e)).filter(o=>o.seasonNumber===t);return i.sort((o,n)=>(o.episodeNumber||0)-(n.episodeNumber||0)),s.methodExit("EpisodeManager","getEpisodesBySeason"),i}async getAvailableSeasons(e){s.methodEntry("EpisodeManager","getAvailableSeasons",e);let t=await this.subscriptionStore.getPodcast(e);if(!t||!t.episodes)return s.methodExit("EpisodeManager","getAvailableSeasons","not found"),[];let r=new Set;for(let o of t.episodes)o.seasonNumber!==void 0&&r.add(o.seasonNumber);let i=Array.from(r).sort((o,n)=>o-n);return s.methodExit("EpisodeManager","getAvailableSeasons"),i}};var Je=class{constructor(){this.audio=null;this.currentUrl=null;this.status="idle";this.eventHandlers={};this.progressInterval=null;s.methodEntry("PlaybackEngine","constructor"),this.initializeAudioElement(),s.methodExit("PlaybackEngine","constructor")}initializeAudioElement(){this.audio=new Audio,this.audio.preload="metadata",this.attachEventListeners()}attachEventListeners(){this.audio&&(this.audio.addEventListener("play",()=>{var e,t;s.debug("Audio play event"),this.status="playing",(t=(e=this.eventHandlers).onPlay)==null||t.call(e),this.startProgressTracking()}),this.audio.addEventListener("pause",()=>{var e,t;s.debug("Audio pause event"),this.status="paused",(t=(e=this.eventHandlers).onPause)==null||t.call(e),this.stopProgressTracking()}),this.audio.addEventListener("ended",()=>{var e,t;s.debug("Audio ended event"),this.status="ended",(t=(e=this.eventHandlers).onEnded)==null||t.call(e),this.stopProgressTracking()}),this.audio.addEventListener("timeupdate",()=>{var e,t;this.audio&&((t=(e=this.eventHandlers).onTimeUpdate)==null||t.call(e,this.audio.currentTime))}),this.audio.addEventListener("durationchange",()=>{var e,t;this.audio&&!isNaN(this.audio.duration)&&(s.debug("Duration changed",this.audio.duration),(t=(e=this.eventHandlers).onDurationChange)==null||t.call(e,this.audio.duration))}),this.audio.addEventListener("loadstart",()=>{var e,t;s.debug("Audio load start"),this.status="loading",(t=(e=this.eventHandlers).onLoadStart)==null||t.call(e)}),this.audio.addEventListener("loadedmetadata",()=>{var e,t;s.debug("Audio metadata loaded"),(t=(e=this.eventHandlers).onLoadedMetadata)==null||t.call(e)}),this.audio.addEventListener("canplay",()=>{var e,t;s.debug("Audio can play"),(t=(e=this.eventHandlers).onCanPlay)==null||t.call(e)}),this.audio.addEventListener("error",e=>{var r,i,o,n,a;s.error("Audio playback error",(r=this.audio)==null?void 0:r.error),this.status="error";let t=new z(((o=(i=this.audio)==null?void 0:i.error)==null?void 0:o.message)||"Unknown playback error",this.currentUrl||void 0);(a=(n=this.eventHandlers).onError)==null||a.call(n,t)}),this.audio.addEventListener("volumechange",()=>{var e,t;this.audio&&((t=(e=this.eventHandlers).onVolumeChange)==null||t.call(e,this.audio.volume,this.audio.muted))}),this.audio.addEventListener("ratechange",()=>{var e,t;this.audio&&((t=(e=this.eventHandlers).onRateChange)==null||t.call(e,this.audio.playbackRate))}),this.audio.addEventListener("progress",()=>{var e,t;if(this.audio&&this.audio.buffered.length>0){let r=this.audio.buffered.end(this.audio.buffered.length-1);(t=(e=this.eventHandlers).onProgress)==null||t.call(e,r)}}))}setEventHandlers(e){this.eventHandlers={...this.eventHandlers,...e}}async load(e){if(s.methodEntry("PlaybackEngine","load",e),!this.audio)throw new z("Audio element not initialized");try{this.status==="playing"&&this.pause(),this.currentUrl=e,this.audio.src=e,this.audio.load(),s.info("Audio loaded",e),s.methodExit("PlaybackEngine","load")}catch(t){throw s.error("Failed to load audio",t),this.status="error",new z("Failed to load audio",e,t)}}async play(){if(s.methodEntry("PlaybackEngine","play"),!this.audio)throw new z("Audio element not initialized");if(!this.currentUrl)throw new z("No audio loaded");try{await this.audio.play(),s.info("Audio playing"),s.methodExit("PlaybackEngine","play")}catch(e){throw s.error("Failed to play audio",e),this.status="error",new z("Failed to play audio",this.currentUrl,e)}}pause(){if(s.methodEntry("PlaybackEngine","pause"),!this.audio)throw new z("Audio element not initialized");this.audio.pause(),s.info("Audio paused"),s.methodExit("PlaybackEngine","pause")}stop(){if(s.methodEntry("PlaybackEngine","stop"),!this.audio)throw new z("Audio element not initialized");this.audio.pause(),this.audio.currentTime=0,this.status="idle",s.info("Audio stopped"),s.methodExit("PlaybackEngine","stop")}seek(e){if(s.methodEntry("PlaybackEngine","seek",e),!this.audio)throw new z("Audio element not initialized");if(isNaN(this.audio.duration)){s.warn("Cannot seek: duration not available");return}let t=Math.max(0,Math.min(e,this.audio.duration));this.audio.currentTime=t,s.debug("Seeked to",t),s.methodExit("PlaybackEngine","seek")}setVolume(e){if(s.methodEntry("PlaybackEngine","setVolume",e),!this.audio)throw new z("Audio element not initialized");let t=sr(e);this.audio.volume=t,s.debug("Volume set to",t),s.methodExit("PlaybackEngine","setVolume")}setPlaybackRate(e){if(s.methodEntry("PlaybackEngine","setPlaybackRate",e),!this.audio)throw new z("Audio element not initialized");let t=ir(e);this.audio.playbackRate=t,s.debug("Playback rate set to",t),s.methodExit("PlaybackEngine","setPlaybackRate")}setMuted(e){if(s.methodEntry("PlaybackEngine","setMuted",e),!this.audio)throw new z("Audio element not initialized");this.audio.muted=e,s.debug("Muted set to",e),s.methodExit("PlaybackEngine","setMuted")}getStatus(){return this.status}getMetadata(){if(!this.audio)return null;let e=this.audio.buffered.length>0?this.audio.buffered.end(this.audio.buffered.length-1):0;return{duration:this.audio.duration||0,currentTime:this.audio.currentTime||0,buffered:e,volume:this.audio.volume,playbackRate:this.audio.playbackRate,muted:this.audio.muted}}getCurrentTime(){var e;return((e=this.audio)==null?void 0:e.currentTime)||0}getDuration(){var e;return((e=this.audio)==null?void 0:e.duration)||0}getVolume(){var e;return((e=this.audio)==null?void 0:e.volume)||1}getPlaybackRate(){var e;return((e=this.audio)==null?void 0:e.playbackRate)||1}isMuted(){var e;return((e=this.audio)==null?void 0:e.muted)||!1}isPlaying(){return this.status==="playing"}isPaused(){return this.status==="paused"}isLoading(){return this.status==="loading"}startProgressTracking(){this.progressInterval===null&&(this.progressInterval=window.setInterval(()=>{var e,t;this.audio&&this.status==="playing"&&((t=(e=this.eventHandlers).onTimeUpdate)==null||t.call(e,this.audio.currentTime))},100))}stopProgressTracking(){this.progressInterval!==null&&(clearInterval(this.progressInterval),this.progressInterval=null)}destroy(){s.methodEntry("PlaybackEngine","destroy"),this.stopProgressTracking(),this.audio&&(this.audio.pause(),this.audio.src="",this.audio.load(),this.audio=null),this.currentUrl=null,this.status="idle",this.eventHandlers={},s.info("PlaybackEngine destroyed"),s.methodExit("PlaybackEngine","destroy")}};var Ze=class{constructor(e,t={}){this.currentEpisode=null;this.lastSavedPosition=0;this.lastSavedTime=0;this.saveTimer=null;this.isTracking=!1;this.progressStore=e,this.saveInterval=t.saveInterval||5e3,this.minPositionChange=t.minPositionChange||2,this.completionThreshold=t.completionThreshold||30}async startTracking(e){s.methodEntry("ProgressTracker","startTracking",e.id),this.isTracking&&await this.stopTracking(),this.currentEpisode=e,this.isTracking=!0;let t=await this.progressStore.getProgress(e.id);t?this.lastSavedPosition=t.position:this.lastSavedPosition=0,this.lastSavedTime=Date.now(),this.startPeriodicSave(),s.info("Started tracking progress",e.id),s.methodExit("ProgressTracker","startTracking")}async stopTracking(e=!0){if(s.methodEntry("ProgressTracker","stopTracking",`save=${e}`),!this.isTracking){s.methodExit("ProgressTracker","stopTracking","not tracking");return}this.stopPeriodicSave(),e&&this.currentEpisode&&await this.saveProgress(this.lastSavedPosition,!0),this.currentEpisode=null,this.isTracking=!1,this.lastSavedPosition=0,this.lastSavedTime=0,s.info("Stopped tracking progress"),s.methodExit("ProgressTracker","stopTracking")}updatePosition(e){!this.isTracking||!this.currentEpisode||(this.lastSavedPosition=e)}async forceSave(e){if(s.methodEntry("ProgressTracker","forceSave"),!this.currentEpisode){s.warn("No episode to save progress for"),s.methodExit("ProgressTracker","forceSave","no episode");return}let t=e!==void 0?e:this.lastSavedPosition;await this.saveProgress(t,!0),s.methodExit("ProgressTracker","forceSave")}async markCompleted(){if(s.methodEntry("ProgressTracker","markCompleted"),!this.currentEpisode){s.warn("No episode to mark as completed"),s.methodExit("ProgressTracker","markCompleted","no episode");return}await this.progressStore.markCompleted(this.currentEpisode.id,this.currentEpisode.podcastId,this.currentEpisode.duration),s.info("Episode marked as completed",this.currentEpisode.id),s.methodExit("ProgressTracker","markCompleted")}getLastSavedPosition(){return this.lastSavedPosition}async getResumePosition(e){s.methodEntry("ProgressTracker","getResumePosition",e);let t=await this.progressStore.getProgress(e);return t?t.completed?(s.methodExit("ProgressTracker","getResumePosition","completed"),0):(s.methodExit("ProgressTracker","getResumePosition",t.position),t.position):(s.methodExit("ProgressTracker","getResumePosition","no progress"),0)}async shouldResume(e,t=10){return await this.getResumePosition(e)>=t}async resetProgress(e){s.methodEntry("ProgressTracker","resetProgress",e),await this.progressStore.resetProgress(e),this.currentEpisode&&this.currentEpisode.id===e&&(this.lastSavedPosition=0),s.info("Progress reset",e),s.methodExit("ProgressTracker","resetProgress")}startPeriodicSave(){this.saveTimer===null&&(this.saveTimer=window.setInterval(()=>{this.periodicSave().catch(e=>{s.error("Periodic save failed",e)})},this.saveInterval))}stopPeriodicSave(){this.saveTimer!==null&&(clearInterval(this.saveTimer),this.saveTimer=null)}async periodicSave(){if(!this.isTracking||!this.currentEpisode)return;let e=await this.progressStore.getProgress(this.currentEpisode.id),t=(e==null?void 0:e.position)||0;Math.abs(this.lastSavedPosition-t)<this.minPositionChange||await this.saveProgress(this.lastSavedPosition,!1)}async saveProgress(e,t){if(this.currentEpisode)try{let r=Fe(e,this.currentEpisode.duration,this.completionThreshold),i={episodeId:this.currentEpisode.id,podcastId:this.currentEpisode.podcastId,position:e,duration:this.currentEpisode.duration,lastPlayedAt:new Date,completed:r};await this.progressStore.updateProgress(i),this.lastSavedTime=Date.now(),s.debug("Progress saved",{episodeId:this.currentEpisode.id,position:e,completed:r})}catch(r){s.error("Failed to save progress",r)}}isCurrentlyTracking(){return this.isTracking}getCurrentEpisode(){return this.currentEpisode}getTimeSinceLastSave(){return this.lastSavedTime===0?0:Date.now()-this.lastSavedTime}};var et=class{constructor(e,t){this.currentEpisode=null;this.eventHandlers={};s.methodEntry("PlayerController","constructor"),this.engine=e,this.progressTracker=t,this.currentSettings={...ce.defaultPlaybackSettings},this.state={status:"stopped",position:0,volume:this.currentSettings.volume,playbackSpeed:this.currentSettings.playbackSpeed,muted:!1},this.setupEngineHandlers(),s.methodExit("PlayerController","constructor")}setupEngineHandlers(){let e={onPlay:()=>{this.updateState({status:"playing"})},onPause:()=>{this.updateState({status:"paused"})},onEnded:()=>{this.handleEpisodeEnded()},onTimeUpdate:t=>{this.updateState({position:t}),this.progressTracker.updatePosition(t)},onDurationChange:t=>{this.currentEpisode&&(this.currentEpisode.duration=t)},onLoadStart:()=>{this.updateState({status:"loading"})},onError:t=>{var r,i;this.updateState({status:"error",error:t.message}),(i=(r=this.eventHandlers).onError)==null||i.call(r,t)},onVolumeChange:(t,r)=>{this.updateState({volume:t,muted:r})},onRateChange:t=>{this.updateState({playbackSpeed:t})}};this.engine.setEventHandlers(e)}async loadEpisode(e,t=!1,r=!0){var i,o;s.methodEntry("PlayerController","loadEpisode",e.id);try{if(this.currentEpisode&&await this.progressTracker.stopTracking(!0),await this.engine.load(e.audioUrl),this.currentEpisode=e,this.updateState({currentEpisode:e,status:"paused",position:0,error:void 0}),e.podcastId,await this.progressTracker.startTracking(e),r)if(await this.progressTracker.shouldResume(e.id)){let a=await this.progressTracker.getResumePosition(e.id);s.info("Resuming from saved position",a),this.engine.seek(a);let p=this.currentSettings.skipIntroSeconds||0;p>0&&a<p&&this.engine.seek(p)}else{let a=this.currentSettings.skipIntroSeconds||0;a>0&&this.engine.seek(a)}(o=(i=this.eventHandlers).onEpisodeChange)==null||o.call(i,e),t&&await this.play(),s.info("Episode loaded",e.title),s.methodExit("PlayerController","loadEpisode")}catch(n){throw s.error("Failed to load episode",n),this.updateState({status:"error",error:n instanceof Error?n.message:"Failed to load episode"}),n}}async play(){if(s.methodEntry("PlayerController","play"),!this.currentEpisode)throw new z("No episode loaded");await this.engine.play(),s.methodExit("PlayerController","play")}pause(){s.methodEntry("PlayerController","pause"),this.engine.pause(),s.methodExit("PlayerController","pause")}async togglePlayPause(){this.engine.isPlaying()?this.pause():await this.play()}async stop(){var e,t;s.methodEntry("PlayerController","stop"),this.engine.stop(),this.currentEpisode&&await this.progressTracker.stopTracking(!0),this.currentEpisode=null,this.updateState({currentEpisode:void 0,status:"stopped",position:0}),(t=(e=this.eventHandlers).onEpisodeChange)==null||t.call(e,null),s.methodExit("PlayerController","stop")}seek(e){s.methodEntry("PlayerController","seek",e),this.engine.seek(e),this.progressTracker.updatePosition(e),s.methodExit("PlayerController","seek")}skipForward(e){let t=this.engine.getCurrentTime(),r=this.engine.getDuration(),i=ar(t,r,e);this.seek(i)}skipBackward(e){let t=this.engine.getCurrentTime(),r=cr(t,e);this.seek(r)}setVolume(e){s.methodEntry("PlayerController","setVolume",e),this.engine.setVolume(e),this.currentSettings.volume=e,s.methodExit("PlayerController","setVolume")}setPlaybackSpeed(e){s.methodEntry("PlayerController","setPlaybackSpeed",e),this.engine.setPlaybackRate(e),this.currentSettings.playbackSpeed=e,s.methodExit("PlayerController","setPlaybackSpeed")}cyclePlaybackSpeed(){let e=this.engine.getPlaybackRate(),t=or(e);this.setPlaybackSpeed(t)}setMuted(e){s.methodEntry("PlayerController","setMuted",e),this.engine.setMuted(e),s.methodExit("PlayerController","setMuted")}toggleMute(){let e=this.engine.isMuted();this.setMuted(!e)}applyPodcastSettings(e){s.methodEntry("PlayerController","applyPodcastSettings"),this.currentSettings={...e},this.engine.setVolume(e.volume),this.engine.setPlaybackRate(e.playbackSpeed),s.info("Podcast settings applied",e),s.methodExit("PlayerController","applyPodcastSettings")}getState(){return{...this.state}}getCurrentEpisode(){return this.currentEpisode}getCurrentPosition(){return this.engine.getCurrentTime()}getDuration(){return this.engine.getDuration()}isPlaying(){return this.engine.isPlaying()}isPaused(){return this.engine.isPaused()}setEventHandlers(e){this.eventHandlers={...this.eventHandlers,...e}}async markEpisodeCompleted(){this.currentEpisode&&(await this.progressTracker.markCompleted(),s.info("Episode marked as completed",this.currentEpisode.id))}async handleEpisodeEnded(){var e,t;s.methodEntry("PlayerController","handleEpisodeEnded"),this.currentEpisode&&(await this.progressTracker.markCompleted(),this.updateState({status:"stopped"}),(t=(e=this.eventHandlers).onEpisodeEnded)==null||t.call(e,this.currentEpisode),s.info("Episode ended",this.currentEpisode.title),s.methodExit("PlayerController","handleEpisodeEnded"))}updateState(e){var t,r;this.state={...this.state,...e},(r=(t=this.eventHandlers).onStateChange)==null||r.call(t,this.state)}async destroy(){s.methodEntry("PlayerController","destroy"),await this.progressTracker.stopTracking(!0),this.engine.destroy(),this.currentEpisode=null,this.eventHandlers={},s.info("PlayerController destroyed"),s.methodExit("PlayerController","destroy")}};var Dt=class extends Ce.Plugin{async onload(){s.info("Loading Podcast Player plugin"),this.pathManager=new Ae(this.app.vault,ce.dataFolderPath),this.settingsStore=new qe(this.app.vault,this.pathManager),await this.loadSettings(),await this.pathManager.ensureDirectories(),this.subscriptionStore=new Le(this.app.vault,this.pathManager),this.progressStore=new ke(this.app.vault,this.pathManager),this.playlistStore=new je(this.app.vault,this.pathManager),this.queueStore=new Qe(this.app.vault,this.pathManager),this.feedCacheStore=new Re(this.app.vault,this.pathManager),this.imageCacheStore=new _e(this.app.vault,this.pathManager),this.feedService=new ve(this.feedCacheStore),this.podcastService=new Ye(this.feedService,this.subscriptionStore,this.imageCacheStore),this.episodeManager=new Ke(this.progressStore,this.subscriptionStore),this.feedSyncManager=new ze(this.feedService,this.subscriptionStore,this.settings.feedUpdateInterval*60*1e3),this.playlistManager=new $e(this.playlistStore),this.queueManager=new Xe(this.queueStore),this.playbackEngine=new Je,this.progressTracker=new Ze(this.progressStore),this.playerController=new et(this.playbackEngine,this.progressTracker),this.registerView(Ee,e=>new Ve(e,this)),this.registerView(we,e=>new Be(e,this)),this.addSettingTab(new Ue(this.app,this)),this.addRibbonIcon("podcast","Podcast Player",async e=>{await this.activateSidebarView()}),this.addCommand({id:"open-podcast-player",name:"Open Podcast Player",callback:async()=>{await this.activatePlayerView()}}),this.addCommand({id:"open-podcast-sidebar",name:"Open Podcast Sidebar",callback:async()=>{await this.activateSidebarView()}}),this.addCommand({id:"subscribe-to-podcast",name:"Subscribe to Podcast",callback:()=>{new Ce.Notice("Subscribe to Podcast - Coming Soon!")}}),s.info("Podcast Player plugin loaded successfully")}onunload(){s.info("Unloading Podcast Player plugin"),this.feedSyncManager&&this.feedSyncManager.stopAutoSync(),this.playerController&&this.playerController.stop(),this.app.workspace.detachLeavesOfType(Ee),this.app.workspace.detachLeavesOfType(we)}async loadSettings(){s.methodEntry("PodcastPlayerPlugin","loadSettings");try{this.settings=await this.settingsStore.loadWithMigration(),this.pathManager.updateBasePath(this.settings.dataFolderPath),s.info("Settings loaded successfully")}catch(e){s.error("Failed to load settings, using defaults",e),this.settings={...ce}}s.methodExit("PodcastPlayerPlugin","loadSettings")}async saveSettings(){s.methodEntry("PodcastPlayerPlugin","saveSettings");try{await this.settingsStore.updateSettings(this.settings),this.pathManager.updateBasePath(this.settings.dataFolderPath),s.info("Settings saved successfully")}catch(e){s.error("Failed to save settings",e),new Ce.Notice("Failed to save settings")}s.methodExit("PodcastPlayerPlugin","saveSettings")}async resetSettings(){s.methodEntry("PodcastPlayerPlugin","resetSettings");try{await this.settingsStore.resetToDefaults(),this.settings={...ce},this.pathManager.updateBasePath(this.settings.dataFolderPath),s.info("Settings reset to defaults")}catch(e){s.error("Failed to reset settings",e),new Ce.Notice("Failed to reset settings")}s.methodExit("PodcastPlayerPlugin","resetSettings")}async activatePlayerView(){s.methodEntry("PodcastPlayerPlugin","activatePlayerView");let{workspace:e}=this.app,t=null,r=e.getLeavesOfType(Ee);r.length>0?t=r[0]:(t=e.getRightLeaf(!1),t&&await t.setViewState({type:Ee,active:!0})),t&&e.revealLeaf(t),s.methodExit("PodcastPlayerPlugin","activatePlayerView")}async activateSidebarView(){s.methodEntry("PodcastPlayerPlugin","activateSidebarView");let{workspace:e}=this.app,t=null,r=e.getLeavesOfType(we);r.length>0?t=r[0]:(t=e.getRightLeaf(!1),t&&await t.setViewState({type:we,active:!0})),t&&e.revealLeaf(t),s.methodExit("PodcastPlayerPlugin","activateSidebarView")}getSubscriptionStore(){return this.subscriptionStore}getPodcastService(){return this.podcastService}getEpisodeManager(){return this.episodeManager}getPlaylistManager(){return this.playlistManager}getQueueManager(){return this.queueManager}getFeedSyncManager(){return this.feedSyncManager}};
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)
*/
